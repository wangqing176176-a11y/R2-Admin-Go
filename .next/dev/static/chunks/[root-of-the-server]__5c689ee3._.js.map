{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/manrope_479b00f1.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"manrope_479b00f1-module__7uroFa__className\",\n  \"variable\": \"manrope_479b00f1-module__7uroFa__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 11, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/manrope_479b00f1.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22page.tsx%22,%22import%22:%22Manrope%22,%22arguments%22:[{%22subsets%22:[%22latin%22],%22weight%22:[%22500%22,%22600%22,%22700%22,%22800%22],%22variable%22:%22--font-manrope%22,%22display%22:%22swap%22}],%22variableName%22:%22manrope%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Manrope', 'Manrope Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,qKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,qKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,qKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/noto_sans_sc_cacfb773.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"noto_sans_sc_cacfb773-module__J9LEPa__className\",\n  \"variable\": \"noto_sans_sc_cacfb773-module__J9LEPa__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/noto_sans_sc_cacfb773.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22page.tsx%22,%22import%22:%22Noto_Sans_SC%22,%22arguments%22:[{%22subsets%22:[%22latin%22],%22weight%22:[%22400%22,%22500%22,%22700%22],%22variable%22:%22--font-noto-sc%22,%22display%22:%22swap%22}],%22variableName%22:%22notoSansSC%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Noto Sans SC', 'Noto Sans SC Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,0KAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,0KAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,0KAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/wangqing/Documents/GitHub/R2-Admin-Go/components/Modal.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\ntype ModalProps = {\n  open: boolean;\n  title: string;\n  description?: string;\n  children: React.ReactNode;\n  onClose: () => void;\n  footer?: React.ReactNode;\n  panelClassName?: string;\n  showHeaderClose?: boolean;\n};\n\nexport default function Modal({\n  open,\n  title,\n  description,\n  children,\n  onClose,\n  footer,\n  panelClassName,\n  showHeaderClose = false,\n}: ModalProps) {\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-start sm:items-center justify-center p-3 sm:p-4 overflow-y-auto\" role=\"dialog\" aria-modal=\"true\">\n      <button\n        type=\"button\"\n        className=\"absolute inset-0 bg-black/40\"\n        onClick={onClose}\n        aria-label=\"Close dialog\"\n      />\n      <div\n        className={[\n          \"relative w-full max-w-lg max-h-[calc(100dvh-1.5rem)] sm:max-h-[calc(100dvh-2rem)] rounded-2xl border border-gray-200 bg-white shadow-2xl dark:border-gray-800 dark:bg-gray-900 flex flex-col overflow-hidden\",\n          panelClassName,\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n      >\n        <div className=\"relative px-5 py-4 border-b border-gray-100 dark:border-gray-800\">\n          {showHeaderClose ? (\n            <button\n              type=\"button\"\n              onClick={onClose}\n              aria-label=\"关闭弹窗\"\n              className=\"absolute right-3 top-2.5 inline-flex h-10 w-10 items-center justify-center rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-gray-100\"\n            >\n              <span className=\"text-xl leading-none\">×</span>\n            </button>\n          ) : null}\n          <div className=\"min-w-0 pr-10\">\n            <div className=\"text-base font-semibold text-gray-900 dark:text-gray-100\">{title}</div>\n            {description ? <div className=\"mt-1 text-sm text-gray-500 dark:text-gray-300\">{description}</div> : null}\n          </div>\n        </div>\n        <div className=\"px-5 py-4 text-gray-900 dark:text-gray-100 overflow-y-auto min-h-0\">{children}</div>\n        {footer ? <div className=\"px-5 py-4 border-t border-gray-100 dark:border-gray-800\">{footer}</div> : null}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAee,SAAS,MAAM,EAC5B,IAAI,EACJ,KAAK,EACL,WAAW,EACX,QAAQ,EACR,OAAO,EACP,MAAM,EACN,cAAc,EACd,kBAAkB,KAAK,EACZ;IACX,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,6LAAC;QAAI,WAAU;QAAgG,MAAK;QAAS,cAAW;;0BACtI,6LAAC;gBACC,MAAK;gBACL,WAAU;gBACV,SAAS;gBACT,cAAW;;;;;;0BAEb,6LAAC;gBACC,WAAW;oBACT;oBACA;iBACD,CACE,MAAM,CAAC,SACP,IAAI,CAAC;;kCAER,6LAAC;wBAAI,WAAU;;4BACZ,gCACC,6LAAC;gCACC,MAAK;gCACL,SAAS;gCACT,cAAW;gCACX,WAAU;0CAEV,cAAA,6LAAC;oCAAK,WAAU;8CAAuB;;;;;;;;;;uCAEvC;0CACJ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDAA4D;;;;;;oCAC1E,4BAAc,6LAAC;wCAAI,WAAU;kDAAiD;;;;;+CAAqB;;;;;;;;;;;;;kCAGxG,6LAAC;wBAAI,WAAU;kCAAsE;;;;;;oBACpF,uBAAS,6LAAC;wBAAI,WAAU;kCAA2D;;;;;+BAAgB;;;;;;;;;;;;;AAI5G;KAjDwB"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///Users/wangqing/Documents/GitHub/R2-Admin-Go/lib/error-zh.ts"],"sourcesContent":["const containsChinese = (s: string) => /[\\u4e00-\\u9fa5]/.test(s);\n\nexport const toChineseErrorMessage = (error: unknown, fallback = \"操作失败，请重试。\") => {\n  const raw = String(error instanceof Error ? error.message : error ?? \"\").trim();\n  if (!raw) return fallback;\n  if (containsChinese(raw)) return raw;\n\n  const lower = raw.toLowerCase();\n\n  if (lower.includes(\"invalid login credentials\")) return \"账号或密码错误，请重试。\";\n  if (lower.includes(\"email not confirmed\")) return \"邮箱尚未验证，请先前往邮箱完成验证。\";\n  if (lower.includes(\"unauthorized\")) return \"登录状态已失效，请重新登录。\";\n  if (lower.includes(\"missing params\")) return \"请求参数不完整，请刷新后重试。\";\n  if (lower.includes(\"bucket required\")) return \"缺少存储桶参数。\";\n  if (lower.includes(\"bucket id required\")) return \"缺少存储桶 ID。\";\n  if (lower.includes(\"bucket not found\")) return \"未找到存储桶，请刷新后重试。\";\n  if (lower.includes(\"source not found\")) return \"源文件不存在或已被删除。\";\n  if (lower.includes(\"unknown bucket binding\") || lower.includes(\"bucket binding not configured\")) {\n    return \"存储桶绑定未配置或不可用，请检查配置。\";\n  }\n  if (lower.includes(\"token expired\")) return \"操作令牌已过期，请重试。\";\n  if (lower.includes(\"invalid token\")) return \"操作令牌无效，请重试。\";\n  if (lower.includes(\"missing environment variable\")) return \"服务端缺少必要环境变量，请联系管理员。\";\n  if (\n    lower.includes(\"decryption failed\") ||\n    lower.includes(\"ciphertext authentication failure\") ||\n    lower.includes(\"bad padding\") ||\n    lower.includes(\"aes-gcm\")\n  ) {\n    return \"密钥解密失败：请检查 CREDENTIALS_ENCRYPTION_KEY 是否与历史配置一致。\";\n  }\n  if (lower.includes(\"failed to load buckets\")) return \"读取存储桶列表失败，请稍后重试。\";\n  if (lower.includes(\"failed to load bucket\")) return \"读取存储桶信息失败，请稍后重试。\";\n  if (lower.includes(\"failed to create bucket\")) return \"新增存储桶失败，请检查配置后重试。\";\n  if (lower.includes(\"failed to update bucket\")) return \"更新存储桶失败，请稍后重试。\";\n  if (lower.includes(\"failed to delete bucket\")) return \"删除存储桶失败，请稍后重试。\";\n  if (lower.includes(\"failed to check existing bucket\")) return \"校验存储桶是否存在时失败，请稍后重试。\";\n  if (lower.includes(\"failed to set default bucket\")) return \"设置默认存储桶失败，请稍后重试。\";\n  if (lower.includes(\"duplicate key value violates unique constraint\")) {\n    return \"该账号下已存在同名存储桶（同 Account ID + 桶名），请修改后重试。\";\n  }\n  if (lower.includes(\"failed to fetch\")) return \"网络请求失败，请检查网络后重试。\";\n\n  return fallback;\n};\n"],"names":[],"mappings":";;;;AAAA,MAAM,kBAAkB,CAAC,IAAc,kBAAkB,IAAI,CAAC;AAEvD,MAAM,wBAAwB,CAAC,OAAgB,WAAW,WAAW;IAC1E,MAAM,MAAM,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG,SAAS,IAAI,IAAI;IAC7E,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI,gBAAgB,MAAM,OAAO;IAEjC,MAAM,QAAQ,IAAI,WAAW;IAE7B,IAAI,MAAM,QAAQ,CAAC,8BAA8B,OAAO;IACxD,IAAI,MAAM,QAAQ,CAAC,wBAAwB,OAAO;IAClD,IAAI,MAAM,QAAQ,CAAC,iBAAiB,OAAO;IAC3C,IAAI,MAAM,QAAQ,CAAC,mBAAmB,OAAO;IAC7C,IAAI,MAAM,QAAQ,CAAC,oBAAoB,OAAO;IAC9C,IAAI,MAAM,QAAQ,CAAC,uBAAuB,OAAO;IACjD,IAAI,MAAM,QAAQ,CAAC,qBAAqB,OAAO;IAC/C,IAAI,MAAM,QAAQ,CAAC,qBAAqB,OAAO;IAC/C,IAAI,MAAM,QAAQ,CAAC,6BAA6B,MAAM,QAAQ,CAAC,kCAAkC;QAC/F,OAAO;IACT;IACA,IAAI,MAAM,QAAQ,CAAC,kBAAkB,OAAO;IAC5C,IAAI,MAAM,QAAQ,CAAC,kBAAkB,OAAO;IAC5C,IAAI,MAAM,QAAQ,CAAC,iCAAiC,OAAO;IAC3D,IACE,MAAM,QAAQ,CAAC,wBACf,MAAM,QAAQ,CAAC,wCACf,MAAM,QAAQ,CAAC,kBACf,MAAM,QAAQ,CAAC,YACf;QACA,OAAO;IACT;IACA,IAAI,MAAM,QAAQ,CAAC,2BAA2B,OAAO;IACrD,IAAI,MAAM,QAAQ,CAAC,0BAA0B,OAAO;IACpD,IAAI,MAAM,QAAQ,CAAC,4BAA4B,OAAO;IACtD,IAAI,MAAM,QAAQ,CAAC,4BAA4B,OAAO;IACtD,IAAI,MAAM,QAAQ,CAAC,4BAA4B,OAAO;IACtD,IAAI,MAAM,QAAQ,CAAC,oCAAoC,OAAO;IAC9D,IAAI,MAAM,QAAQ,CAAC,iCAAiC,OAAO;IAC3D,IAAI,MAAM,QAAQ,CAAC,mDAAmD;QACpE,OAAO;IACT;IACA,IAAI,MAAM,QAAQ,CAAC,oBAAoB,OAAO;IAE9C,OAAO;AACT"}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///Users/wangqing/Documents/GitHub/R2-Admin-Go/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport { Manrope, Noto_Sans_SC } from \"next/font/google\";\nimport Modal from \"@/components/Modal\";\nimport { toChineseErrorMessage } from \"@/lib/error-zh\";\nimport loginHeroImage from \"../tu1.png\";\nimport { \n  Folder, Trash2, Upload, RefreshCw, \n  ChevronRight, Search,\n  Menu, Sun, Moon, Monitor, ChevronDown,\n  FileText, Image as ImageIcon, Music, Video, Edit2,\n  FileArchive, FileCode, FileSpreadsheet, FileType, FileJson,\n  LogOut, ShieldCheck, Eye, EyeOff,\n  Download, Link2, Copy, ArrowRightLeft, FolderOpen, X,\n  Pause, Play, CircleX,\n  Globe, BadgeInfo, Mail, BookOpen,\n  FolderPlus, UserCircle2,\n  HardDrive,\n} from \"lucide-react\";\n\nconst manrope = Manrope({\n  subsets: [\"latin\"],\n  weight: [\"500\", \"600\", \"700\", \"800\"],\n  variable: \"--font-manrope\",\n  display: \"swap\",\n});\n\nconst notoSansSC = Noto_Sans_SC({\n  subsets: [\"latin\"],\n  weight: [\"400\", \"500\", \"700\"],\n  variable: \"--font-noto-sc\",\n  display: \"swap\",\n});\n\ntype ThemeMode = \"system\" | \"light\" | \"dark\";\n\nconst THEME_STORE_KEY = \"r2_admin_theme_v1\";\n\ntype ToastKind = \"success\" | \"error\" | \"info\";\ntype ToastPayload = { kind: ToastKind; message: string; detail?: string };\ntype ToastState = ToastPayload | string | null;\n\nconst normalizeToast = (t: ToastState): ToastPayload | null => {\n  if (!t) return null;\n  if (typeof t === \"string\") {\n    const msg = t.trim();\n    const kind: ToastKind =\n      /失败|错误|异常/.test(msg) ? \"error\" : /成功|已/.test(msg) ? \"success\" : \"info\";\n    return { kind, message: msg };\n  }\n  return t;\n};\n\nconst useMediaQuery = (query: string) => {\n  const [matches, setMatches] = useState(false);\n  useEffect(() => {\n    const mql = window.matchMedia(query);\n    const onChange = () => setMatches(mql.matches);\n    onChange();\n    mql.addEventListener(\"change\", onChange);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, [query]);\n  return matches;\n};\n\nconst BrandMark = ({ className }: { className?: string }) => {\n  const [failed, setFailed] = useState(false);\n  if (!failed) {\n    return (\n      <img\n        src=\"/brand.png\"\n        alt=\"\"\n        aria-hidden=\"true\"\n        className={[\"block object-contain\", className].filter(Boolean).join(\" \")}\n        onError={() => setFailed(true)}\n        draggable={false}\n      />\n    );\n  }\n\n  return (\n    <div aria-hidden=\"true\" className={className} />\n  );\n};\n\nconst WifiMark = ({ className }: { className?: string }) => {\n  return (\n    <span\n      className={[\"inline-block bg-current\", className].filter(Boolean).join(\" \")}\n      aria-hidden=\"true\"\n      style={{\n        WebkitMaskImage: \"url(/Wi-Fi.svg)\",\n        maskImage: \"url(/Wi-Fi.svg)\",\n        WebkitMaskRepeat: \"no-repeat\",\n        maskRepeat: \"no-repeat\",\n        WebkitMaskPosition: \"center\",\n        maskPosition: \"center\",\n        WebkitMaskSize: \"contain\",\n        maskSize: \"contain\",\n      }}\n    />\n  );\n};\n\nconst BucketHintChip = ({\n  bucketName,\n  disabled,\n  onClick,\n  className,\n}: {\n  bucketName: string;\n  disabled?: boolean;\n  onClick?: () => void;\n  className?: string;\n}) => {\n  return (\n    <button\n      type=\"button\"\n      disabled={disabled}\n      onClick={onClick}\n      title={bucketName}\n      aria-label=\"查看当前存储桶\"\n      className={[\n        \"inline-flex items-center gap-2 px-1 py-1 rounded-md text-left\",\n        \"transition-colors hover:text-gray-700 dark:hover:text-gray-200\",\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900\",\n        \"disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:text-inherit\",\n        className,\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n    >\n      <HardDrive\n        className=\"w-5 h-5 text-gray-500 shrink-0 dark:text-gray-300\"\n        strokeWidth={1.75}\n      />\n      <div className=\"min-w-0\">\n        <div className=\"text-[10px] leading-tight text-gray-500 dark:text-gray-400\">当前桶</div>\n        <div className=\"mt-0.5 text-[11px] leading-tight font-normal text-blue-600 truncate max-w-[10.5rem] md:max-w-[16rem] dark:text-blue-300\">\n          {bucketName}\n        </div>\n      </div>\n    </button>\n  );\n};\n\n// --- 类型定义 ---\ntype Bucket = {\n  id: string;\n  Name: string;\n  CreationDate: string;\n  transferMode?: \"presigned\" | \"proxy\" | \"presigned_needs_bucket_name\";\n  bucketName?: string;\n  accountId?: string;\n  isDefault?: boolean;\n  publicBaseUrl?: string;\n  customBaseUrl?: string;\n};\ntype FileItem = {\n  name: string;\n  key: string;\n  type: \"folder\" | \"file\";\n  size?: number;\n  lastModified?: string;\n};\ntype AppSession = {\n  accessToken: string;\n  refreshToken: string;\n  userId?: string;\n  email?: string;\n};\ntype RecoverySession = {\n  accessToken: string;\n  refreshToken: string;\n};\ntype BucketUsage = {\n  bucket: string;\n  prefix: string;\n  objects: number;\n  bytes: number;\n  pagesScanned: number;\n  truncated: boolean;\n};\ntype LinkConfig = {\n  publicBaseUrl?: string;\n  customBaseUrl?: string;\n  s3BucketName?: string;\n};\ntype LinkConfigMap = Record<string, LinkConfig>;\ntype S3BucketNameCheck = {\n  bucketName: string;\n  ok: boolean;\n  hint?: string;\n  checkedAt: number;\n};\ntype S3BucketNameCheckMap = Record<string, S3BucketNameCheck>;\ntype TransferModeOverride = \"auto\" | \"presigned\" | \"proxy\";\ntype TransferModeOverrideMap = Record<string, TransferModeOverride>;\ntype BucketFormState = {\n  bucketLabel: string;\n  bucketName: string;\n  accountId: string;\n  accessKeyId: string;\n  secretAccessKey: string;\n  publicBaseUrl: string;\n  customBaseUrl: string;\n};\ntype BucketFormErrors = {\n  bucketName?: string;\n  accountId?: string;\n  accessKeyId?: string;\n  secretAccessKey?: string;\n};\ntype PreviewState =\n  | null\n  | {\n      name: string;\n      key: string;\n      bucket: string;\n      kind: \"image\" | \"video\" | \"audio\" | \"text\" | \"pdf\" | \"office\" | \"other\";\n      url: string;\n      text?: string;\n    };\ntype PreviewKind = NonNullable<PreviewState>[\"kind\"];\n\ntype UploadStatus = \"queued\" | \"uploading\" | \"paused\" | \"done\" | \"error\" | \"canceled\";\ntype MultipartUploadState = {\n  uploadId: string;\n  partSize: number;\n  parts: Record<string, string>; // partNumber -> etag\n};\ntype UploadTask = {\n  id: string;\n  bucket: string;\n  file: File;\n  key: string;\n  resumeKey?: string;\n  multipart?: MultipartUploadState;\n  startedAt?: number;\n  loaded: number;\n  speedBps: number;\n  status: UploadStatus;\n  error?: string;\n};\n\n// --- 辅助函数 ---\nconst toFiniteNumber = (value: unknown, fallback = 0) => {\n  const n = typeof value === \"number\" ? value : Number(value);\n  return Number.isFinite(n) ? n : fallback;\n};\n\nconst formatSize = (bytes?: number) => {\n  if (bytes === undefined) return \"-\";\n  if (!Number.isFinite(bytes) || bytes < 0) return \"-\";\n  if (bytes === 0) return \"0 B\";\n  const k = 1024;\n  const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n  const i = Math.min(sizes.length - 1, Math.max(0, Math.floor(Math.log(bytes) / Math.log(k))));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n};\n\nconst LOGIN_PAGE = {\n  title: \"R2 Admin Go\",\n  subtitle: \"无需部署的 Cloudflare R2 对象存储文件管理面板工具\",\n  advantages: [\n    \"极速的响应速度和上传下载速度\",\n    \"无服务器部署、不存储用户数据\",\n    \"支持大文件上传、预览、重命名、移动和批量操作等功能\",\n  ],\n  announcementTitle: \"公告\",\n  announcementText: `欢迎使用\n\n- 继续访问即代表您已阅读并同意「关于页面」相关条款。\n- 如有问题欢迎通过「电子邮件」与我反馈沟通。\n`,\n  footer: \"By Wang Qing\",\n};\n\nconst LOGIN_LINKS = [\n  { label: \"我的博客\", href: \"https://qinghub.top\", icon: \"globe\" as const },\n  { label: \"使用教程\", href: \"https://github.com/wangqing176176-a11y/qing-r2-cloudy\", icon: \"book\" as const },\n  { label: \"关于页面\", href: \"https://qinghub.top/about/\", icon: \"about\" as const },\n  { label: \"电子邮箱\", href: \"mailto:wangqing176176@gmail.com\", icon: \"mail\" as const },\n] as const;\n\ntype MultipartResumeRecord = {\n  bucket: string;\n  key: string;\n  size: number;\n  lastModified: number;\n  name: string;\n  uploadId: string;\n  partSize: number;\n  parts: Record<string, string>; // partNumber -> etag\n};\n\nconst RESUME_STORE_KEY = \"r2_multipart_resume_v1\";\nconst SESSION_STORE_KEY = \"r2_supabase_session_v1\";\nconst SESSION_STORE_KEY_EPHEMERAL = \"r2_supabase_session_tmp_v1\";\n\nconst getResumeKey = (bucket: string, key: string, file: File) =>\n  `${bucket}|${key}|${file.size}|${file.lastModified}`;\n\nconst loadResumeStore = (): Record<string, MultipartResumeRecord> => {\n  try {\n    const raw = localStorage.getItem(RESUME_STORE_KEY);\n    if (!raw) return {};\n    const parsed = JSON.parse(raw) as Record<string, MultipartResumeRecord>;\n    return parsed && typeof parsed === \"object\" ? parsed : {};\n  } catch {\n    return {};\n  }\n};\n\nconst saveResumeStore = (next: Record<string, MultipartResumeRecord>) => {\n  localStorage.setItem(RESUME_STORE_KEY, JSON.stringify(next));\n};\n\nconst loadResumeRecord = (resumeKey: string): MultipartResumeRecord | null => {\n  const store = loadResumeStore();\n  const rec = store[resumeKey];\n  return rec && typeof rec === \"object\" ? rec : null;\n};\n\nconst upsertResumeRecord = (resumeKey: string, rec: MultipartResumeRecord) => {\n  const store = loadResumeStore();\n  store[resumeKey] = rec;\n  saveResumeStore(store);\n};\n\nconst deleteResumeRecord = (resumeKey: string) => {\n  const store = loadResumeStore();\n  if (!(resumeKey in store)) return;\n  delete store[resumeKey];\n  saveResumeStore(store);\n};\n\nexport default function R2Admin() {\n  // --- 状态管理 ---\n  const [auth, setAuth] = useState<AppSession | null>(null);\n  const authRef = useRef<AppSession | null>(null);\n  const [buckets, setBuckets] = useState<Bucket[]>([]);\n  const [selectedBucket, setSelectedBucket] = useState<string | null>(null);\n  const [files, setFiles] = useState<FileItem[]>([]);\n  const [path, setPath] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState<\"checking\" | \"connected\" | \"unbound\" | \"error\">(\"checking\");\n  const [connectionDetail, setConnectionDetail] = useState<string | null>(null);\n  const [fileListError, setFileListError] = useState<string | null>(null);\n  const [authRequired, setAuthRequired] = useState(true);\n  const [bucketUsage, setBucketUsage] = useState<BucketUsage | null>(null);\n  const [bucketUsageError, setBucketUsageError] = useState<string | null>(null);\n  const [usageLoading, setUsageLoading] = useState(false);\n  const [selectedItem, setSelectedItem] = useState<FileItem | null>(null);\n  const [selectedKeys, setSelectedKeys] = useState<Set<string>>(new Set());\n  const [preview, setPreview] = useState<PreviewState>(null);\n  const [uploadPanelOpen, setUploadPanelOpen] = useState(false);\n  const [uploadTasks, setUploadTasks] = useState<UploadTask[]>([]);\n  const [uploadQueuePaused, setUploadQueuePaused] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState<FileItem[]>([]);\n  const [searchCursor, setSearchCursor] = useState<string | null>(null);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [linkConfigMap, setLinkConfigMap] = useState<LinkConfigMap>({});\n  const [s3BucketNameCheckMap, setS3BucketNameCheckMap] = useState<S3BucketNameCheckMap>({});\n  const [transferModeOverrideMap, setTransferModeOverrideMap] = useState<TransferModeOverrideMap>({});\n\n  const [toast, setToast] = useState<ToastState>(null);\n  const toastPayload = useMemo(() => normalizeToast(toast), [toast]);\n\n  const isMobile = useMediaQuery(\"(max-width: 767px)\");\n  const prefersDark = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const [mobileNavOpen, setMobileNavOpen] = useState(false);\n  const [mobileDetailOpen, setMobileDetailOpen] = useState(false);\n\n  const [loginAnnouncementOpen, setLoginAnnouncementOpen] = useState(false);\n\n  const bucketMenuRef = useRef<HTMLDivElement>(null);\n  const [bucketMenuOpen, setBucketMenuOpen] = useState(false);\n\n  const transferModeMenuRef = useRef<HTMLDivElement>(null);\n  const [transferModeMenuOpen, setTransferModeMenuOpen] = useState(false);\n\n  const [themeMode, setThemeMode] = useState<ThemeMode>(\"system\");\n  const [resolvedDark, setResolvedDark] = useState(false);\n\n  const [renameOpen, setRenameOpen] = useState(false);\n  const [renameValue, setRenameValue] = useState(\"\");\n\n  const [moveOpen, setMoveOpen] = useState(false);\n  const [moveMode, setMoveMode] = useState<\"move\" | \"copy\">(\"move\");\n  const [moveTarget, setMoveTarget] = useState(\"\");\n  const [moveSources, setMoveSources] = useState<string[]>([]);\n\n  const [mkdirOpen, setMkdirOpen] = useState(false);\n  const [mkdirName, setMkdirName] = useState(\"\");\n\n  const [linkOpen, setLinkOpen] = useState(false);\n  const [linkPublic, setLinkPublic] = useState(\"\");\n  const [linkCustom, setLinkCustom] = useState(\"\");\n  const [linkS3BucketName, setLinkS3BucketName] = useState(\"\");\n\n  const [deleteOpen, setDeleteOpen] = useState(false);\n  const [logoutOpen, setLogoutOpen] = useState(false);\n  const [bucketHintOpen, setBucketHintOpen] = useState(false);\n  const [registerOpen, setRegisterOpen] = useState(false);\n  const [addBucketOpen, setAddBucketOpen] = useState(false);\n  const [editingBucketId, setEditingBucketId] = useState<string | null>(null);\n  const [accountCenterOpen, setAccountCenterOpen] = useState(false);\n  const [changePasswordOpen, setChangePasswordOpen] = useState(false);\n  const [deleteAccountOpen, setDeleteAccountOpen] = useState(false);\n  const [bucketDeleteOpen, setBucketDeleteOpen] = useState(false);\n  const [bucketDeleteTargetId, setBucketDeleteTargetId] = useState<string | null>(null);\n\n  const uploadTasksRef = useRef<UploadTask[]>([]);\n  const uploadProcessingRef = useRef(false);\n  const uploadControllersRef = useRef<Map<string, AbortController>>(new Map());\n  const uploadQueuePausedRef = useRef(false);\n\n  useEffect(() => {\n    uploadTasksRef.current = uploadTasks;\n  }, [uploadTasks]);\n\n  useEffect(() => {\n    uploadQueuePausedRef.current = uploadQueuePaused;\n  }, [uploadQueuePaused]);\n\n  // 登录表单状态\n  const [formEmail, setFormEmail] = useState(\"\");\n  const [formPassword, setFormPassword] = useState(\"\");\n  const [registerEmail, setRegisterEmail] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [showRegisterSecret, setShowRegisterSecret] = useState(false);\n  const [registerAgree, setRegisterAgree] = useState(false);\n  const [registerNotice, setRegisterNotice] = useState(\"\");\n  const [loginNotice, setLoginNotice] = useState(\"\");\n  const [forgotOpen, setForgotOpen] = useState(false);\n  const [forgotEmail, setForgotEmail] = useState(\"\");\n  const [resetPasswordOpen, setResetPasswordOpen] = useState(false);\n  const [resetPasswordValue, setResetPasswordValue] = useState(\"\");\n  const [resetPasswordConfirmValue, setResetPasswordConfirmValue] = useState(\"\");\n  const [recoverySession, setRecoverySession] = useState<RecoverySession | null>(null);\n  const [changePasswordValue, setChangePasswordValue] = useState(\"\");\n  const [changePasswordConfirmValue, setChangePasswordConfirmValue] = useState(\"\");\n  const [deleteAccountConfirmText, setDeleteAccountConfirmText] = useState(\"\");\n  const [showAccountUserId, setShowAccountUserId] = useState(false);\n  const [rememberMe, setRememberMe] = useState(false);\n  const [showSecret, setShowSecret] = useState(false);\n\n  const [bucketForm, setBucketForm] = useState<BucketFormState>({\n    bucketLabel: \"\",\n    bucketName: \"\",\n    accountId: \"\",\n    accessKeyId: \"\",\n    secretAccessKey: \"\",\n    publicBaseUrl: \"\",\n    customBaseUrl: \"\",\n  });\n  const [bucketFormErrors, setBucketFormErrors] = useState<BucketFormErrors>({});\n\n  const supabaseUrl = String(process.env.NEXT_PUBLIC_SUPABASE_URL ?? \"\").replace(/\\/$/, \"\");\n  const supabaseAnonKey = String(\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ?? process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY ?? \"\",\n  ).trim();\n\n  const parseStoredSession = (raw: string | null): AppSession | null => {\n    if (!raw) return null;\n    try {\n      const parsed = JSON.parse(raw) as AppSession;\n      const accessToken = String(parsed?.accessToken ?? \"\").trim();\n      const refreshToken = String(parsed?.refreshToken ?? \"\").trim();\n      if (!accessToken || !refreshToken) return null;\n      return {\n        accessToken,\n        refreshToken,\n        userId: parsed.userId ? String(parsed.userId) : undefined,\n        email: parsed.email ? String(parsed.email) : undefined,\n      };\n    } catch {\n      return null;\n    }\n  };\n\n  const persistSession = (session: AppSession | null, persistent: boolean) => {\n    if (!session) {\n      localStorage.removeItem(SESSION_STORE_KEY);\n      sessionStorage.removeItem(SESSION_STORE_KEY_EPHEMERAL);\n      return;\n    }\n    if (persistent) {\n      localStorage.setItem(SESSION_STORE_KEY, JSON.stringify(session));\n      sessionStorage.removeItem(SESSION_STORE_KEY_EPHEMERAL);\n      return;\n    }\n    sessionStorage.setItem(SESSION_STORE_KEY_EPHEMERAL, JSON.stringify(session));\n    localStorage.removeItem(SESSION_STORE_KEY);\n  };\n\n  const activateRecoverySession = (accessToken: string, refreshToken?: string) => {\n    const nextAccessToken = String(accessToken ?? \"\").trim();\n    const nextRefreshToken = String(refreshToken ?? \"\").trim();\n    if (!nextAccessToken) return false;\n\n    persistSession(null, false);\n    setAuth(null);\n    setAuthRequired(true);\n    setConnectionStatus(\"error\");\n    setConnectionDetail(\"请设置新密码后再登录\");\n    setRecoverySession({ accessToken: nextAccessToken, refreshToken: nextRefreshToken });\n    setResetPasswordValue(\"\");\n    setResetPasswordConfirmValue(\"\");\n    setResetPasswordOpen(true);\n    setRegisterOpen(false);\n    return true;\n  };\n\n  const verifyRecoverySessionWithSupabase = async (tokenHash: string, token?: string, email?: string) => {\n    if (!supabaseUrl || !supabaseAnonKey) throw new Error(\"Supabase 前端环境变量未配置\");\n\n    const tryVerify = async (payload: Record<string, unknown>) => {\n      const res = await fetch(`${supabaseUrl}/auth/v1/verify`, {\n        method: \"POST\",\n        headers: {\n          apikey: supabaseAnonKey,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n      const data = await readJsonSafe(res);\n      const accessToken = String((data as { access_token?: unknown }).access_token ?? \"\").trim();\n      const refreshToken = String((data as { refresh_token?: unknown }).refresh_token ?? \"\").trim();\n      if (!res.ok || !accessToken) {\n        const message = String(\n          (data as { msg?: unknown; error_description?: unknown; error?: unknown }).msg ??\n            (data as { error_description?: unknown }).error_description ??\n            (data as { error?: unknown }).error ??\n            \"重置链接无效或已过期\",\n        );\n        throw new Error(message);\n      }\n      return { accessToken, refreshToken };\n    };\n\n    if (tokenHash) {\n      return await tryVerify({ type: \"recovery\", token_hash: tokenHash });\n    }\n    if (token && email) {\n      return await tryVerify({ type: \"recovery\", token, email });\n    }\n    throw new Error(\"重置链接无效或已过期\");\n  };\n\n  const refreshAccessToken = async (current: AppSession): Promise<AppSession | null> => {\n    if (!supabaseUrl || !supabaseAnonKey || !current.refreshToken) return null;\n    const res = await fetch(`${supabaseUrl}/auth/v1/token?grant_type=refresh_token`, {\n      method: \"POST\",\n      headers: {\n        apikey: supabaseAnonKey,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        refresh_token: current.refreshToken,\n      }),\n    });\n    const data = await readJsonSafe(res);\n    if (!res.ok || !(data as { access_token?: unknown }).access_token || !(data as { refresh_token?: unknown }).refresh_token) {\n      return null;\n    }\n    const next: AppSession = {\n      accessToken: String((data as { access_token: string }).access_token),\n      refreshToken: String((data as { refresh_token: string }).refresh_token),\n      userId: String(((data as { user?: { id?: string } }).user?.id ?? current.userId) || \"\"),\n      email: String(((data as { user?: { email?: string } }).user?.email ?? current.email) || \"\"),\n    };\n    const isPersistent = !!localStorage.getItem(SESSION_STORE_KEY);\n    persistSession(next, isPersistent);\n    setAuth(next);\n    return next;\n  };\n\n  useEffect(() => {\n    authRef.current = auth;\n  }, [auth]);\n\n  // --- 初始化 ---\n  useEffect(() => {\n    const persisted = parseStoredSession(localStorage.getItem(SESSION_STORE_KEY));\n    const ephemeral = parseStoredSession(sessionStorage.getItem(SESSION_STORE_KEY_EPHEMERAL));\n    const next = persisted ?? ephemeral;\n    if (next) {\n      setAuth(next);\n      if (next.email) setFormEmail(next.email);\n      setRememberMe(Boolean(persisted));\n    } else {\n      setAuthRequired(true);\n      setConnectionStatus(\"error\");\n      setConnectionDetail(\"请登录后继续使用\");\n    }\n\n    const storedLinks = localStorage.getItem(\"r2_link_config_v1\");\n    if (storedLinks) {\n      try {\n        setLinkConfigMap(JSON.parse(storedLinks));\n      } catch {\n        localStorage.removeItem(\"r2_link_config_v1\");\n      }\n    }\n\n    const storedChecks = localStorage.getItem(\"r2_s3_bucket_check_v1\");\n    if (storedChecks) {\n      try {\n        setS3BucketNameCheckMap(JSON.parse(storedChecks));\n      } catch {\n        localStorage.removeItem(\"r2_s3_bucket_check_v1\");\n      }\n    }\n\n    const storedModeOverrides = localStorage.getItem(\"r2_transfer_mode_override_v1\");\n    if (storedModeOverrides) {\n      try {\n        setTransferModeOverrideMap(JSON.parse(storedModeOverrides));\n      } catch {\n        localStorage.removeItem(\"r2_transfer_mode_override_v1\");\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    let cancelled = false;\n\n    const cleanUrlSearchAuthParams = () => {\n      const url = new URL(window.location.href);\n      [\n        \"type\",\n        \"access_token\",\n        \"refresh_token\",\n        \"token_hash\",\n        \"token\",\n        \"email\",\n        \"expires_in\",\n        \"expires_at\",\n        \"error\",\n        \"error_code\",\n        \"error_description\",\n        \"code\",\n      ].forEach((k) => url.searchParams.delete(k));\n      const cleanUrl = `${url.pathname}${url.searchParams.toString() ? `?${url.searchParams.toString()}` : \"\"}`;\n      window.history.replaceState({}, document.title, cleanUrl);\n    };\n\n    const run = async () => {\n      const hash = window.location.hash.replace(/^#/, \"\");\n      if (hash) {\n        const hashParams = new URLSearchParams(hash);\n        const type = String(hashParams.get(\"type\") ?? \"\");\n        const accessToken = String(hashParams.get(\"access_token\") ?? \"\").trim();\n        const refreshToken = String(hashParams.get(\"refresh_token\") ?? \"\").trim();\n        if (type === \"recovery\" && accessToken) {\n          if (!cancelled && activateRecoverySession(accessToken, refreshToken)) {\n            setToast(\"检测到密码重置请求，请设置新密码\");\n          }\n          const cleanHashUrl = `${window.location.pathname}${window.location.search}`;\n          window.history.replaceState({}, document.title, cleanHashUrl);\n          return;\n        }\n      }\n\n      const query = new URLSearchParams(window.location.search);\n      const type = String(query.get(\"type\") ?? \"\").trim();\n      if (type !== \"recovery\") return;\n\n      const accessToken = String(query.get(\"access_token\") ?? \"\").trim();\n      const refreshToken = String(query.get(\"refresh_token\") ?? \"\").trim();\n      if (accessToken) {\n        if (!cancelled && activateRecoverySession(accessToken, refreshToken)) {\n          setToast(\"检测到密码重置请求，请设置新密码\");\n        }\n        cleanUrlSearchAuthParams();\n        return;\n      }\n\n      const tokenHash = String(query.get(\"token_hash\") ?? \"\").trim();\n      const token = String(query.get(\"token\") ?? \"\").trim();\n      const email = String(query.get(\"email\") ?? \"\").trim();\n      try {\n        const verified = await verifyRecoverySessionWithSupabase(tokenHash, token, email);\n        if (!cancelled && activateRecoverySession(verified.accessToken, verified.refreshToken)) {\n          setToast(\"检测到密码重置请求，请设置新密码\");\n        }\n      } catch (error) {\n        if (!cancelled) {\n          const message = toChineseErrorMessage(error, \"重置链接无效或已过期，请重新发起忘记密码\");\n          setToast(message || \"重置链接无效或已过期，请重新发起忘记密码\");\n        }\n      } finally {\n        cleanUrlSearchAuthParams();\n      }\n    };\n\n    void run();\n    return () => {\n      cancelled = true;\n    };\n  }, [supabaseAnonKey, supabaseUrl]);\n\n  useEffect(() => {\n    const t = toastPayload;\n    if (!t) return;\n    const ms = t.kind === \"error\" ? 4500 : 3200;\n    const timer = setTimeout(() => setToast(null), ms);\n    return () => clearTimeout(timer);\n  }, [toastPayload]);\n\n  const ToastView = toastPayload ? (\n    <div className=\"fixed top-5 left-1/2 -translate-x-1/2 z-50 max-w-[92vw]\">\n      <div\n        className={`inline-flex items-center gap-2 px-4 py-2 rounded-full border shadow-lg text-sm font-medium ${\n          toastPayload.kind === \"success\"\n            ? \"bg-green-50 border-green-200 text-green-700 dark:bg-green-950/40 dark:border-green-900 dark:text-green-200\"\n            : toastPayload.kind === \"error\"\n              ? \"bg-red-50 border-red-200 text-red-700 dark:bg-red-950/40 dark:border-red-900 dark:text-red-200\"\n              : \"bg-gray-900 text-white border-gray-900 dark:bg-gray-900 dark:border-gray-800\"\n        }`}\n        role=\"status\"\n        aria-live=\"polite\"\n      >\n        <span className=\"shrink-0 flex items-center justify-center\">\n          {toastPayload.kind === \"success\" ? (\n            <ShieldCheck className=\"w-5 h-5\" />\n          ) : toastPayload.kind === \"error\" ? (\n            <CircleX className=\"w-5 h-5\" />\n          ) : (\n            <BadgeInfo className=\"w-5 h-5\" />\n          )}\n        </span>\n        <span className=\"leading-none\">{toastPayload.message}</span>\n      </div>\n    </div>\n  ) : null;\n\n  useEffect(() => {\n    if (!authRequired) return;\n    setLoginAnnouncementOpen(!isMobile);\n  }, [authRequired, isMobile]);\n\n  useEffect(() => {\n    if (!bucketMenuOpen) return;\n    const onDown = (e: Event) => {\n      const target = e.target as Node | null;\n      if (!target) return;\n      if (bucketMenuRef.current && bucketMenuRef.current.contains(target)) return;\n      setBucketMenuOpen(false);\n    };\n    document.addEventListener(\"mousedown\", onDown);\n    document.addEventListener(\"touchstart\", onDown, { passive: true });\n    return () => {\n      document.removeEventListener(\"mousedown\", onDown);\n      document.removeEventListener(\"touchstart\", onDown);\n    };\n  }, [bucketMenuOpen]);\n\n  useEffect(() => {\n    if (!transferModeMenuOpen) return;\n    const onDown = (e: Event) => {\n      const target = e.target as Node | null;\n      if (!target) return;\n      if (transferModeMenuRef.current && transferModeMenuRef.current.contains(target)) return;\n      setTransferModeMenuOpen(false);\n    };\n    document.addEventListener(\"mousedown\", onDown);\n    document.addEventListener(\"touchstart\", onDown, { passive: true });\n    return () => {\n      document.removeEventListener(\"mousedown\", onDown);\n      document.removeEventListener(\"touchstart\", onDown);\n    };\n  }, [transferModeMenuOpen]);\n\n  useEffect(() => {\n    setTransferModeMenuOpen(false);\n  }, [selectedBucket]);\n\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(THEME_STORE_KEY);\n      if (stored === \"light\" || stored === \"dark\" || stored === \"system\") setThemeMode(stored);\n    } catch {\n      // ignore\n    }\n  }, []);\n\n  useEffect(() => {\n    const isDark = themeMode === \"dark\" || (themeMode === \"system\" && prefersDark);\n    setResolvedDark(isDark);\n    document.documentElement.classList.toggle(\"dark\", isDark);\n    try {\n      const themeMeta = document.querySelector('meta[name=\"theme-color\"]');\n      if (themeMeta) themeMeta.setAttribute(\"content\", isDark ? \"#111827\" : \"#f9fafb\");\n    } catch {\n      // ignore\n    }\n    try {\n      localStorage.setItem(THEME_STORE_KEY, themeMode);\n    } catch {\n      // ignore\n    }\n  }, [prefersDark, themeMode]);\n\n  useEffect(() => {\n    if (!isMobile) {\n      setMobileNavOpen(false);\n      setMobileDetailOpen(false);\n    }\n  }, [isMobile]);\n\n  // 移动端详情弹窗只由“操作”按钮触发，不跟随选中项自动弹出。\n\n  useEffect(() => {\n    if (!auth) {\n      setAuthRequired(true);\n      setBuckets([]);\n      setSelectedBucket(null);\n      setFiles([]);\n      setFileListError(null);\n      setPath([]);\n      setBucketUsage(null);\n      setBucketUsageError(null);\n      setAccountCenterOpen(false);\n      setChangePasswordOpen(false);\n      setDeleteAccountOpen(false);\n      setShowAccountUserId(false);\n      setForgotOpen(false);\n      setRegisterNotice(\"\");\n      setShowRegisterSecret(false);\n      setConnectionStatus(\"error\");\n      setConnectionDetail(\"请登录后继续使用\");\n      return;\n    }\n    fetchBuckets();\n  }, [auth]);\n\n  const readJsonSafe = async (res: Response) => {\n    try {\n      return await res.clone().json();\n    } catch {\n      const text = await res\n        .clone()\n        .text()\n        .catch(() => \"\");\n      return text ? { error: text } : {};\n    }\n  };\n\n  // --- 核心：带鉴权的 Fetch ---\n  const fetchWithAuth = async (url: string, options: RequestInit = {}, tryRefresh = true): Promise<Response> => {\n    const headers: Record<string, string> = {\n      ...(options.headers as Record<string, string> | undefined),\n    };\n    if (!headers[\"content-type\"] && typeof options.body === \"string\") headers[\"content-type\"] = \"application/json\";\n    const current = authRef.current;\n    if (current?.accessToken) headers.Authorization = `Bearer ${current.accessToken}`;\n\n    const res = await fetch(url, { ...options, headers });\n    if (res.status !== 401 || !tryRefresh || !current?.refreshToken) return res;\n\n    const next = await refreshAccessToken(current);\n    if (!next?.accessToken) return res;\n    return await fetchWithAuth(url, options, false);\n  };\n\n  const signInWithSupabase = async (email: string, password: string) => {\n    if (!supabaseUrl || !supabaseAnonKey) throw new Error(\"Supabase 前端环境变量未配置\");\n    const res = await fetch(`${supabaseUrl}/auth/v1/token?grant_type=password`, {\n      method: \"POST\",\n      headers: {\n        apikey: supabaseAnonKey,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    });\n    const data = await readJsonSafe(res);\n    if (!res.ok || !(data as { access_token?: unknown }).access_token || !(data as { refresh_token?: unknown }).refresh_token) {\n      const message = String(\n        (data as { msg?: unknown; error_description?: unknown; error?: unknown }).msg ??\n          (data as { error_description?: unknown }).error_description ??\n          (data as { error?: unknown }).error ??\n          \"登录失败\",\n      );\n      throw new Error(toChineseErrorMessage(message, \"登录失败，请重试。\"));\n    }\n    const session: AppSession = {\n      accessToken: String((data as { access_token: string }).access_token),\n      refreshToken: String((data as { refresh_token: string }).refresh_token),\n      userId: String(((data as { user?: { id?: string } }).user?.id ?? \"\") || \"\"),\n      email: String(((data as { user?: { email?: string } }).user?.email ?? email) || email),\n    };\n    return session;\n  };\n\n  const signUpWithSupabase = async (email: string, password: string) => {\n    if (!supabaseUrl || !supabaseAnonKey) throw new Error(\"Supabase 前端环境变量未配置\");\n    const res = await fetch(`${supabaseUrl}/auth/v1/signup`, {\n      method: \"POST\",\n      headers: {\n        apikey: supabaseAnonKey,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email,\n        password,\n      }),\n    });\n    const data = await readJsonSafe(res);\n    if (!res.ok) {\n      throw new Error(\n        toChineseErrorMessage(\n          String(\n          (data as { msg?: unknown; error_description?: unknown; error?: unknown }).msg ??\n            (data as { error_description?: unknown }).error_description ??\n            (data as { error?: unknown }).error ??\n            \"注册失败\",\n          ),\n          \"注册失败，请重试。\",\n        ),\n      );\n    }\n  };\n\n  const sendRecoveryEmailWithSupabase = async (email: string) => {\n    if (!supabaseUrl || !supabaseAnonKey) throw new Error(\"Supabase 前端环境变量未配置\");\n    const redirectTo =\n      typeof window !== \"undefined\" ? `${window.location.origin}${window.location.pathname}` : undefined;\n    const res = await fetch(`${supabaseUrl}/auth/v1/recover`, {\n      method: \"POST\",\n      headers: {\n        apikey: supabaseAnonKey,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email,\n        options: redirectTo ? { redirectTo } : undefined,\n      }),\n    });\n    const data = await readJsonSafe(res);\n    if (!res.ok) {\n      throw new Error(\n        toChineseErrorMessage(\n          String(\n          (data as { msg?: unknown; error_description?: unknown; error?: unknown }).msg ??\n            (data as { error_description?: unknown }).error_description ??\n            (data as { error?: unknown }).error ??\n            \"发送重置邮件失败\",\n          ),\n          \"发送重置邮件失败，请重试。\",\n        ),\n      );\n    }\n  };\n\n  const resetPasswordWithRecoveryToken = async (accessToken: string, password: string) => {\n    if (!supabaseUrl || !supabaseAnonKey) throw new Error(\"Supabase 前端环境变量未配置\");\n    const res = await fetch(`${supabaseUrl}/auth/v1/user`, {\n      method: \"PUT\",\n      headers: {\n        apikey: supabaseAnonKey,\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ password }),\n    });\n    const data = await readJsonSafe(res);\n    if (!res.ok) {\n      throw new Error(\n        toChineseErrorMessage(\n          String(\n          (data as { msg?: unknown; error_description?: unknown; error?: unknown }).msg ??\n            (data as { error_description?: unknown }).error_description ??\n            (data as { error?: unknown }).error ??\n            \"重置密码失败\",\n          ),\n          \"重置密码失败，请重试。\",\n        ),\n      );\n    }\n  };\n\n  // --- 登录逻辑 ---\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoginNotice(\"\");\n    const email = formEmail.trim();\n    const password = formPassword.trim();\n    if (!email || !password) {\n      setLoginNotice(\"请输入邮箱和密码\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const session = await signInWithSupabase(email, password);\n      setAuth(session);\n      persistSession(session, rememberMe);\n      setAuthRequired(false);\n      setConnectionStatus(\"checking\");\n      setConnectionDetail(null);\n      setLoginNotice(\"\");\n      setToast(\"登录成功\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"登录失败，请重试。\");\n      setLoginNotice(message || \"登录失败，请重试。\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRegister = async (e?: React.FormEvent) => {\n    e?.preventDefault();\n    setRegisterNotice(\"\");\n    const email = registerEmail.trim();\n    const password = registerPassword.trim();\n    if (!email || !password) {\n      setToast(\"请填写完整注册信息\");\n      return;\n    }\n    if (password.length < 6) {\n      setToast(\"密码至少 6 位\");\n      return;\n    }\n    if (!registerAgree) {\n      setToast(\"请先勾选同意用户协议和隐私政策\");\n      return;\n    }\n    try {\n      setLoading(true);\n      await signUpWithSupabase(email, password);\n      setRegisterPassword(\"\");\n      setRegisterAgree(false);\n      setFormEmail(email);\n      setRegisterNotice(\"注册成功，请前往邮箱完成验证后再登录。\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"注册失败，请重试。\");\n      setToast(message || \"注册失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSendResetEmail = async () => {\n    const email = forgotEmail.trim();\n    if (!email) {\n      setToast(\"请输入注册邮箱\");\n      return;\n    }\n    try {\n      setLoading(true);\n      await sendRecoveryEmailWithSupabase(email);\n      setForgotOpen(false);\n      setFormEmail(email);\n      setToast(\"重置邮件已发送，请前往邮箱继续\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"发送重置邮件失败，请重试。\");\n      setToast(message || \"发送重置邮件失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleResetPasswordFromRecovery = async () => {\n    const password = resetPasswordValue.trim();\n    const confirm = resetPasswordConfirmValue.trim();\n    if (!recoverySession?.accessToken) {\n      setToast(\"重置会话已失效，请重新发起忘记密码\");\n      return;\n    }\n    if (!password || !confirm) {\n      setToast(\"请填写完整的新密码\");\n      return;\n    }\n    if (password.length < 6) {\n      setToast(\"新密码至少 6 位\");\n      return;\n    }\n    if (password !== confirm) {\n      setToast(\"两次输入的新密码不一致\");\n      return;\n    }\n    try {\n      setLoading(true);\n      await resetPasswordWithRecoveryToken(recoverySession.accessToken, password);\n      setResetPasswordOpen(false);\n      setResetPasswordValue(\"\");\n      setResetPasswordConfirmValue(\"\");\n      setRecoverySession(null);\n      setFormPassword(\"\");\n      setToast(\"密码重置成功，请使用新密码登录\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"重置密码失败，请重试。\");\n      setToast(message || \"重置密码失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChangePassword = async () => {\n    const password = changePasswordValue.trim();\n    const confirm = changePasswordConfirmValue.trim();\n    if (!password || !confirm) {\n      setToast(\"请填写完整的新密码信息\");\n      return;\n    }\n    if (password.length < 6) {\n      setToast(\"新密码至少 6 位\");\n      return;\n    }\n    if (password !== confirm) {\n      setToast(\"两次输入的新密码不一致\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await fetchWithAuth(\"/api/account\", {\n        method: \"PATCH\",\n        body: JSON.stringify({ password }),\n      });\n      const data = await readJsonSafe(res);\n      if (!res.ok) {\n        throw new Error(String((data as { error?: unknown }).error ?? \"修改密码失败\"));\n      }\n      setChangePasswordOpen(false);\n      setChangePasswordValue(\"\");\n      setChangePasswordConfirmValue(\"\");\n      handleLogout();\n      setToast(\"密码修改成功，已退出登录，请使用新密码重新登录\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"修改密码失败，请重试。\");\n      setToast(message || \"修改密码失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteAccount = async () => {\n    if (deleteAccountConfirmText.trim() !== \"注销\") {\n      setToast(\"请输入“注销”确认此操作\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await fetchWithAuth(\"/api/account\", { method: \"DELETE\" });\n      const data = await readJsonSafe(res);\n      if (!res.ok) {\n        throw new Error(String((data as { error?: unknown }).error ?? \"注销账号失败\"));\n      }\n      setDeleteAccountOpen(false);\n      setDeleteAccountConfirmText(\"\");\n      handleLogout();\n      setToast(\"账号已注销\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"注销账号失败，请重试。\");\n      setToast(message || \"注销账号失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetBucketForm = () =>\n    setBucketForm({\n      bucketLabel: \"\",\n      bucketName: \"\",\n      accountId: \"\",\n      accessKeyId: \"\",\n      secretAccessKey: \"\",\n      publicBaseUrl: \"\",\n      customBaseUrl: \"\",\n    });\n\n  const handleSaveBucket = async () => {\n    const isEditing = Boolean(editingBucketId);\n    const payload = {\n      bucketLabel: bucketForm.bucketLabel.trim(),\n      bucketName: bucketForm.bucketName.trim(),\n      accountId: bucketForm.accountId.trim(),\n      accessKeyId: bucketForm.accessKeyId.trim(),\n      secretAccessKey: bucketForm.secretAccessKey.trim(),\n      publicBaseUrl: bucketForm.publicBaseUrl.trim(),\n      customBaseUrl: bucketForm.customBaseUrl.trim(),\n      isDefault: !isEditing && buckets.length === 0,\n    };\n    const nextErrors: BucketFormErrors = {};\n    if (!payload.bucketName) nextErrors.bucketName = \"此项必填\";\n    if (!payload.accountId) nextErrors.accountId = \"此项必填\";\n    if (!isEditing && !payload.accessKeyId) nextErrors.accessKeyId = \"此项必填\";\n    if (!isEditing && !payload.secretAccessKey) nextErrors.secretAccessKey = \"此项必填\";\n    if (Object.keys(nextErrors).length > 0) {\n      setBucketFormErrors(nextErrors);\n      return;\n    }\n    setBucketFormErrors({});\n    try {\n      setLoading(true);\n      const res = isEditing\n        ? await fetchWithAuth(\"/api/buckets\", {\n            method: \"PATCH\",\n            body: JSON.stringify({\n              id: editingBucketId,\n              bucketLabel: payload.bucketLabel,\n              bucketName: payload.bucketName,\n              accountId: payload.accountId,\n              accessKeyId: payload.accessKeyId || undefined,\n              secretAccessKey: payload.secretAccessKey || undefined,\n              publicBaseUrl: payload.publicBaseUrl,\n              customBaseUrl: payload.customBaseUrl,\n            }),\n          })\n        : await fetchWithAuth(\"/api/buckets\", {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n          });\n      const data = await readJsonSafe(res);\n      if (!res.ok) throw new Error(String((data as { error?: unknown }).error ?? (isEditing ? \"更新失败\" : \"创建失败\")));\n      const created = (data as { bucket?: Bucket }).bucket;\n      setAddBucketOpen(false);\n      setEditingBucketId(null);\n      setBucketFormErrors({});\n      resetBucketForm();\n      await fetchBuckets();\n      let createToast = isEditing ? \"存储桶已更新\" : \"存储桶已添加\";\n      if (created?.id || selectedBucket) {\n        const bucketIdToUse = created?.id ?? selectedBucket;\n        if (!bucketIdToUse) return;\n        setPath([]);\n        setSearchTerm(\"\");\n        setSelectedItem(null);\n        setSelectedKeys(new Set());\n        setSelectedBucket(bucketIdToUse);\n\n        try {\n          const checkRes = await fetchWithAuth(\n            `/api/bucket-check?bucketId=${encodeURIComponent(bucketIdToUse)}&bucketName=${encodeURIComponent(payload.bucketName)}`,\n          );\n          const checkData = await readJsonSafe(checkRes);\n          const ok = Boolean((checkData as { ok?: unknown }).ok);\n          const hint = String((checkData as { hint?: unknown }).hint ?? \"\").trim();\n          upsertS3BucketNameCheck(bucketIdToUse, {\n            bucketName: payload.bucketName,\n            ok,\n            hint: hint || undefined,\n            checkedAt: Date.now(),\n          });\n          if (!ok && hint) {\n            createToast = `存储桶已保存，但连通性校验失败：${hint}`;\n          }\n        } catch {\n          // ignore check errors; file list loading will show details if it fails.\n        }\n      }\n      setToast(createToast);\n    } catch (error) {\n      const message = toChineseErrorMessage(error, isEditing ? \"更新存储桶失败，请重试。\" : \"添加存储桶失败，请重试。\");\n      setToast(message || (isEditing ? \"更新存储桶失败\" : \"添加存储桶失败\"));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteBucket = async (bucketId: string) => {\n    if (!bucketId) return;\n    try {\n      setLoading(true);\n      const res = await fetchWithAuth(`/api/buckets?id=${encodeURIComponent(bucketId)}`, { method: \"DELETE\" });\n      const data = await readJsonSafe(res);\n      if (!res.ok) throw new Error(String((data as { error?: unknown }).error ?? \"删除失败\"));\n      setBucketDeleteOpen(false);\n      setBucketDeleteTargetId(null);\n      await fetchBuckets();\n      setToast(\"存储桶已删除\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"删除存储桶失败，请重试。\");\n      setToast(message || \"删除存储桶失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    persistSession(null, false);\n    setAuth(null);\n    setBuckets([]);\n    setSelectedBucket(null);\n    setFileListError(null);\n    setBucketUsage(null);\n    setBucketUsageError(null);\n    setSelectedItem(null);\n    setSelectedKeys(new Set());\n    setPreview(null);\n    setUploadTasks([]);\n    setUploadPanelOpen(false);\n    setUploadQueuePaused(false);\n    setRenameOpen(false);\n    setMoveOpen(false);\n    setLinkOpen(false);\n    setAccountCenterOpen(false);\n    setChangePasswordOpen(false);\n    setDeleteAccountOpen(false);\n    setShowAccountUserId(false);\n    setDeleteOpen(false);\n    setBucketDeleteTargetId(null);\n    setBucketDeleteOpen(false);\n    setChangePasswordValue(\"\");\n    setChangePasswordConfirmValue(\"\");\n    setDeleteAccountConfirmText(\"\");\n    setForgotOpen(false);\n    setForgotEmail(\"\");\n    setResetPasswordOpen(false);\n    setResetPasswordValue(\"\");\n    setResetPasswordConfirmValue(\"\");\n    setRecoverySession(null);\n    setRegisterNotice(\"\");\n    setShowRegisterSecret(false);\n    setAuthRequired(true);\n    setConnectionStatus(\"error\");\n    setConnectionDetail(\"已退出登录，请重新输入邮箱和密码\");\n    setFormEmail(\"\");\n    setFormPassword(\"\");\n    setRememberMe(false);\n    setLoading(false);\n    setToast(\"退出登录成功\");\n  };\n\n  // --- API 调用 ---\n  const fetchBuckets = async () => {\n    if (!authRef.current) {\n      setAuthRequired(true);\n      return;\n    }\n    setConnectionStatus(\"checking\");\n    setConnectionDetail(null);\n    try {\n      const res = await fetchWithAuth(\"/api/buckets\");\n      const data = await res.json().catch(() => ({}));\n\n      if (res.status === 401) {\n        persistSession(null, false);\n        setAuth(null);\n        setAuthRequired(true);\n        setConnectionStatus(\"error\");\n        setConnectionDetail(\"登录已失效，请重新登录\");\n        return;\n      }\n\n      if (res.ok && data.buckets) {\n        const incoming = (data.buckets as Bucket[]) ?? [];\n        setAuthRequired(false);\n        setBuckets(incoming);\n\n        setLinkConfigMap((prev) => {\n          const next = { ...prev };\n          for (const b of incoming) {\n            next[b.id] = {\n              publicBaseUrl: b.publicBaseUrl ?? next[b.id]?.publicBaseUrl,\n              customBaseUrl: b.customBaseUrl ?? next[b.id]?.customBaseUrl,\n              s3BucketName: b.bucketName ?? next[b.id]?.s3BucketName,\n            };\n          }\n          localStorage.setItem(\"r2_link_config_v1\", JSON.stringify(next));\n          return next;\n        });\n\n        if (incoming.length === 0) {\n          setSelectedBucket(null);\n          setFiles([]);\n          setFileListError(null);\n          setBucketUsage(null);\n          setBucketUsageError(null);\n          setPath([]);\n          setConnectionStatus(\"unbound\");\n          setConnectionDetail(\"未配置存储桶：请先新增一个存储桶\");\n        } else {\n          setConnectionStatus(\"connected\");\n          if (!selectedBucket || !incoming.some((b) => b.id === selectedBucket)) {\n            const preferred = incoming.find((b) => b.isDefault)?.id ?? incoming[0].id;\n            setSelectedBucket(preferred);\n          }\n        }\n      } else {\n        setConnectionStatus(\"error\");\n        if (data.error) {\n          const message = toChineseErrorMessage(String(data.error), \"连接失败，请稍后重试。\");\n          setConnectionDetail(message);\n          setToast(`连接失败: ${message}`);\n        }\n      }\n    } catch (e) {\n      setConnectionStatus(\"error\");\n      setConnectionDetail(\"网络或运行时异常\");\n      console.error(e);\n    }\n  };\n\n  const fetchFiles = async (bucketId: string, currentPath: string[]) => {\n    if (!bucketId) return;\n    setLoading(true);\n    setFileListError(null);\n    const prefix = currentPath.length > 0 ? currentPath.join(\"/\") + \"/\" : \"\";\n    try {\n      const res = await fetchWithAuth(`/api/files?bucket=${encodeURIComponent(bucketId)}&prefix=${encodeURIComponent(prefix)}`);\n      const data = await readJsonSafe(res);\n      if (!res.ok) {\n        setFiles([]);\n        const message = toChineseErrorMessage((data as { error?: unknown }).error, \"读取文件列表失败\");\n        setFileListError(message);\n        setConnectionStatus(\"error\");\n        setConnectionDetail(null);\n        setBucketUsageError(null);\n        return;\n      }\n      setFiles(Array.isArray((data as { items?: unknown }).items) ? (((data as { items?: FileItem[] }).items ?? []) as FileItem[]) : []);\n      setFileListError(null);\n      setConnectionStatus(\"connected\");\n      setConnectionDetail(null);\n    } catch (e) {\n      setFiles([]);\n      const message = \"读取文件列表失败，请检查桶配置或网络\";\n      setFileListError(message);\n      setConnectionStatus(\"error\");\n      setConnectionDetail(null);\n      setBucketUsageError(null);\n      console.error(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const runGlobalSearch = async (bucketName: string, term: string) => {\n    const q = term.trim();\n    if (!q) {\n      setSearchResults([]);\n      setSearchCursor(null);\n      return;\n    }\n    setSearchLoading(true);\n    try {\n      const res = await fetchWithAuth(\n        `/api/search?bucket=${encodeURIComponent(bucketName)}&q=${encodeURIComponent(q)}&limit=200`,\n      );\n      const data = await res.json();\n      if (res.ok) {\n        setSearchResults(data.items || []);\n        setSearchCursor(data.cursor ?? null);\n      } else {\n        setSearchResults([]);\n        setSearchCursor(null);\n      }\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n\n  const fetchBucketUsage = async (bucketName: string) => {\n    setUsageLoading(true);\n    setBucketUsageError(null);\n    try {\n      const res = await fetchWithAuth(`/api/usage?bucket=${encodeURIComponent(bucketName)}&maxPages=10`);\n      const data = await readJsonSafe(res);\n      if (res.ok) {\n        const parsed: BucketUsage = {\n          bucket: String((data as { bucket?: unknown }).bucket ?? bucketName),\n          prefix: String((data as { prefix?: unknown }).prefix ?? \"\"),\n          objects: Math.max(0, Math.floor(toFiniteNumber((data as { objects?: unknown }).objects, 0))),\n          bytes: Math.max(0, toFiniteNumber((data as { bytes?: unknown }).bytes, 0)),\n          pagesScanned: Math.max(0, Math.floor(toFiniteNumber((data as { pagesScanned?: unknown }).pagesScanned, 0))),\n          truncated: Boolean((data as { truncated?: unknown }).truncated),\n        };\n        setBucketUsage(parsed);\n        setBucketUsageError(null);\n      } else {\n        setBucketUsage(null);\n        setBucketUsageError(String((data as { error?: unknown }).error ?? \"桶占用估算失败\"));\n      }\n    } catch {\n      setBucketUsage(null);\n      setBucketUsageError(\"桶占用估算失败，请检查桶配置或网络\");\n    } finally {\n      setUsageLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (selectedBucket) {\n      fetchFiles(selectedBucket, path);\n      setSelectedItem(null);\n      setSelectedKeys(new Set());\n    }\n  }, [selectedBucket, path, auth]);\n\n  useEffect(() => {\n    if (!selectedBucket) {\n      setSearchResults([]);\n      setSearchCursor(null);\n      return;\n    }\n    const term = searchTerm.trim();\n    if (!term) {\n      setSearchResults([]);\n      setSearchCursor(null);\n      return;\n    }\n    const t = setTimeout(() => {\n      runGlobalSearch(selectedBucket, term).catch(() => {});\n    }, 250);\n    return () => clearTimeout(t);\n  }, [searchTerm, selectedBucket, auth]);\n\n  useEffect(() => {\n    if (selectedBucket) {\n      fetchBucketUsage(selectedBucket);\n    }\n  }, [selectedBucket, auth]);\n\n  const persistLinkConfigMap = (next: LinkConfigMap) => {\n    setLinkConfigMap(next);\n    localStorage.setItem(\"r2_link_config_v1\", JSON.stringify(next));\n  };\n\n  const upsertS3BucketNameCheck = (bucketId: string, rec: S3BucketNameCheck) => {\n    setS3BucketNameCheckMap((prev) => {\n      const next = { ...prev, [bucketId]: rec };\n      localStorage.setItem(\"r2_s3_bucket_check_v1\", JSON.stringify(next));\n      return next;\n    });\n  };\n\n  const setTransferModeOverride = (bucketId: string, mode: TransferModeOverride) => {\n    setTransferModeOverrideMap((prev) => {\n      const next = { ...prev, [bucketId]: mode };\n      localStorage.setItem(\"r2_transfer_mode_override_v1\", JSON.stringify(next));\n      return next;\n    });\n  };\n\n  const getTransferModeOverride = (bucketId: string) => {\n    return (transferModeOverrideMap[bucketId] ?? \"auto\") as TransferModeOverride;\n  };\n\n  const getLinkConfig = (bucketName: string | null): LinkConfig => {\n    if (!bucketName) return {};\n    return linkConfigMap[bucketName] ?? {};\n  };\n\n  const getS3BucketNameCheck = (bucketId: string | null) => {\n    if (!bucketId) return null;\n    const cfg = getLinkConfig(bucketId);\n    const bucketName = (cfg.s3BucketName ?? \"\").trim();\n    if (!bucketName) return null;\n    const rec = s3BucketNameCheckMap[bucketId];\n    if (!rec) return null;\n    if (rec.bucketName !== bucketName) return null;\n    return rec;\n  };\n\n  const getS3BucketNameOverride = (bucketId: string) => {\n    const cfg = getLinkConfig(bucketId);\n    const bucketName = (cfg.s3BucketName ?? \"\").trim();\n    if (!bucketName) return \"\";\n    const rec = getS3BucketNameCheck(bucketId);\n    if (rec && rec.ok === false) return \"\";\n    return bucketName;\n  };\n\n  const normalizeBaseUrl = (raw?: string) => {\n    if (!raw) return undefined;\n    const trimmed = raw.trim();\n    if (!trimmed) return undefined;\n    const withProto = /^https?:\\/\\//i.test(trimmed) ? trimmed : `https://${trimmed}`;\n    return withProto.endsWith(\"/\") ? withProto : `${withProto}/`;\n  };\n\n  const buildObjectUrl = (baseUrl: string | undefined, key: string) => {\n    if (!baseUrl) return null;\n    return baseUrl + key.split(\"/\").map(encodeURIComponent).join(\"/\");\n  };\n\n  const getFileExt = (name: string) => {\n    const base = name.split(\"?\")[0];\n    const parts = base.split(\"/\");\n    const last = parts[parts.length - 1] || \"\";\n    const idx = last.lastIndexOf(\".\");\n    if (idx <= 0 || idx === last.length - 1) return \"\";\n    return last.slice(idx + 1).toLowerCase();\n  };\n\n  const getFileTag = (item: FileItem) => {\n    if (item.type === \"folder\") return \"DIR\";\n    const ext = getFileExt(item.name);\n    return ext ? ext.toUpperCase() : \"FILE\";\n  };\n\n  const copyToClipboard = async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n    } catch {\n      const textarea = document.createElement(\"textarea\");\n      textarea.value = text;\n      textarea.style.position = \"fixed\";\n      textarea.style.left = \"-9999px\";\n      document.body.appendChild(textarea);\n      textarea.focus();\n      textarea.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(textarea);\n    }\n    setToast(\"已复制到剪贴板\");\n  };\n\n  // --- 操作逻辑 ---\n  const handleEnterFolder = (folderName: string) => {\n    setPath([...path, folderName]);\n    setSearchTerm(\"\");\n  };\n\n  const handleBreadcrumbClick = (index: number) => {\n    setPath(path.slice(0, index + 1));\n    setSearchTerm(\"\");\n  };\n\n  const refreshCurrentView = async () => {\n    if (!selectedBucket) return;\n    const term = searchTerm.trim();\n    if (term) await runGlobalSearch(selectedBucket, term);\n    else await fetchFiles(selectedBucket, path);\n  };\n\n  const openMkdir = () => {\n    if (!selectedBucket) return;\n    setMkdirName(\"\");\n    setMkdirOpen(true);\n  };\n\n  const executeMkdir = async () => {\n    if (!selectedBucket) return;\n    const name = mkdirName.trim();\n    if (!name) {\n      setMkdirOpen(false);\n      return;\n    }\n    if (name.includes(\"/\")) {\n      setToast(\"文件夹名不支持 /\");\n      return;\n    }\n    const prefix = path.length > 0 ? path.join(\"/\") + \"/\" : \"\";\n    try {\n      setLoading(true);\n      const res = await fetchWithAuth(\"/api/operate\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          bucket: selectedBucket,\n          targetKey: `${prefix}${name}/`,\n          operation: \"mkdir\",\n        }),\n      });\n      if (!res.ok) throw new Error(\"mkdir failed\");\n      setMkdirOpen(false);\n      setSearchTerm(\"\");\n      await fetchFiles(selectedBucket, path);\n      setToast(\"新建文件夹成功\");\n    } catch {\n      setToast(\"新建文件夹失败，请重试\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = () => {\n    if (!selectedBucket) return;\n    if (selectedKeys.size === 0 && !selectedItem) return;\n    setDeleteOpen(true);\n  };\n\n  const executeDelete = async () => {\n    if (!selectedBucket) return;\n    try {\n      setLoading(true);\n      const selected = Array.from(selectedKeys);\n      if (selected.length > 0) {\n        const res = await fetchWithAuth(\"/api/operate\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            bucket: selectedBucket,\n            sourceKeys: selected,\n            operation: \"deleteMany\",\n          }),\n        });\n        if (!res.ok) throw new Error(\"delete failed\");\n      } else if (selectedItem) {\n        if (selectedItem.type === \"folder\") {\n          const res = await fetchWithAuth(\"/api/operate\", {\n            method: \"POST\",\n            body: JSON.stringify({\n              bucket: selectedBucket,\n              sourceKey: selectedItem.key,\n              operation: \"delete\",\n            }),\n          });\n          if (!res.ok) throw new Error(\"delete failed\");\n        } else {\n          const res = await fetchWithAuth(\n            `/api/files?bucket=${selectedBucket}&key=${encodeURIComponent(selectedItem.key)}`,\n            { method: \"DELETE\" },\n          );\n          if (!res.ok) throw new Error(\"delete failed\");\n        }\n      } else {\n        setDeleteOpen(false);\n        return;\n      }\n\n      setDeleteOpen(false);\n      await refreshCurrentView();\n      setSelectedItem(null);\n      setSelectedKeys(new Set());\n      setToast(\"删除成功\");\n    } catch {\n      setToast(\"删除失败，请刷新后重试\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRename = () => {\n    if (!selectedBucket || !selectedItem) return;\n    setRenameValue(selectedItem.name);\n    setRenameOpen(true);\n  };\n\n  const openRenameForSelection = () => {\n    if (!selectedBucket) return;\n    const keys = Array.from(selectedKeys);\n    if (keys.length !== 1) {\n      setToast(\"请选择 1 个文件/文件夹进行重命名\");\n      return;\n    }\n    const item = filteredFiles.find((f) => f.key === keys[0]);\n    if (!item) {\n      setToast(\"未找到选中文件\");\n      return;\n    }\n    openRenameFor(item);\n  };\n\n  const handleRenameFromToolbar = () => {\n    if (!selectedBucket) return;\n    if (selectedKeys.size === 1) {\n      openRenameForSelection();\n      return;\n    }\n    if (selectedItem) {\n      handleRename();\n      return;\n    }\n    setToast(\"请选择 1 个文件/文件夹进行重命名\");\n  };\n\n  const openRenameFor = (item: FileItem) => {\n    if (!selectedBucket) return;\n    setSelectedItem(item);\n    setRenameValue(item.name);\n    setRenameOpen(true);\n  };\n\n  const executeRename = async () => {\n    if (!selectedBucket || !selectedItem) return;\n    const newName = renameValue.trim();\n    if (!newName || newName === selectedItem.name) {\n      setRenameOpen(false);\n      return;\n    }\n\n    const currentKey = selectedItem.key;\n    let prefix = \"\";\n    if (selectedItem.type === \"folder\") {\n      const trimmed = currentKey.endsWith(\"/\") ? currentKey.slice(0, -1) : currentKey;\n      const parts = trimmed.split(\"/\").filter(Boolean);\n      prefix = parts.length > 1 ? `${parts.slice(0, -1).join(\"/\")}/` : \"\";\n    } else {\n      const parts = currentKey.split(\"/\").filter(Boolean);\n      prefix = parts.length > 1 ? `${parts.slice(0, -1).join(\"/\")}/` : \"\";\n    }\n    const targetKey = prefix + newName + (selectedItem.type === \"folder\" ? \"/\" : \"\");\n\n    try {\n      setLoading(true);\n      const res = await fetchWithAuth(\"/api/operate\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          bucket: selectedBucket,\n          sourceKey: selectedItem.key,\n          targetKey,\n          operation: \"move\",\n        }),\n      });\n      if (!res.ok) throw new Error(\"rename failed\");\n      setRenameOpen(false);\n      await refreshCurrentView();\n      setSelectedItem(null);\n      setSelectedKeys(new Set());\n      setToast(\"重命名成功\");\n    } catch {\n      setToast(\"重命名失败，请刷新后重试\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMoveOrCopy = (mode: \"move\" | \"copy\") => {\n    if (!selectedBucket || !selectedItem) return;\n    setMoveMode(mode);\n    const defaultDest = path.length ? path.join(\"/\") + \"/\" : \"\";\n    setMoveTarget(defaultDest);\n    setMoveSources([selectedItem.key]);\n    setMoveOpen(true);\n  };\n\n  const openMoveFor = (item: FileItem, mode: \"move\" | \"copy\") => {\n    if (!selectedBucket) return;\n    setSelectedItem(item);\n    setMoveMode(mode);\n    const defaultDest = path.length ? path.join(\"/\") + \"/\" : \"\";\n    setMoveTarget(defaultDest);\n    setMoveSources([item.key]);\n    setMoveOpen(true);\n  };\n\n  const openBatchMove = () => {\n    if (!selectedBucket) return;\n    const keys = Array.from(selectedKeys).filter((k) => !k.endsWith(\"/\"));\n    if (!keys.length) {\n      setToast(\"暂不支持文件夹整体移动\");\n      return;\n    }\n    setMoveMode(\"move\");\n    const defaultDest = path.length ? path.join(\"/\") + \"/\" : \"\";\n    setMoveTarget(defaultDest);\n    setMoveSources(keys);\n    setMoveOpen(true);\n  };\n\n  const executeMoveOrCopy = async () => {\n    if (!selectedBucket) return;\n    const input = moveTarget.trim();\n    if (!input) {\n      setMoveOpen(false);\n      return;\n    }\n\n    let cleaned = input;\n    if (cleaned.startsWith(\"/\")) cleaned = cleaned.slice(1);\n\n    const sources = moveSources.length ? moveSources : selectedItem ? [selectedItem.key] : [];\n    if (!sources.length) return;\n\n    try {\n      setLoading(true);\n      const op = moveMode === \"move\" ? \"move\" : \"copy\";\n      const manyOp = op === \"move\" ? \"moveMany\" : \"copyMany\";\n      const useMany = sources.length > 1 || !selectedItem || sources[0] !== selectedItem.key;\n\n      const res =\n        useMany\n          ? await fetchWithAuth(\"/api/operate\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                bucket: selectedBucket,\n                sourceKeys: sources,\n                targetPrefix: cleaned,\n                operation: manyOp,\n              }),\n            })\n          : await fetchWithAuth(\"/api/operate\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                bucket: selectedBucket,\n                sourceKey: selectedItem.key,\n                targetKey: (() => {\n                  const suffix = selectedItem.type === \"folder\" ? \"/\" : \"\";\n                  let targetKey = cleaned;\n                  if (cleaned.endsWith(\"/\")) targetKey = cleaned + selectedItem.name + suffix;\n                  else if (selectedItem.type === \"folder\" && !targetKey.endsWith(\"/\")) targetKey += \"/\";\n                  return targetKey;\n                })(),\n                operation: op,\n              }),\n            });\n      if (!res.ok) throw new Error(\"operate failed\");\n      setMoveOpen(false);\n      setMoveSources([]);\n      await refreshCurrentView();\n      setSelectedItem(null);\n      setSelectedKeys(new Set());\n      setToast(moveMode === \"move\" ? \"已移动\" : \"已复制\");\n    } catch {\n      setToast(moveMode === \"move\" ? \"移动失败\" : \"复制失败\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getSignedDownloadUrl = async (bucket: string, key: string, filename?: string) => {\n    const qs = new URLSearchParams();\n    qs.set(\"bucket\", bucket);\n    qs.set(\"key\", key);\n    if (filename) qs.set(\"filename\", filename);\n    const overrideMode = getTransferModeOverride(bucket);\n    if (overrideMode === \"proxy\") qs.set(\"forceProxy\", \"1\");\n    const bucketNameOverride = getS3BucketNameOverride(bucket);\n    if (bucketNameOverride) qs.set(\"bucketName\", bucketNameOverride);\n    const res = await fetchWithAuth(`/api/download?${qs.toString()}`);\n    const data = await res.json();\n    if (!res.ok || !data.url) throw new Error(data.error || \"download url failed\");\n    return data.url as string;\n  };\n\n  const getSignedDownloadUrlForced = async (bucket: string, key: string, filename: string) => {\n    const bucketNameOverride = getS3BucketNameOverride(bucket);\n    const overrideMode = getTransferModeOverride(bucket);\n    const extraBucket = bucketNameOverride ? `&bucketName=${encodeURIComponent(bucketNameOverride)}` : \"\";\n    const extraMode = overrideMode === \"proxy\" ? \"&forceProxy=1\" : \"\";\n    const res = await fetchWithAuth(\n      `/api/download?bucket=${encodeURIComponent(bucket)}&key=${encodeURIComponent(key)}&download=1&filename=${encodeURIComponent(filename)}${extraBucket}${extraMode}`,\n    );\n    const data = await res.json();\n    if (!res.ok || !data.url) throw new Error(data.error || \"download url failed\");\n    return data.url as string;\n  };\n\n  const downloadItem = async (item: FileItem) => {\n    if (!selectedBucket) return;\n    if (item.type === \"folder\") {\n      setToast(\"文件夹打包下载下一步做（当前先支持文件下载）\");\n      return;\n    }\n    try {\n      const url = await getSignedDownloadUrlForced(selectedBucket, item.key, item.name);\n      triggerDownloadUrl(url, item.name);\n      setToast(\"已拉起下载\");\n    } catch {\n      setToast(\"下载失败\");\n    }\n  };\n\n  const triggerDownloadUrl = (url: string, filename: string) => {\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename;\n    a.rel = \"noreferrer\";\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  };\n\n  const handleBatchDownload = async () => {\n    if (!selectedBucket) return;\n    const keys = Array.from(selectedKeys).filter((k) => !k.endsWith(\"/\"));\n    if (!keys.length) {\n      setToast(\"暂不支持文件夹整体批量下载\");\n      return;\n    }\n    setToast(`开始下载 ${keys.length} 个文件`);\n    for (const k of keys) {\n      try {\n        const filename = k.split(\"/\").pop() || \"download\";\n        const url = await getSignedDownloadUrlForced(selectedBucket, k, filename);\n        triggerDownloadUrl(url, filename);\n        await new Promise((r) => setTimeout(r, 150));\n      } catch {\n        // ignore and continue\n      }\n    }\n    setToast(\"已拉起批量下载\");\n  };\n\n  const handleConfigureLinks = () => {\n    if (!selectedBucket) return;\n    const current = getLinkConfig(selectedBucket);\n    setLinkPublic(current.publicBaseUrl ?? \"\");\n    setLinkCustom(current.customBaseUrl ?? \"\");\n    setLinkS3BucketName(current.s3BucketName ?? \"\");\n    setLinkOpen(true);\n  };\n\n  const saveLinkConfig = async () => {\n    if (!selectedBucket) return;\n    const publicBaseUrl = normalizeBaseUrl(linkPublic || undefined);\n    const customBaseUrl = normalizeBaseUrl(linkCustom || undefined);\n    const s3BucketName = linkS3BucketName.trim() || undefined;\n    if (!s3BucketName) {\n      setToast(\"桶名不能为空\");\n      return;\n    }\n\n    try {\n      const res = await fetchWithAuth(\n        `/api/bucket-check?bucketId=${encodeURIComponent(selectedBucket)}&bucketName=${encodeURIComponent(s3BucketName)}`,\n      );\n      const data = await readJsonSafe(res);\n      const ok = Boolean((data as { ok?: unknown }).ok);\n      const hint = String((data as { hint?: unknown }).hint ?? \"\").trim();\n      upsertS3BucketNameCheck(selectedBucket, { bucketName: s3BucketName, ok, hint: hint || undefined, checkedAt: Date.now() });\n      if (!ok) {\n        setToast(`桶名校验失败：${hint || \"请检查桶名\"}`);\n        return;\n      }\n\n      const patchRes = await fetchWithAuth(\"/api/buckets\", {\n        method: \"PATCH\",\n        body: JSON.stringify({\n          id: selectedBucket,\n          bucketName: s3BucketName,\n          publicBaseUrl,\n          customBaseUrl,\n        }),\n      });\n      const patchData = await readJsonSafe(patchRes);\n      if (!patchRes.ok) throw new Error(String((patchData as { error?: unknown }).error ?? \"保存失败\"));\n\n      const next: LinkConfigMap = { ...linkConfigMap, [selectedBucket]: { publicBaseUrl, customBaseUrl, s3BucketName } };\n      persistLinkConfigMap(next);\n      setLinkOpen(false);\n      setToast(\"已保存链接设置（桶名校验通过）\");\n    } catch (error) {\n      const message = toChineseErrorMessage(error, \"保存失败，请重试。\");\n      upsertS3BucketNameCheck(selectedBucket, { bucketName: s3BucketName, ok: false, hint: message, checkedAt: Date.now() });\n      setToast(message || \"保存失败\");\n    }\n  };\n\n  const copyLinkForItem = async (item: FileItem, kind: \"public\" | \"custom\") => {\n    if (!selectedBucket) return;\n    const cfg = getLinkConfig(selectedBucket);\n    const baseUrl = kind === \"public\" ? cfg.publicBaseUrl : cfg.customBaseUrl;\n    const url = buildObjectUrl(baseUrl, item.key);\n    if (!url) {\n      setToast(kind === \"public\" ? \"未配置公共开发 URL\" : \"未配置自定义域名\");\n      return;\n    }\n    await copyToClipboard(url);\n  };\n\n  const previewItem = async (item: FileItem) => {\n    if (!selectedBucket) return;\n    if (item.type === \"folder\") return;\n\n\t    const lower = item.name.toLowerCase();\n\t    const ext = getFileExt(item.name);\n\t    let kind: PreviewKind = \"other\";\n\t    if (ext === \"pdf\") kind = \"pdf\";\n\t    else if (/^(doc|docx|ppt|pptx|xls|xlsx)$/.test(ext)) kind = \"office\";\n\t    else if (/\\.(png|jpg|jpeg|gif|webp|svg)$/.test(lower)) kind = \"image\";\n\t    else if (/\\.(mp4|mov|mkv|webm)$/.test(lower)) kind = \"video\";\n\t    else if (/\\.(mp3|wav|flac|ogg)$/.test(lower)) kind = \"audio\";\n\t    else if (/\\.(txt|log|md|json|csv|ts|tsx|js|jsx|css|html|xml|yml|yaml)$/.test(lower)) kind = \"text\";\n\n    try {\n      const url = await getSignedDownloadUrl(selectedBucket, item.key, item.name);\n      const next: PreviewState = { name: item.name, key: item.key, bucket: selectedBucket, kind, url };\n      setPreview(next);\n      if (kind === \"text\") {\n        const res = await fetch(url, { headers: { Range: \"bytes=0-204799\" } });\n        const text = await res.text();\n        setPreview((prev) => (prev && prev.key === item.key ? { ...prev, text } : prev));\n      }\n    } catch {\n      setToast(\"预览失败\");\n    }\n  };\n\n  const formatSpeed = (bytesPerSec: number) => {\n    if (!Number.isFinite(bytesPerSec) || bytesPerSec <= 0) return \"-\";\n    return `${formatSize(bytesPerSec)}/s`;\n  };\n\n  const xhrPut = (\n    url: string,\n    body: Blob,\n    contentType: string | undefined,\n    onProgress: (loaded: number, total: number) => void,\n    signal?: AbortSignal,\n  ) => {\n    return new Promise<{ etag: string | null }>((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open(\"PUT\", url, true);\n      xhr.setRequestHeader(\"Content-Type\", contentType || \"application/octet-stream\");\n\n      if (signal) {\n        if (signal.aborted) {\n          reject(new Error(\"上传已中止\"));\n          return;\n        }\n        const onAbort = () => {\n          try {\n            xhr.abort();\n          } catch {\n            // ignore\n          }\n        };\n        signal.addEventListener(\"abort\", onAbort, { once: true });\n        xhr.addEventListener(\n          \"loadend\",\n          () => {\n            signal.removeEventListener(\"abort\", onAbort);\n          },\n          { once: true },\n        );\n      }\n\n      xhr.upload.onprogress = (evt) => {\n        if (evt.lengthComputable) onProgress(evt.loaded, evt.total);\n      };\n\n      xhr.onload = () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve({ etag: xhr.getResponseHeader(\"ETag\") });\n        } else {\n          reject(new Error(`上传失败（状态码：${xhr.status}）`));\n        }\n      };\n      xhr.onerror = () => reject(new Error(\"网络异常，请重试\"));\n      xhr.onabort = () => reject(new Error(\"上传已中止\"));\n      xhr.send(body);\n    });\n  };\n\n  const uploadSingleFile = async (\n    _taskId: string,\n    bucket: string,\n    key: string,\n    file: File,\n    onLoaded: (loaded: number) => void,\n    signal?: AbortSignal,\n\t  ) => {\n\t    let signRes: Response;\n\t    try {\n\t      signRes = await fetchWithAuth(\"/api/files\", {\n\t        method: \"POST\",\n\t        body: JSON.stringify({ bucket, key, contentType: file.type }),\n\t      });\n\t    } catch (err: unknown) {\n\t      const msg = err instanceof Error ? err.message : String(err);\n\t      throw new Error(`请求上传签名失败：${msg}`);\n\t    }\n\t    const signData = await readJsonSafe(signRes);\n\t    if (!signRes.ok || !signData.url) throw new Error(toChineseErrorMessage(signData.error, `上传签名失败（状态码：${signRes.status}）`));\n\t    await xhrPut(signData.url, file, file.type, (loaded) => onLoaded(loaded), signal);\n\t  };\n\n  const uploadMultipartFile = async (\n    taskId: string,\n    bucket: string,\n    key: string,\n    file: File,\n    onLoaded: (loaded: number) => void,\n    signal?: AbortSignal,\n  ) => {\n    // R2 multipart parts should be >= 5MiB (except the last part). Choose a part size that\n    // yields a few parts even for medium files, so we can upload parts in parallel and improve\n    // throughput on networks where a single connection is slow.\n    const pickPartSize = (size: number) => {\n      const MiB = 1024 * 1024;\n      const min = 8 * MiB;\n      const max = 64 * MiB;\n      const targetParts = 6;\n      const raw = Math.ceil(size / targetParts);\n      const clamped = Math.max(min, Math.min(max, raw));\n      // Round up to whole MiB to avoid odd sizes.\n      return Math.ceil(clamped / MiB) * MiB;\n    };\n\n    const resumeKey = getResumeKey(bucket, key, file);\n    const existingTask = uploadTasksRef.current.find((t) => t.id === taskId);\n    const existing = existingTask?.multipart;\n    const persisted = loadResumeRecord(resumeKey);\n\n    let uploadId: string | null = existing?.uploadId ?? persisted?.uploadId ?? null;\n    let partSize = existing?.partSize ?? persisted?.partSize ?? pickPartSize(file.size);\n    let partsMap: Record<string, string> = existing?.parts ?? persisted?.parts ?? {};\n\n    // If the persisted record doesn't match the file, ignore it.\n    if (persisted && (persisted.size !== file.size || persisted.lastModified !== file.lastModified)) {\n      uploadId = existing?.uploadId ?? null;\n      partsMap = existing?.parts ?? {};\n      deleteResumeRecord(resumeKey);\n    }\n\n\t    if (!uploadId) {\n\t      let createRes: Response;\n\t      try {\n\t        createRes = await fetchWithAuth(\"/api/multipart\", {\n\t          method: \"POST\",\n\t          body: JSON.stringify({ action: \"create\", bucket, key, contentType: file.type }),\n\t        });\n\t      } catch (err: unknown) {\n\t        const msg = err instanceof Error ? err.message : String(err);\n\t        throw new Error(`创建分片上传失败：${msg}`);\n\t      }\n\t      const createData = await readJsonSafe(createRes);\n\t      if (!createRes.ok || !createData.uploadId) {\n          throw new Error(toChineseErrorMessage(createData.error, `创建分片上传失败（状态码：${createRes.status}）`));\n        }\n\t      uploadId = createData.uploadId as string;\n\t      partsMap = {};\n\t      partSize = pickPartSize(file.size);\n\t    }\n\n    updateUploadTask(taskId, (t) => ({\n      ...t,\n      resumeKey,\n      multipart: { uploadId: uploadId as string, partSize, parts: partsMap },\n    }));\n\n    upsertResumeRecord(resumeKey, {\n      bucket,\n      key,\n      size: file.size,\n      lastModified: file.lastModified,\n      name: file.name,\n      uploadId: uploadId as string,\n      partSize,\n      parts: partsMap,\n    });\n\n    const partCount = Math.ceil(file.size / partSize);\n    const partLoaded = new Map<number, number>();\n\n    const concurrency = Math.min(6, partCount);\n    let nextPart = 1;\n    let aborted = false;\n\n    const uploadPart = async (partNumber: number) => {\n      // Skip uploaded parts (resume).\n      if (partsMap[String(partNumber)]) return;\n      const start = (partNumber - 1) * partSize;\n      const end = Math.min(file.size, start + partSize);\n      const blob = file.slice(start, end);\n\n\t      let signRes: Response;\n\t      try {\n\t        signRes = await fetchWithAuth(\"/api/multipart\", {\n\t          method: \"POST\",\n\t          body: JSON.stringify({ action: \"signPart\", bucket, key, uploadId, partNumber }),\n\t        });\n\t      } catch (err: unknown) {\n\t        const msg = err instanceof Error ? err.message : String(err);\n\t        throw new Error(`获取分片上传签名失败：${msg}`);\n\t      }\n\t      const signData = await readJsonSafe(signRes);\n\t      if (!signRes.ok || !signData.url) {\n          throw new Error(toChineseErrorMessage(signData.error, `分片签名失败（状态码：${signRes.status}）`));\n        }\n\n      const completedBytes = Object.keys(partsMap).reduce((acc, pn) => {\n        const n = Number.parseInt(pn, 10);\n        if (!Number.isFinite(n) || n <= 0) return acc;\n        const s = (n - 1) * partSize;\n        const e = Math.min(file.size, s + partSize);\n        return acc + Math.max(0, e - s);\n      }, 0);\n\n      const { etag } = await xhrPut(signData.url, blob, file.type, (loaded, total) => {\n        partLoaded.set(partNumber, loaded);\n        const sumLoaded = Array.from(partLoaded.values()).reduce((a, b) => a + b, 0);\n        onLoaded(Math.min(file.size, completedBytes + sumLoaded));\n        if (loaded === total) partLoaded.set(partNumber, total);\n      }, signal);\n      if (!etag) throw new Error(\"上传响应缺少 ETag\");\n      partsMap[String(partNumber)] = etag;\n\n      updateUploadTask(taskId, (t) =>\n        t.multipart\n          ? { ...t, multipart: { ...t.multipart, parts: { ...t.multipart.parts, [String(partNumber)]: etag } } }\n          : t,\n      );\n\n      upsertResumeRecord(resumeKey, {\n        bucket,\n        key,\n        size: file.size,\n        lastModified: file.lastModified,\n        name: file.name,\n        uploadId: uploadId as string,\n        partSize,\n        parts: partsMap,\n      });\n    };\n\n    const worker = async () => {\n      for (;;) {\n        if (aborted) return;\n        const partNumber = nextPart++;\n        if (partNumber > partCount) return;\n        await uploadPart(partNumber);\n      }\n    };\n\n    try {\n      await Promise.all(Array.from({ length: Math.min(concurrency, partCount) }, worker));\n      const parts = Object.entries(partsMap)\n        .map(([pn, etag]) => ({ partNumber: Number.parseInt(pn, 10), etag }))\n        .filter((p) => Number.isFinite(p.partNumber) && p.partNumber > 0)\n        .sort((a, b) => a.partNumber - b.partNumber);\n\t      let completeRes: Response;\n\t      try {\n\t        completeRes = await fetchWithAuth(\"/api/multipart\", {\n\t          method: \"POST\",\n\t          body: JSON.stringify({ action: \"complete\", bucket, key, uploadId, parts }),\n\t        });\n\t      } catch (err: unknown) {\n\t        const msg = err instanceof Error ? err.message : String(err);\n\t        throw new Error(`完成分片上传失败：${msg}`);\n\t      }\n\t      const completeData = await readJsonSafe(completeRes);\n\t      if (!completeRes.ok) {\n          throw new Error(toChineseErrorMessage(completeData.error, `完成分片上传失败（状态码：${completeRes.status}）`));\n        }\n\t      deleteResumeRecord(resumeKey);\n    } catch (err) {\n      aborted = true;\n      const current = uploadTasksRef.current.find((t) => t.id === taskId);\n      const status = current?.status;\n      const abortedByUser = signal?.aborted === true;\n      if (abortedByUser && status === \"paused\") {\n        // Keep uploadId/parts for resume.\n      } else if (abortedByUser && status === \"canceled\") {\n        await fetchWithAuth(\"/api/multipart\", {\n          method: \"POST\",\n          body: JSON.stringify({ action: \"abort\", bucket, key, uploadId }),\n        }).catch(() => {});\n        deleteResumeRecord(resumeKey);\n      } else {\n        // Keep resume record on transient errors; user can retry/resume.\n      }\n      throw err;\n    }\n  };\n\n  const updateUploadTask = (id: string, updater: (t: UploadTask) => UploadTask) => {\n    setUploadTasks((prev) => prev.map((t) => (t.id === id ? updater(t) : t)));\n  };\n\n  const pauseUploadTask = (id: string) => {\n    setUploadTasks((prev) =>\n      prev.map((t) => (t.id === id && t.status === \"uploading\" ? { ...t, status: \"paused\", speedBps: 0 } : t)),\n    );\n    setUploadQueuePaused(true);\n    uploadControllersRef.current.get(id)?.abort();\n    setToast(\"已暂停（可继续续传）\");\n  };\n\n  const resumeUploadTask = (id: string) => {\n    setUploadTasks((prev) =>\n      prev.map((t) =>\n        t.id === id && (t.status === \"paused\" || t.status === \"error\")\n          ? { ...t, status: \"queued\", speedBps: 0, startedAt: undefined, error: undefined }\n          : t,\n      ),\n    );\n    setUploadQueuePaused(false);\n    setTimeout(() => processUploadQueue(), 0);\n  };\n\n  const abortMultipartForTask = async (taskId: string) => {\n    const t = uploadTasksRef.current.find((x) => x.id === taskId);\n    if (!t?.multipart?.uploadId) return;\n    try {\n      await fetchWithAuth(\"/api/multipart\", {\n        method: \"POST\",\n        body: JSON.stringify({ action: \"abort\", bucket: t.bucket, key: t.key, uploadId: t.multipart.uploadId }),\n      });\n    } catch {\n      // ignore\n    } finally {\n      if (t.resumeKey) deleteResumeRecord(t.resumeKey);\n    }\n  };\n\n  const cancelUploadTask = (id: string) => {\n    setUploadTasks((prev) =>\n      prev.map((t) => (t.id === id && (t.status === \"queued\" || t.status === \"uploading\" || t.status === \"paused\") ? { ...t, status: \"canceled\", speedBps: 0 } : t)),\n    );\n    uploadControllersRef.current.get(id)?.abort();\n    void abortMultipartForTask(id);\n    setToast(\"已取消\");\n  };\n\n  const processUploadQueue = async () => {\n    if (uploadProcessingRef.current) return;\n    if (uploadQueuePausedRef.current) return;\n    uploadProcessingRef.current = true;\n    try {\n      for (;;) {\n        if (uploadQueuePausedRef.current) break;\n        const next = uploadTasksRef.current.find((t) => t.status === \"queued\");\n        if (!next) break;\n\n        const controller = new AbortController();\n        uploadControllersRef.current.set(next.id, controller);\n\n        updateUploadTask(next.id, (t) => ({\n          ...t,\n          status: \"uploading\",\n          startedAt: performance.now(),\n          loaded: typeof t.loaded === \"number\" && t.loaded > 0 ? t.loaded : 0,\n          speedBps: 0,\n          error: undefined,\n        }));\n\n        // Prefer multipart for most files to improve throughput on some networks/regions.\n        // Keep small files as single PUT to reduce overhead.\n        const threshold = 70 * 1024 * 1024;\n        const uploadFn = next.file.size >= threshold ? uploadMultipartFile : uploadSingleFile;\n\n        let lastAt = performance.now();\n        let lastLoaded = next.loaded ?? 0;\n\n        try {\n          await uploadFn(next.id, next.bucket, next.key, next.file, (loaded) => {\n            const now = performance.now();\n            const deltaBytes = Math.max(0, loaded - lastLoaded);\n            const deltaSec = Math.max(0.25, (now - lastAt) / 1000);\n            const speedBps = deltaBytes / deltaSec;\n            lastAt = now;\n            lastLoaded = loaded;\n\n            updateUploadTask(next.id, (t) => ({\n              ...t,\n              loaded,\n              speedBps: Number.isFinite(speedBps) ? speedBps : 0,\n            }));\n          }, controller.signal);\n\n          updateUploadTask(next.id, (t) => ({ ...t, status: \"done\", loaded: t.file.size, speedBps: 0, multipart: undefined }));\n          if (selectedBucket === next.bucket) fetchFiles(next.bucket, path);\n          if (next.resumeKey) deleteResumeRecord(next.resumeKey);\n        } catch (err) {\n          const message = err instanceof Error ? err.message : String(err);\n          const current = uploadTasksRef.current.find((t) => t.id === next.id);\n          if (current?.status === \"paused\" || current?.status === \"canceled\") {\n            // keep status\n          } else {\n            updateUploadTask(next.id, (t) => ({ ...t, status: \"error\", error: message, speedBps: 0 }));\n          }\n        } finally {\n          uploadControllersRef.current.delete(next.id);\n        }\n      }\n    } finally {\n      uploadProcessingRef.current = false;\n    }\n  };\n\n  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files || !selectedBucket) return;\n    const filesToUpload = Array.from(e.target.files);\n    const prefix = path.length > 0 ? path.join(\"/\") + \"/\" : \"\";\n\n    const newTasks: UploadTask[] = filesToUpload.map((file) => ({\n      id: (globalThis.crypto?.randomUUID?.() as string | undefined) ?? `${Date.now()}_${Math.random().toString(16).slice(2)}`,\n      bucket: selectedBucket,\n      file,\n      key: prefix + file.name,\n      resumeKey: getResumeKey(selectedBucket, prefix + file.name, file),\n      loaded: 0,\n      speedBps: 0,\n      status: \"queued\",\n    }));\n\n    setUploadTasks((prev) => [...newTasks, ...prev].slice(0, 50));\n    setUploadPanelOpen(true);\n    setToast(`已加入 ${newTasks.length} 个上传任务`);\n\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n    setTimeout(() => processUploadQueue(), 0);\n  };\n\n  // --- 视图数据处理 ---\n  const filteredFiles = useMemo(() => {\n    const term = searchTerm.trim();\n    if (!term) return files;\n    return searchResults;\n  }, [files, searchResults, searchTerm]);\n\n  const uploadSummary = useMemo(() => {\n    const totalBytes = uploadTasks.reduce((acc, t) => acc + t.file.size, 0);\n    const loadedBytes = uploadTasks.reduce((acc, t) => acc + Math.min(t.loaded, t.file.size), 0);\n    const active = uploadTasks.filter((t) => t.status === \"queued\" || t.status === \"uploading\").length;\n    const speedBps = uploadTasks.reduce((acc, t) => acc + (t.status === \"uploading\" ? t.speedBps : 0), 0);\n    const pct = totalBytes ? Math.min(100, Math.round((loadedBytes / totalBytes) * 100)) : 0;\n    return {\n      active,\n      total: uploadTasks.length,\n      pct,\n      speedText: formatSpeed(speedBps),\n    };\n  }, [uploadTasks]);\n\n  const currentViewStats = useMemo(() => {\n    const fileCount = files.filter(f => f.type === \"file\").length;\n    const folderCount = files.filter(f => f.type === \"folder\").length;\n    const totalSize = files.reduce((acc, curr) => acc + (curr.size || 0), 0);\n    return { fileCount, folderCount, totalSize };\n  }, [files]);\n\n  const getIcon = (type: string, name: string, size: \"lg\" | \"sm\" = \"lg\") => {\n    const cls = size === \"lg\" ? \"w-8 h-8\" : \"w-5 h-5\";\n    if (type === \"folder\") return <Folder className={`${cls} text-yellow-500 ${size === \"lg\" ? \"fill-yellow-500/20\" : \"\"}`} />;\n    const lower = name.toLowerCase();\n    const ext = getFileExt(name);\n    if (/\\.(jpg|png|gif|webp|svg)$/.test(lower)) return <ImageIcon className={`${cls} text-purple-500`} />;\n    if (/\\.(mp4|mov|mkv|webm)$/.test(lower)) return <Video className={`${cls} text-red-500`} />;\n    if (/\\.(mp3|wav|flac|ogg)$/.test(lower)) return <Music className={`${cls} text-blue-500`} />;\n    if (/(zip|rar|7z|tar|gz|bz2|xz)$/.test(ext)) return <FileArchive className={`${cls} text-amber-600`} />;\n    if (/(xls|xlsx|csv)$/.test(ext)) return <FileSpreadsheet className={`${cls} text-emerald-600`} />;\n    if (ext === \"json\") return <FileJson className={`${cls} text-orange-600`} />;\n    if (ext === \"pdf\") return <FileType className={`${cls} text-rose-600`} />;\n    if (/(doc|docx|ppt|pptx)$/.test(ext)) return <FileType className={`${cls} text-sky-600`} />;\n    if (/(apk|ipa|dmg|pkg|exe|msi|deb|rpm)$/.test(ext)) return <FileType className={`${cls} text-slate-600`} />;\n    if (/(ts|tsx|js|jsx|css|html|xml|yml|yaml|md|txt|log|sh|bash|py|go|rs|java|kt|c|cpp|h|hpp)$/.test(ext))\n      return <FileCode className={`${cls} text-indigo-600`} />;\n    return <FileText className={`${cls} text-gray-400`} />;\n  };\n\n  // --- 渲染：登录界面 ---\n  if (authRequired) {\n    const authInputClass =\n      \"w-full rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm text-slate-800 outline-none transition-all placeholder:text-slate-400 focus:border-blue-400 focus:ring-4 focus:ring-blue-100 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:border-blue-400 dark:focus:ring-blue-500/20\";\n    return (\n      <div\n        className={`${manrope.variable} ${notoSansSC.variable} relative min-h-screen flex flex-col bg-gradient-to-br from-blue-50 via-white to-blue-100 text-gray-900 dark:bg-gradient-to-br dark:from-slate-900 dark:via-slate-950 dark:to-blue-950 dark:text-gray-100`}\n        style={{ fontFamily: \"var(--font-noto-sc), var(--font-manrope), 'PingFang SC', 'Hiragino Sans GB', sans-serif\" }}\n      >\n        <div className=\"flex-1 flex items-center justify-center px-4 py-8 sm:px-6 lg:px-8\">\n          <div className=\"w-full max-w-md\">\n            {/* 顶部标题 */}\n            <div className=\"text-center mb-8\">\n              <div className=\"inline-flex h-12 w-12 items-center justify-center rounded-lg bg-gray-100 dark:bg-slate-800 mb-4\">\n                <BrandMark className=\"h-7 w-7\" />\n              </div>\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">R2 Admin Go</h1>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\n                无需部署的 Cloudflare R2 对象存储文件管理面板工具\n              </p>\n            </div>\n\n            {/* 表单卡片 */}\n            <div className=\"rounded-xl bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-slate-800 p-6 sm:p-8\">\n              {/* 标签栏 */}\n              <div className=\"flex gap-1 rounded-lg bg-gray-100 dark:bg-slate-800 p-1 mb-6\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setRegisterOpen(false);\n                    setLoginNotice(\"\");\n                  }}\n                  className={`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 ${\n                    !registerOpen\n                      ? \"bg-white text-blue-600 shadow-sm dark:bg-slate-700 dark:text-blue-400\"\n                      : \"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100\"\n                  }`}\n                >\n                  登 录\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setRegisterOpen(true);\n                    setLoginNotice(\"\");\n                  }}\n                  className={`flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 ${\n                    registerOpen\n                      ? \"bg-white text-blue-600 shadow-sm dark:bg-slate-700 dark:text-blue-400\"\n                      : \"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100\"\n                  }`}\n                >\n                  注 册\n                </button>\n              </div>\n\n              {/* 登录表单 */}\n              {registerOpen ? (\n                <form\n                  className=\"space-y-3\"\n                  onSubmit={(e) => {\n                    e.preventDefault();\n                    void handleRegister(e);\n                  }}\n                >\n                    {registerNotice ? (\n                      <div className=\"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs leading-relaxed text-red-600 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-300\">\n                        {registerNotice}\n                      </div>\n                    ) : null}\n\n                    <div>\n                      <label className=\"block text-xs font-semibold text-gray-700 mb-1.5 dark:text-gray-200\">邮箱</label>\n                      <input\n                        type=\"email\"\n                        value={registerEmail}\n                        onChange={(e) => {\n                          setRegisterEmail(e.target.value);\n                          setRegisterNotice(\"\");\n                        }}\n                        className={authInputClass}\n                        placeholder=\"example@email.com\"\n                        autoComplete=\"email\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-xs font-semibold text-gray-700 mb-1.5 dark:text-gray-200\">密码</label>\n                      <div className=\"relative\">\n                        <input\n                          type={showRegisterSecret ? \"text\" : \"password\"}\n                          value={registerPassword}\n                          onChange={(e) => {\n                            setRegisterPassword(e.target.value);\n                            setRegisterNotice(\"\");\n                          }}\n                          className={`${authInputClass} pr-10`}\n                          placeholder=\"至少六位\"\n                          autoComplete=\"new-password\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setShowRegisterSecret((v) => !v)}\n                          className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 dark:text-gray-500 dark:hover:text-blue-400\"\n                          aria-label={showRegisterSecret ? \"隐藏密码\" : \"显示密码\"}\n                        >\n                          {showRegisterSecret ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                        </button>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-start gap-2 pt-1\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"register_agree\"\n                        checked={registerAgree}\n                        onChange={(e) => {\n                          setRegisterAgree(e.target.checked);\n                          setRegisterNotice(\"\");\n                        }}\n                        className=\"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 cursor-pointer\"\n                      />\n                      <label htmlFor=\"register_agree\" className=\"text-xs leading-relaxed text-gray-600 dark:text-gray-300 cursor-pointer\">\n                        我已阅读并同意「用户协议」和「隐私政策」\n                      </label>\n                    </div>\n\n                    <button\n                      type=\"submit\"\n                      className=\"w-full rounded-lg bg-blue-600 hover:bg-blue-700 active:bg-blue-800 py-2.5 text-sm font-semibold text-white transition-colors shadow-md hover:shadow-lg mt-4\"\n                    >\n                      注册\n                    </button>\n                  </form>\n                ) : (\n                  <form onSubmit={handleLogin} className=\"space-y-3\">\n                    {loginNotice ? (\n                      <div className=\"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs leading-relaxed text-red-600 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-300\">\n                        {loginNotice}\n                      </div>\n                    ) : null}\n\n                    <div>\n                      <label className=\"block text-xs font-semibold text-gray-700 mb-1.5 dark:text-gray-200\">邮箱</label>\n                      <input\n                        type=\"email\"\n                        value={formEmail}\n                        onChange={(e) => {\n                          setFormEmail(e.target.value);\n                          setLoginNotice(\"\");\n                        }}\n                        className={authInputClass}\n                        placeholder=\"请输入邮箱\"\n                        autoComplete=\"email\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-xs font-semibold text-gray-700 mb-1.5 dark:text-gray-200\">密码</label>\n                      <div className=\"relative\">\n                        <input\n                          type={showSecret ? \"text\" : \"password\"}\n                          value={formPassword}\n                          onChange={(e) => {\n                            setFormPassword(e.target.value);\n                            setLoginNotice(\"\");\n                          }}\n                          className={`${authInputClass} pr-10`}\n                          placeholder=\"请输入密码\"\n                          autoComplete=\"current-password\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setShowSecret(!showSecret)}\n                          className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 dark:text-gray-500 dark:hover:text-blue-400\"\n                          aria-label={showSecret ? \"隐藏密码\" : \"显示密码\"}\n                        >\n                          {showSecret ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                        </button>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center justify-between gap-2 py-1 text-xs\">\n                      <label htmlFor=\"remember\" className=\"inline-flex items-center gap-1.5 text-gray-600 dark:text-gray-300 cursor-pointer\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"remember\"\n                          checked={rememberMe}\n                          onChange={(e) => setRememberMe(e.target.checked)}\n                          className=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 cursor-pointer\"\n                        />\n                        <span>记住我</span>\n                      </label>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setForgotEmail(formEmail.trim());\n                          setForgotOpen(true);\n                        }}\n                        className=\"text-gray-500 hover:text-blue-600 transition-colors dark:text-gray-400 dark:hover:text-blue-400\"\n                      >\n                        忘记密码\n                      </button>\n                    </div>\n\n                    <button\n                      type=\"submit\"\n                      className=\"w-full rounded-lg bg-blue-600 hover:bg-blue-700 active:bg-blue-800 py-2.5 text-sm font-semibold text-white transition-colors shadow-md hover:shadow-lg mt-4\"\n                    >\n                      登录\n                    </button>\n                  </form>\n                )}\n            </div>\n          </div>\n        </div>\n\n        {/* 底部导航栏 */}\n        <footer className=\"border-t border-gray-200 dark:border-slate-800 bg-gray-50 dark:bg-slate-900\">\n          <div className=\"max-w-4xl mx-auto px-4 py-3 sm:px-6 lg:px-8 flex flex-wrap items-center justify-center gap-x-3 gap-y-1 text-xs text-gray-500 dark:text-gray-400\">\n            <span>{LOGIN_PAGE.footer}</span>\n            {LOGIN_LINKS.map((l, idx) => (\n              <React.Fragment key={l.href}>\n                {idx > 0 && <span className=\"text-gray-300 dark:text-gray-700\">·</span>}\n                <a\n                  href={l.href}\n                  target={l.href.startsWith(\"mailto:\") ? undefined : \"_blank\"}\n                  rel={l.href.startsWith(\"mailto:\") ? undefined : \"noreferrer\"}\n                  className=\"transition-colors hover:text-blue-600 dark:hover:text-blue-300\"\n                >\n                  {l.label}\n                </a>\n              </React.Fragment>\n            ))}\n          </div>\n        </footer>\n\n        <Modal\n          open={forgotOpen}\n          title=\"找回密码\"\n          description=\"输入注册邮箱，我们会发送重置密码邮件。\"\n          onClose={() => setForgotOpen(false)}\n          footer={\n            <div className=\"flex justify-end gap-2\">\n              <button\n                onClick={() => setForgotOpen(false)}\n                className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n              >\n                取消\n              </button>\n              <button\n                onClick={() => {\n                  void handleSendResetEmail();\n                }}\n                disabled={loading}\n                className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                发送重置邮件\n              </button>\n            </div>\n          }\n        >\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">注册邮箱</label>\n            <input\n              type=\"email\"\n              value={forgotEmail}\n              onChange={(e) => setForgotEmail(e.target.value)}\n              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n              placeholder=\"请输入注册邮箱\"\n            />\n          </div>\n        </Modal>\n\n        <Modal\n          open={resetPasswordOpen}\n          title=\"设置新密码\"\n          description=\"请设置新的登陆密码，设置完成后使用新密码登录。\"\n          onClose={() => setResetPasswordOpen(false)}\n          footer={\n            <div className=\"flex justify-end gap-2\">\n              <button\n                onClick={() => setResetPasswordOpen(false)}\n                className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n              >\n                稍后再说\n              </button>\n              <button\n                onClick={() => {\n                  void handleResetPasswordFromRecovery();\n                }}\n                disabled={loading}\n                className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                保存新密码\n              </button>\n            </div>\n          }\n        >\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">新密码</label>\n              <input\n                type=\"password\"\n                value={resetPasswordValue}\n                onChange={(e) => setResetPasswordValue(e.target.value)}\n                className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n                placeholder=\"至少六位密码\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">确认新密码</label>\n              <input\n                type=\"password\"\n                value={resetPasswordConfirmValue}\n                onChange={(e) => setResetPasswordConfirmValue(e.target.value)}\n                className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n                placeholder=\"再次输入新密码\"\n              />\n            </div>\n          </div>\n        </Modal>\n\n        {ToastView}\n      </div>\n    );\n  }\n\n\t\t  // --- 渲染：主界面 ---\n\t\t  const getBucketLabel = (bucketId: string | null | undefined) => {\n\t\t    if (!bucketId) return \"\";\n\t\t    const found = buckets.find((b) => b.id === bucketId);\n\t\t    return found?.Name || bucketId;\n\t\t  };\n\n\t  const selectedBucketDisplayName = selectedBucket ? getBucketLabel(selectedBucket) : null;\n      const bucketDeleteTargetMeta = bucketDeleteTargetId ? buckets.find((b) => b.id === bucketDeleteTargetId) ?? null : null;\n      const isNewBucket = !editingBucketId;\n      const findBucketById = (bucketId: string | null | undefined) => {\n        if (!bucketId) return null;\n        return buckets.find((b) => b.id === bucketId) ?? null;\n      };\n\n\t\t  const selectBucket = (bucketId: string) => {\n\t\t    setSelectedBucket(bucketId);\n\t    setPath([]);\n\t    setSearchTerm(\"\");\n    setSelectedItem(null);\n\t    setSelectedKeys(new Set());\n\t    setBucketMenuOpen(false);\n\t    if (isMobile) setMobileNavOpen(false);\n\t\t    setToast(`已切换到：${getBucketLabel(bucketId)}`);\n\t\t  };\n\n\t\t      const openAddBucket = () => {\n          setAccountCenterOpen(false);\n          setEditingBucketId(null);\n          setBucketFormErrors({});\n\t        resetBucketForm();\n\t        setAddBucketOpen(true);\n\t      };\n\n      const openEditBucket = (bucketId?: string) => {\n        const target = findBucketById(bucketId ?? selectedBucket);\n        if (!target) {\n          setToast(\"请先选择要编辑的存储桶\");\n          return;\n        }\n        setAccountCenterOpen(false);\n        setEditingBucketId(target.id);\n        setBucketFormErrors({});\n        setBucketForm({\n          bucketLabel: target.Name ?? \"\",\n          bucketName: target.bucketName ?? \"\",\n          accountId: target.accountId ?? \"\",\n          accessKeyId: \"\",\n          secretAccessKey: \"\",\n          publicBaseUrl: target.publicBaseUrl ?? \"\",\n          customBaseUrl: target.customBaseUrl ?? \"\",\n        });\n        setAddBucketOpen(true);\n      };\n\n      const openDeleteBucketConfirm = (bucketId: string) => {\n        const target = findBucketById(bucketId);\n        if (!target) {\n          setToast(\"未找到要删除的存储桶\");\n          return;\n        }\n        setBucketDeleteTargetId(target.id);\n        setBucketDeleteOpen(true);\n      };\n\n\t  const SidebarPanel = ({ onClose }: { onClose?: () => void }) => (\n\t    <div\n\t      className={`h-full w-full bg-white border-r border-gray-200 flex flex-col dark:bg-gray-900 dark:border-gray-800 ${\n\t        onClose ? \"shadow-sm\" : \"\"\n\t      }`}\n\t    >\n\t      <div className=\"h-16 px-5 border-b border-gray-100 flex items-center justify-between gap-3 dark:border-gray-800\">\n\t        <div className=\"flex items-center gap-3 min-w-0\">\n\t\t          <BrandMark className=\"w-10 h-10 md:w-11 md:h-11 shrink-0\" />\n\t\t          <div className=\"min-w-0\">\n\t\t\t\t            <h1 className=\"font-bold text-[18px] leading-[1.15] tracking-tight text-blue-600 truncate dark:text-blue-400\">{LOGIN_PAGE.title}</h1>\n\t            <p className=\"mt-0.25 text-[13px] leading-[1.1] text-gray-400 font-medium truncate dark:text-gray-400\">{LOGIN_PAGE.subtitle}</p>\n\t\t          </div>\n\t        </div>\n\t        <div className=\"flex items-center gap-1\">\n\t          {onClose ? (\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800\"\n              aria-label=\"关闭菜单\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          ) : null}\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex flex-col overflow-y-auto\">\n        <div className=\"p-3 space-y-3 shrink-0\">\n          <div className=\"px-1\">\n\t            <div className=\"flex items-center justify-between gap-2\">\n\t              <div className=\"text-xs font-semibold text-gray-500 uppercase px-2 tracking-wider leading-none dark:text-gray-400\">存储桶</div>\n\t              <div className=\"flex items-center gap-1\">\n\t                <button\n\t                  type=\"button\"\n\t                  onClick={() => {\n\t                    void fetchBuckets();\n                    setToast(\"已刷新桶列表\");\n                  }}\n                  className=\"px-2 py-1 rounded-md text-xs font-medium text-blue-600 hover:bg-blue-50 leading-none dark:text-blue-300 dark:hover:bg-blue-950/30\"\n                  title=\"刷新桶列表\"\n                  aria-label=\"刷新桶列表\"\n                >\n                  刷新\n                </button>\n              </div>\n            </div>\n\n            {isMobile ? (\n              <div className=\"mt-2\">\n                <select\n                  value={selectedBucket ?? \"\"}\n                  onChange={(e) => {\n                    const v = e.target.value;\n                    if (!v) return;\n                    selectBucket(v);\n                  }}\n                  className=\"w-full rounded-xl border border-gray-200 bg-white px-3 py-2.5 text-sm text-gray-800 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-colors dark:border-gray-800 dark:bg-gray-950 dark:text-gray-100\"\n                  aria-label=\"选择存储桶\"\n                >\n                  <option value=\"\" disabled>\n                    选择存储桶\n                  </option>\n\t                  {buckets.map((b) => (\n\t                    <option key={b.id} value={b.id}>\n\t                      {getBucketLabel(b.id)}\n\t                    </option>\n\t                  ))}\n\t                </select>\n\t              </div>\n\t            ) : (\n\t              <div ref={bucketMenuRef} className=\"relative mt-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => setBucketMenuOpen((v) => !v)}\n                  className=\"w-full rounded-xl border border-gray-200 bg-white px-3 py-2.5 text-sm text-gray-800 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-colors dark:border-gray-800 dark:bg-gray-950 dark:text-gray-100 flex items-center justify-between gap-3\"\n                  aria-haspopup=\"listbox\"\n                  aria-expanded={bucketMenuOpen}\n                >\n\t                  <span className=\"truncate\">\n\t                    {selectedBucket ? getBucketLabel(selectedBucket) : \"选择存储桶\"}\n\t                  </span>\n                  <ChevronDown\n                    className={`w-4 h-4 text-gray-400 dark:text-gray-500 transition-transform ${\n                      bucketMenuOpen ? \"rotate-180\" : \"\"\n                    }`}\n                  />\n                </button>\n\n                {bucketMenuOpen ? (\n                  <div className=\"absolute left-0 right-0 top-[calc(100%+0.5rem)] z-20 rounded-2xl border border-gray-200 bg-white shadow-xl overflow-hidden dark:border-gray-800 dark:bg-gray-900\">\n                    <div className=\"max-h-[40vh] overflow-auto p-2\">\n                      {buckets.length ? (\n                        buckets.map((bucket) => (\n                          <button\n                            key={bucket.id}\n                            type=\"button\"\n                            onClick={() => selectBucket(bucket.id)}\n                            className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm transition-colors ${\n                              selectedBucket === bucket.id\n                                ? \"bg-blue-50 text-blue-700 font-medium dark:bg-blue-950/40 dark:text-blue-200\"\n                                : \"text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:hover:bg-gray-800\"\n                            }`}\n                          >\n                            <div\n                              className={`w-2 h-2 rounded-full ${\n                                selectedBucket === bucket.id ? \"bg-blue-500\" : \"bg-gray-300 dark:bg-gray-700\"\n                              }`}\n                            ></div>\n\t                            <span className=\"truncate\">{getBucketLabel(bucket.id)}</span>\n\t                          </button>\n\t                        ))\n                      ) : (\n                        <div className=\"px-3 py-3 text-sm text-gray-500 dark:text-gray-400\">暂无桶</div>\n                      )}\n                    </div>\n                  </div>\n\t                ) : null}\n\t              </div>\n\t            )}\n\n              <div className=\"mt-2 text-[10px] text-gray-500 px-1 leading-relaxed dark:text-gray-400\">\n                桶管理入口已移至底部「当前登录账号」模块。\n              </div>\n\t          </div>\n\t        </div>\n\n        <div className=\"flex-1\" />\n\n        <div className=\"p-4 border-t border-gray-100 bg-gray-50/50 space-y-3 dark:border-gray-800 dark:bg-gray-950/30 shrink-0\">\n        <div\n          className={`text-xs px-3 py-2 rounded-md border ${\n            connectionStatus === \"connected\"\n              ? \"bg-green-50 text-green-700 border-green-100 dark:bg-green-950/40 dark:text-green-200 dark:border-green-900\"\n              : connectionStatus === \"checking\"\n                ? \"bg-yellow-50 text-yellow-700 border-yellow-100 dark:bg-yellow-950/35 dark:text-yellow-200 dark:border-yellow-900\"\n                : connectionStatus === \"unbound\"\n                  ? \"bg-blue-50 text-blue-700 border-blue-100 dark:bg-blue-950/40 dark:text-blue-200 dark:border-blue-900\"\n                  : \"bg-red-50 text-red-700 border-red-100 dark:bg-red-950/40 dark:text-red-200 dark:border-red-900\"\n          }`}\n        >\n\t          <div className=\"flex items-center gap-2\">\n\t            <WifiMark className=\"w-3 h-3\" />\n\t            <span className=\"font-medium\">\n\t              {connectionStatus === \"connected\"\n\t                ? \"连接状态正常\"\n\t                : connectionStatus === \"checking\"\n\t                  ? \"连接中...\"\n\t                  : connectionStatus === \"unbound\"\n                    ? \"未绑定存储桶\"\n                    : \"连接异常\"}\n            </span>\n\t          </div>\n\t\t          {connectionStatus === \"connected\"\n\t\t            ? (() => {\n\t\t                const mode = selectedBucket ? buckets.find((b) => b.id === selectedBucket)?.transferMode : undefined;\n\t\t                const cfg = selectedBucket ? getLinkConfig(selectedBucket) : undefined;\n\t\t                const s3BucketName = String(cfg?.s3BucketName ?? \"\").trim();\n\t\t                const s3Check = selectedBucket ? getS3BucketNameCheck(selectedBucket) : null;\n                    const overrideMode = selectedBucket ? getTransferModeOverride(selectedBucket) : \"auto\";\n\n\t\t                let line2 = \"当前传输通道：未检测\";\n\t\t                let line3: string | null = null;\n                    const suffix = overrideMode === \"auto\" ? \"\" : \"（手动）\";\n\n\t\t\t                if (mode === \"presigned\") {\n\t\t\t                  line2 = overrideMode === \"proxy\" ? `当前传输通道：Pages 代理${suffix}` : `当前传输通道：R2 直连${suffix}`;\n\t\t\t                  if (s3BucketName) {\n\t\t\t                    if (!s3Check) line3 = null;\n\t\t\t                    else if (s3Check.ok) line3 = null;\n\t\t\t                    else line3 = `桶名校验失败：${s3BucketName}，${s3Check.hint || \"请检查桶名\"}（已忽略此桶名设置）`;\n\t\t\t                  }\n\t\t\t                } else if (mode === \"presigned_needs_bucket_name\") {\n\t\t                  if (!s3BucketName) {\n\t\t                    line2 = overrideMode === \"presigned\" ? `当前传输通道：Pages 代理${suffix}` : `当前传输通道：Pages 代理${suffix}`;\n\t\t                    line3 = \"已配置 R2 直连，如需启动 R2 直连，请先在「编辑桶」中确认桶名并完成校验。\";\n\t\t                  } else if (!s3Check) {\n\t\t                    line2 = overrideMode === \"proxy\" ? `当前传输通道：Pages 代理${suffix}` : `当前传输通道：R2 直连${suffix}`;\n\t\t                    line3 = null;\n\t\t\t                  } else if (s3Check.ok) {\n\t\t\t                    line2 = overrideMode === \"proxy\" ? `当前传输通道：Pages 代理${suffix}` : `当前传输通道：R2 直连${suffix}`;\n\t\t\t                    line3 = null;\n\t\t\t                  } else {\n\t\t\t                    line2 = `当前传输通道：Pages 代理${suffix}`;\n\t\t\t                    line3 = `桶名校验失败：${s3BucketName}${s3Check.hint || \"请检查桶名\"}，无法启用「R2 直连」，已回退至「Pages 代理」`;\n\t\t\t                  }\n\t\t\t                } else if (mode === \"proxy\") {\n\t\t                  line2 = `当前传输通道：Pages 代理${suffix}`;\n\t\t                }\n\n\t\t                return (\n\t\t                  <>\n\t\t                    <div className=\"mt-1 text-[11px] leading-relaxed opacity-80\">{line2}</div>\n\t\t                    {line3 ? <div className=\"mt-1 text-[10px] leading-relaxed opacity-80\">{line3}</div> : null}\n\t\t                  </>\n\t\t                );\n\t\t              })()\n\t\t            : null}\n\n\t\t          {connectionDetail && !fileListError ? (\n\t\t            <div className=\"mt-1 text-[10px] leading-relaxed opacity-80\">{connectionDetail}</div>\n\t\t          ) : null}\n\t        </div>\n\n\t          {connectionStatus === \"connected\" && selectedBucket ? (\n\t            <div className=\"px-3 py-2 rounded-md border border-gray-200 bg-white text-xs text-gray-600 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-200\">\n\t              <div className=\"flex items-center justify-between gap-2\">\n\t                <span className=\"font-medium truncate\">选择传输通道</span>\n                  {(() => {\n                    const current = getTransferModeOverride(selectedBucket);\n                    const canUsePresigned = buckets.find((b) => b.id === selectedBucket)?.transferMode !== \"proxy\";\n                    const label = current === \"auto\" ? \"自动\" : current === \"presigned\" ? \"R2 直连\" : \"Pages 代理\";\n\t                    return isMobile ? (\n\t                      <select\n\t                        value={current}\n\t                        onChange={(e) => {\n\t                          const v = (e.target.value || \"auto\") as TransferModeOverride;\n                          setTransferModeOverride(selectedBucket, v);\n                          setToast(v === \"auto\" ? \"已切换传输模式（自动）\" : v === \"presigned\" ? \"已切换传输模式（R2 直连）\" : \"已切换传输模式（Pages 代理）\");\n                        }}\n\t                        className=\"shrink-0 rounded-md border border-gray-200 bg-white px-2 py-1 text-[12px] text-gray-700 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-colors dark:border-gray-800 dark:bg-gray-950 dark:text-gray-100\"\n\t                        aria-label=\"切换传输模式\"\n\t                        title=\"选择传输通道\"\n\t                      >\n                        <option value=\"auto\">自动</option>\n                        <option value=\"presigned\" disabled={!canUsePresigned}>\n                          R2 直连\n                        </option>\n                        <option value=\"proxy\">Pages 代理</option>\n                      </select>\n                    ) : (\n\t                      <div ref={transferModeMenuRef} className=\"relative\">\n\t                        <button\n\t                          type=\"button\"\n\t                          onClick={() => setTransferModeMenuOpen((v) => !v)}\n\t                          className=\"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-2 py-1 text-[11px] text-gray-700 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-colors dark:border-gray-800 dark:bg-gray-950 dark:text-gray-100\"\n\t                          aria-haspopup=\"listbox\"\n\t                          aria-expanded={transferModeMenuOpen}\n\t                          title=\"选择传输通道\"\n\t                        >\n                          <span className=\"leading-none\">{label}</span>\n                          <ChevronDown className={`w-3.5 h-3.5 opacity-70 transition-transform ${transferModeMenuOpen ? \"rotate-180\" : \"\"}`} />\n                        </button>\n\n                        {transferModeMenuOpen ? (\n                          <div className=\"absolute right-0 top-[calc(100%+0.5rem)] z-30 min-w-[10rem] rounded-xl border border-gray-200 bg-white shadow-xl overflow-hidden dark:border-gray-800 dark:bg-gray-900\">\n                            <div className=\"p-2 space-y-1\">\n                              {(\n                                [\n                                  { value: \"auto\", label: \"自动\", disabled: false },\n                                  { value: \"presigned\", label: \"R2 直连\", disabled: !canUsePresigned },\n                                  { value: \"proxy\", label: \"Pages 代理\", disabled: false },\n                                ] as { value: TransferModeOverride; label: string; disabled: boolean }[]\n                              ).map((opt) => (\n                                <button\n                                  key={opt.value}\n                                  type=\"button\"\n                                  disabled={opt.disabled}\n                                  onClick={() => {\n                                    setTransferModeMenuOpen(false);\n                                    setTransferModeOverride(selectedBucket, opt.value);\n                                    setToast(\n                                      opt.value === \"auto\"\n                                        ? \"已切换传输模式（自动）\"\n                                        : opt.value === \"presigned\"\n                                          ? \"已切换传输模式（R2 直连）\"\n                                          : \"已切换传输模式（Pages 代理）\",\n                                    );\n\t                                  }}\n\t                                  className={[\n\t                                    \"w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg text-[12px] transition-colors\",\n\t                                    opt.value === current\n\t                                      ? \"bg-blue-50 text-blue-700 font-medium dark:bg-blue-950/40 dark:text-blue-200\"\n\t                                      : \"text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:hover:bg-gray-800\",\n\t                                    opt.disabled ? \"opacity-50 cursor-not-allowed hover:bg-transparent dark:hover:bg-transparent\" : \"\",\n\t                                  ]\n                                    .filter(Boolean)\n                                    .join(\" \")}\n                                  role=\"option\"\n                                  aria-selected={opt.value === current}\n                                >\n                                  <span>{opt.label}</span>\n                                  <span\n                                    className={[\n                                      \"w-2 h-2 rounded-full\",\n                                      opt.value === current ? \"bg-blue-500\" : \"bg-gray-300 dark:bg-gray-700\",\n                                    ].join(\" \")}\n                                    aria-hidden=\"true\"\n                                  />\n                                </button>\n                              ))}\n                            </div>\n                          </div>\n                        ) : null}\n                      </div>\n                    );\n                  })()}\n\t              </div>\n\t            </div>\n\t          ) : null}\n\t\n\t        <div className=\"px-3 py-2 rounded-md border border-gray-200 bg-white text-xs text-gray-600 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-200\">\n\t          <div className=\"flex items-center justify-between gap-2\">\n\t            <span className=\"font-medium truncate\">当前桶占用估算</span>\n            <button\n              onClick={() => selectedBucket && fetchBucketUsage(selectedBucket)}\n              disabled={!selectedBucket || usageLoading}\n              className=\"text-[11px] text-blue-600 hover:text-blue-700 disabled:opacity-50 dark:text-blue-300 dark:hover:text-blue-200\"\n            >\n              {usageLoading ? \"计算中...\" : \"刷新\"}\n            </button>\n          </div>\n          <div className=\"mt-1.5 flex items-center justify-between\">\n            <span className=\"text-[11px] text-gray-500 dark:text-gray-400\">对象数</span>\n            <span className=\"text-[11px] font-semibold text-gray-800 dark:text-gray-100\">\n              {bucketUsage ? (bucketUsage.truncated ? `≥${bucketUsage.objects}` : `${bucketUsage.objects}`) : \"-\"}\n            </span>\n          </div>\n          <div className=\"mt-1 flex items-center justify-between\">\n            <span className=\"text-[11px] text-gray-500 dark:text-gray-400\">容量</span>\n            <span className=\"text-[11px] font-semibold text-gray-800 dark:text-gray-100\">\n              {bucketUsage ? (bucketUsage.truncated ? `≥${formatSize(bucketUsage.bytes)}` : formatSize(bucketUsage.bytes)) : \"-\"}\n            </span>\n          </div>\n          {bucketUsage?.truncated ? (\n            <div className=\"mt-1 text-[10px] text-gray-400 dark:text-gray-500\">仅扫描前 {bucketUsage.pagesScanned} 页（每页最多 1000 项）</div>\n          ) : null}\n\t          {bucketUsageError && !fileListError ? (\n\t            <div className=\"mt-1 text-[10px] text-red-600 leading-relaxed dark:text-red-300\">{bucketUsageError}</div>\n\t          ) : null}\n        </div>\n\n\t        <button\n            type=\"button\"\n            onClick={() => setAccountCenterOpen(true)}\n            className=\"w-full px-3 py-2 rounded-md border border-gray-200 bg-white text-left text-xs text-gray-600 hover:bg-gray-50 transition-colors dark:border-gray-800 dark:bg-gray-900 dark:text-gray-200 dark:hover:bg-gray-800\"\n          >\n            <div className=\"flex items-center gap-2\">\n              <span className=\"inline-flex h-8 w-8 items-center justify-center rounded-full bg-blue-50 text-blue-600 dark:bg-blue-950/40 dark:text-blue-300\">\n                <UserCircle2 className=\"h-5 w-5\" />\n              </span>\n              <div className=\"min-w-0\">\n                <div className=\"font-medium truncate\">当前登录账号</div>\n                <div className=\"mt-0.5 text-[11px] font-semibold text-gray-800 truncate dark:text-gray-100\">\n                  {auth?.email ? auth.email : \"未读取到邮箱\"}\n                </div>\n                <div className=\"mt-0.5 text-[10px] text-gray-500 dark:text-gray-400\">已绑定桶：{buckets.length}</div>\n              </div>\n            </div>\n            <div className=\"mt-2 text-[10px] text-gray-400 dark:text-gray-500\">点击进入账号中心，管理当前账号下的存储桶。</div>\n\t        </button>\n\n        <button\n          onClick={() => setLogoutOpen(true)}\n          className=\"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-600 hover:bg-red-50 hover:text-red-600 hover:border-red-200 rounded-lg text-xs font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-200 dark:hover:bg-red-950/40 dark:hover:text-red-200 dark:hover:border-red-900\"\n        >\n          <LogOut className=\"w-3 h-3\" />\n          退出登录\n        </button>\n      </div>\n      </div>\n    </div>\n  );\n\n  const DetailsPanel = ({ onClose, compact }: { onClose?: () => void; compact?: boolean }) => (\n    <div className=\"h-full w-full bg-white border-l border-gray-200 flex flex-col shadow-sm dark:bg-gray-900 dark:border-gray-800\">\n      <div className=\"h-16 px-5 border-b border-gray-100 flex items-center justify-between gap-3 dark:border-gray-800\">\n        <h2 className=\"font-bold text-gray-800 text-sm uppercase tracking-wide dark:text-gray-100\">详细信息</h2>\n        {onClose ? (\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"p-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800\"\n            aria-label=\"关闭详情\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        ) : null}\n      </div>\n\n      <div className={`flex-1 overflow-y-auto ${compact ? \"p-4 space-y-5\" : \"p-6 space-y-8\"}`}>\n        {selectedItem ? (\n\t          <div className={`${compact ? \"space-y-4\" : \"space-y-6\"} animate-in fade-in slide-in-from-right-4 duration-300`}>\n\t            <div className={compact ? \"flex items-center gap-3\" : \"flex flex-col items-center\"}>\n\t              <div\n\t                className={`${\n\t                  compact ? \"w-14 h-14 rounded-xl\" : \"w-16 h-16 rounded-2xl\"\n\t                } bg-gray-50 border border-gray-100 flex items-center justify-center ${\n\t                  compact ? \"\" : \"mb-4\"\n\t                } shadow-sm dark:bg-gray-950 dark:border-gray-800`}\n\t              >\n\t                {getIcon(selectedItem.type, selectedItem.name)}\n              </div>\n              <div className={compact ? \"min-w-0 flex-1\" : \"\"}>\n                <h3\n                  className={`font-semibold text-gray-900 ${\n                    compact ? \"text-left break-words\" : \"text-center break-all px-2\"\n                  } leading-snug dark:text-gray-100`}\n                >\n                  {selectedItem.name}\n                </h3>\n                {compact ? (\n                  <div className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    {selectedItem.type === \"folder\" ? \"文件夹\" : formatSize(selectedItem.size)}\n                    {selectedItem.lastModified ? ` · ${new Date(selectedItem.lastModified).toLocaleDateString()}` : \"\"}\n\t                  </div>\n\t                ) : (\n\t                  <div className=\"mt-2 flex flex-wrap items-center justify-center gap-2\">\n\t                    <span className=\"text-[10px] px-2 py-0.5 rounded-full border border-gray-200 bg-white text-gray-600 font-semibold dark:border-gray-800 dark:bg-gray-900 dark:text-gray-200\">\n\t                      {getFileTag(selectedItem)}\n\t                    </span>\n\t                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n\t                      {selectedItem.type === \"folder\" ? \"文件夹\" : \"文件\"}\n\t                      {selectedItem.type === \"file\" ? ` · ${formatSize(selectedItem.size)}` : \"\"}\n\t                      {selectedItem.lastModified ? ` · ${new Date(selectedItem.lastModified).toLocaleDateString()}` : \"\"}\n\t                    </span>\n\t                  </div>\n\t                )}\n\t              </div>\n\t            </div>\n\t\n\t            {selectedItem.type === \"folder\" ? (\n\t              <div className={`grid grid-cols-2 ${compact ? \"gap-2 pt-1\" : \"gap-3 pt-2\"}`}>\n\t                <button\n\t                  onClick={() => handleEnterFolder(selectedItem!.name)}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm font-medium transition-colors col-span-2\"\n                >\n                  <FolderOpen className=\"w-4 h-4\" />\n                  打开文件夹\n                </button>\n                <button\n                  onClick={handleRename}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Edit2 className=\"w-4 h-4\" />\n                  重命名\n                </button>\n                <button\n                  onClick={() => handleMoveOrCopy(\"move\")}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <ArrowRightLeft className=\"w-4 h-4\" />\n                  移动\n                </button>\n                <button\n                  onClick={() => handleMoveOrCopy(\"copy\")}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Copy className=\"w-4 h-4\" />\n                  复制\n                </button>\n                <button\n                  onClick={handleDelete}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-red-600 hover:bg-red-50 hover:border-red-200 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-red-200 dark:hover:bg-red-950/40 dark:hover:border-red-900\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  删除\n                </button>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-2 gap-3 pt-2\">\n                <button\n                  onClick={() => previewItem(selectedItem!)}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm font-medium transition-colors col-span-2\"\n                >\n                  <Eye className=\"w-4 h-4\" />\n                  预览\n                </button>\n                <button\n                  onClick={() => downloadItem(selectedItem!)}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  下载\n                </button>\n                <button\n                  onClick={handleRename}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Edit2 className=\"w-4 h-4\" />\n                  重命名\n                </button>\n                <button\n                  onClick={() => handleMoveOrCopy(\"move\")}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <ArrowRightLeft className=\"w-4 h-4\" />\n                  移动\n                </button>\n                <button\n                  onClick={() => handleMoveOrCopy(\"copy\")}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Copy className=\"w-4 h-4\" />\n                  复制\n                </button>\n                <button\n                  onClick={handleDelete}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-red-600 hover:bg-red-50 hover:border-red-200 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-red-200 dark:hover:bg-red-950/40 dark:hover:border-red-900\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  删除\n                </button>\n                <button\n                  onClick={() => copyLinkForItem(selectedItem!, \"public\")}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Link2 className=\"w-4 h-4\" />\n                  公共链接\n                </button>\n                <button\n                  onClick={() => copyLinkForItem(selectedItem!, \"custom\")}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100 dark:hover:bg-gray-800 dark:hover:text-blue-200\"\n                >\n                  <Link2 className=\"w-4 h-4\" />\n                  自定义链接\n                </button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 dark:bg-gray-950\">\n              <Search className=\"w-6 h-6 text-gray-300 dark:text-gray-600\" />\n            </div>\n            <p className=\"text-gray-500 text-sm dark:text-gray-400\">\n              选择一个文件以查看详情\n              <br />\n              或进行管理\n            </p>\n          </div>\n        )}\n\n\t        {!compact ? (\n\t          <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-100 dark:from-blue-950/35 dark:to-indigo-950/25 dark:border-blue-900\">\n\t            <h3 className=\"text-xs font-bold text-blue-800 uppercase tracking-wider mb-4 flex items-center gap-2\">\n\t              <div className=\"w-1.5 h-1.5 rounded-full bg-blue-500\"></div>\n\t              当前视图统计\n\t            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs text-gray-500 dark:text-gray-400\">文件数</span>\n                <span className=\"text-sm font-bold text-gray-800 dark:text-gray-100\">{currentViewStats.fileCount}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs text-gray-500 dark:text-gray-400\">文件夹数</span>\n                <span className=\"text-sm font-bold text-gray-800 dark:text-gray-100\">{currentViewStats.folderCount}</span>\n              </div>\n              <div className=\"h-px bg-blue-200/50 my-2 dark:bg-blue-900/50\"></div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs text-gray-500 dark:text-gray-400\">总大小</span>\n                <span className=\"text-sm font-bold text-blue-700 dark:text-blue-200\">{formatSize(currentViewStats.totalSize)}</span>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n\n      <div className=\"p-4 border-t border-gray-100 bg-gray-50 text-[10px] text-gray-400 text-center dark:border-gray-800 dark:bg-gray-950/30 dark:text-gray-400\">\n        <p>{LOGIN_PAGE.title}</p>\n        <p className=\"mt-0.5\">R2对象存储多功能管理工具</p>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"flex h-dvh md:h-screen bg-gray-50 text-gray-900 font-sans overflow-hidden dark:bg-gray-900 dark:text-gray-100\">\n      {/* 移动端：左侧抽屉 */}\n      <div className={`fixed inset-0 z-50 md:hidden ${mobileNavOpen ? \"\" : \"pointer-events-none\"}`}>\n        <button\n          type=\"button\"\n          aria-label=\"关闭菜单\"\n          onClick={() => setMobileNavOpen(false)}\n          className={`absolute inset-0 bg-black/40 transition-opacity ${mobileNavOpen ? \"opacity-100\" : \"opacity-0\"}`}\n        />\n        <div\n          className={`absolute inset-y-0 left-0 w-[18rem] max-w-[85vw] transition-transform duration-200 ${\n            mobileNavOpen ? \"translate-x-0\" : \"-translate-x-full\"\n          }`}\n        >\n          <SidebarPanel onClose={() => setMobileNavOpen(false)} />\n        </div>\n      </div>\n\n      {/* 桌面端：左侧栏 */}\n      <div className=\"hidden md:block w-[17rem] shrink-0\">\n        <SidebarPanel />\n      </div>\n\n      {/* 中间：文件浏览器 */}\n      <main className=\"flex-1 flex flex-col min-w-0 bg-white dark:bg-gray-900\">\n        {/* 顶部工具栏 */}\n          <div className=\"border-b border-gray-200 bg-white shrink-0 dark:border-gray-800 dark:bg-gray-900\">\n          {/* 桌面端：保持原布局 */}\n          <div className=\"hidden md:flex h-16 border-b-0 items-center px-6 gap-6\">\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => selectedBucket && fetchFiles(selectedBucket, path)}\n                disabled={!selectedBucket}\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-300 dark:hover:bg-gray-800\"\n                title=\"刷新\"\n                aria-label=\"刷新\"\n              >\n                <RefreshCw className={`w-4 h-4 ${loading ? \"animate-spin\" : \"\"}`} />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">刷新</span>\n              </button>\n              <button\n                onClick={handleBatchDownload}\n                disabled={selectedKeys.size === 0}\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-300 dark:hover:bg-gray-800\"\n                title=\"批量下载（所选文件）\"\n                aria-label=\"下载\"\n              >\n                <Download className=\"w-4 h-4\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">下载</span>\n              </button>\n              <button\n                onClick={openBatchMove}\n                disabled={selectedKeys.size === 0}\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-300 dark:hover:bg-gray-800\"\n                title=\"批量移动（所选文件）\"\n                aria-label=\"移动\"\n              >\n                <ArrowRightLeft className=\"w-4 h-4\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">移动</span>\n              </button>\n              <button\n                onClick={handleRenameFromToolbar}\n                disabled={selectedKeys.size > 1 || (selectedKeys.size === 0 && !selectedItem)}\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-300 dark:hover:bg-gray-800\"\n                title=\"重命名（仅支持单选）\"\n                aria-label=\"重命名\"\n              >\n                <Edit2 className=\"w-4 h-4\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">重命名</span>\n              </button>\n              <button\n                onClick={handleDelete}\n                disabled={selectedKeys.size === 0 && !selectedItem}\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-red-200 dark:hover:bg-red-950/40\"\n                title=\"删除（所选项）\"\n                aria-label=\"删除\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n                <span className=\"text-[10px] leading-none\">删除</span>\n              </button>\n              <button\n                onClick={openMkdir}\n                disabled={!selectedBucket || !!searchTerm.trim()}\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-300 dark:hover:bg-gray-800\"\n                title={searchTerm.trim() ? \"搜索中无法新建文件夹\" : \"新建文件夹\"}\n                aria-label=\"新建\"\n              >\n                <FolderPlus className=\"w-4 h-4\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">新建</span>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() =>\n                  setThemeMode((prev) =>\n                    prev === \"system\" ? (resolvedDark ? \"light\" : \"dark\") : prev === \"dark\" ? \"light\" : \"system\",\n                  )\n                }\n                className=\"w-12 h-14 flex flex-col items-center justify-center gap-1 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors active:scale-95 dark:text-gray-300 dark:hover:bg-gray-800\"\n                title={themeMode === \"system\" ? \"主题：跟随系统\" : themeMode === \"dark\" ? \"主题：深色\" : \"主题：浅色\"}\n                aria-label=\"主题\"\n              >\n                {themeMode === \"dark\" ? (\n                  <Moon className=\"w-4 h-4\" />\n                ) : themeMode === \"light\" ? (\n                  <Sun className=\"w-4 h-4\" />\n                ) : (\n                  <Monitor className=\"w-4 h-4\" />\n                )}\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">主题</span>\n              </button>\n            </div>\n\n            <div className=\"flex-1\" />\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"relative\">\n                <Search className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"桶内全局搜索...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-9 pr-9 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 w-60 transition-all dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n                />\n                {searchLoading ? (\n                  <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                    <RefreshCw className=\"w-4 h-4 text-gray-400 animate-spin dark:text-gray-500\" />\n                  </div>\n                ) : null}\n              </div>\n              <button\n                onClick={() => {\n                  if (!selectedBucket) return;\n                  if (uploadTasks.length > 0) setUploadPanelOpen(true);\n                  else fileInputRef.current?.click();\n                }}\n                disabled={!selectedBucket}\n                className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-all shadow-sm active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploadSummary.active > 0 ? (\n                  <>\n                    <RefreshCw className=\"w-4 h-4 animate-spin\" />\n                    <span>{uploadSummary.pct}%</span>\n                  </>\n                ) : (\n                  <>\n                    <Upload className=\"w-4 h-4\" />\n                    <span>上传</span>\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n\n\t\t          {/* 桌面端：面包屑单独一行显示，避免被按钮挤压 */}\n\t\t          <div className=\"hidden md:flex items-center justify-between gap-3 px-6 py-2 border-t border-gray-100 bg-white dark:border-gray-800 dark:bg-gray-900\">\n\t\t            <div className=\"flex flex-wrap items-center gap-1 text-sm text-gray-600 dark:text-gray-300 min-w-0\">\n\t\t              <button\n\t\t                onClick={() => {\n\t\t                  setPath([]);\n\t                  setSearchTerm(\"\");\n\t\t                }}\n\t\t                className=\"hover:bg-gray-100 px-2 py-1 rounded-md transition-colors text-gray-500 flex items-center gap-1 dark:text-gray-300 dark:hover:bg-gray-800\"\n\t\t              >\n\t\t                <FolderOpen className=\"w-5 h-5 text-gray-500 dark:text-gray-300\" strokeWidth={1.75} />\n\t\t                <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">根目录</span>\n\t\t              </button>\n\t              {path.length > 0 && <ChevronRight className=\"w-4 h-4 text-gray-300 shrink-0 dark:text-gray-600\" />}\n\t              {path.map((folder, idx) => (\n                <React.Fragment key={idx}>\n                  <button\n                    onClick={() => handleBreadcrumbClick(idx)}\n                    className=\"hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded-md transition-colors font-medium break-words dark:hover:text-blue-200 dark:hover:bg-blue-950/30\"\n                  >\n                    {folder}\n                  </button>\n                  {idx < path.length - 1 && <ChevronRight className=\"w-4 h-4 text-gray-300 shrink-0 dark:text-gray-600\" />}\n                </React.Fragment>\n\t              ))}\n\t\t            </div>\n\t\t            <BucketHintChip\n\t\t              bucketName={selectedBucketDisplayName ?? \"未选择\"}\n\t\t              disabled={!selectedBucket}\n\t\t              onClick={() => setBucketHintOpen(true)}\n\t\t            />\n\t\t          </div>\n\n          {/* 移动端：分行布局，避免按钮挤压 */}\n          <div className=\"md:hidden px-3 py-2 space-y-2\">\n            <div className=\"flex items-center gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => setMobileNavOpen(true)}\n                className=\"p-2.5 -ml-1 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800\"\n                aria-label=\"打开菜单\"\n              >\n                <Menu className=\"w-5 h-5\" />\n              </button>\n\t\t\t            <div className=\"flex items-center gap-3 min-w-0\">\n\t\t\t              <BrandMark className=\"w-10 h-10 shrink-0\" />\n\t\t\t\t              <div className=\"min-w-0\">\n\t\t\t\t\t                <div className=\"font-bold text-[18px] leading-[1.15] tracking-tight text-blue-600 truncate dark:text-blue-400\">\n\t\t\t\t\t\t                  {LOGIN_PAGE.title}\n\t\t\t\t\t                </div>\n\t\t\t\t\t                <div className=\"mt-0.25 text-[12px] leading-[1.1] text-gray-400 font-medium truncate dark:text-gray-400\">\n\t\t\t\t\t                  {LOGIN_PAGE.subtitle}\n\t\t\t\t\t                </div>\n\t\t\t\t\t              </div>\n\t\t\t            </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <div className=\"relative flex-1\">\n                <Search className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"桶内搜索...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-9 pr-9 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n                />\n                {searchLoading ? (\n                  <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                    <RefreshCw className=\"w-4 h-4 text-gray-400 animate-spin dark:text-gray-500\" />\n                  </div>\n                ) : null}\n              </div>\n              <button\n                onClick={() => {\n                  if (!selectedBucket) return;\n                  if (uploadTasks.length > 0) setUploadPanelOpen(true);\n                  else fileInputRef.current?.click();\n                }}\n                disabled={!selectedBucket}\n                className=\"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-all shadow-sm active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                <span>上传</span>\n              </button>\n            </div>\n\n            <div className=\"flex items-center gap-2 overflow-x-auto -mx-3 px-3 pb-0.5\">\n              <button\n                onClick={() => selectedBucket && fetchFiles(selectedBucket, path)}\n                disabled={!selectedBucket}\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-200 dark:hover:bg-gray-800\"\n                title=\"刷新\"\n                aria-label=\"刷新\"\n              >\n                <RefreshCw className={`w-5 h-5 ${loading ? \"animate-spin\" : \"\"}`} />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">刷新</span>\n              </button>\n              <button\n                onClick={handleBatchDownload}\n                disabled={selectedKeys.size === 0}\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-200 dark:hover:bg-gray-800\"\n                title=\"批量下载（所选文件）\"\n                aria-label=\"下载\"\n              >\n                <Download className=\"w-5 h-5\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">下载</span>\n              </button>\n              <button\n                onClick={openBatchMove}\n                disabled={selectedKeys.size === 0}\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-200 dark:hover:bg-gray-800\"\n                title=\"批量移动（所选文件）\"\n                aria-label=\"移动\"\n              >\n                <ArrowRightLeft className=\"w-5 h-5\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">移动</span>\n              </button>\n              <button\n                onClick={handleRenameFromToolbar}\n                disabled={selectedKeys.size > 1 || (selectedKeys.size === 0 && !selectedItem)}\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-200 dark:hover:bg-gray-800\"\n                title=\"重命名（仅支持单选）\"\n                aria-label=\"重命名\"\n              >\n                <Edit2 className=\"w-5 h-5\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">重命名</span>\n              </button>\n              <button\n                onClick={handleDelete}\n                disabled={selectedKeys.size === 0 && !selectedItem}\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-red-200 dark:hover:bg-red-950/40\"\n                title=\"删除（所选项）\"\n                aria-label=\"删除\"\n              >\n                <Trash2 className=\"w-5 h-5\" />\n                <span className=\"text-[10px] leading-none\">删除</span>\n              </button>\n              <button\n                onClick={openMkdir}\n                disabled={!selectedBucket || !!searchTerm.trim()}\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 dark:text-gray-200 dark:hover:bg-gray-800\"\n                title={searchTerm.trim() ? \"搜索中无法新建文件夹\" : \"新建文件夹\"}\n                aria-label=\"新建\"\n              >\n                <FolderPlus className=\"w-5 h-5\" />\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">新建</span>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() =>\n                  setThemeMode((prev) =>\n                    prev === \"system\" ? (resolvedDark ? \"light\" : \"dark\") : prev === \"dark\" ? \"light\" : \"system\",\n                  )\n                }\n                className=\"w-16 h-14 flex flex-col items-center justify-center gap-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors active:scale-95 dark:text-gray-200 dark:hover:bg-gray-800\"\n                title={themeMode === \"system\" ? \"主题：跟随系统\" : themeMode === \"dark\" ? \"主题：深色\" : \"主题：浅色\"}\n                aria-label=\"主题\"\n              >\n                {themeMode === \"dark\" ? (\n                  <Moon className=\"w-5 h-5\" />\n                ) : themeMode === \"light\" ? (\n                  <Sun className=\"w-5 h-5\" />\n                ) : (\n                  <Monitor className=\"w-5 h-5\" />\n                )}\n                <span className=\"text-[10px] leading-none text-gray-500 dark:text-gray-400\">主题</span>\n              </button>\n            </div>\n\n\t\t            {/* 移动端：面包屑移动到功能区下方、文件列表上方 */}\n\t\t            <div className=\"pt-1\">\n\t\t              <div className=\"flex items-center justify-between gap-2\">\n\t\t                <div className=\"flex flex-wrap items-center gap-1 text-sm text-gray-600 dark:text-gray-300 min-w-0\">\n\t\t                  <button\n\t\t                    onClick={() => {\n\t\t                      setPath([]);\n\t                      setSearchTerm(\"\");\n\t\t                    }}\n\t\t                    className=\"hover:bg-gray-100 px-2 py-1 rounded-md transition-colors text-gray-500 flex items-center gap-1 dark:text-gray-300 dark:hover:bg-gray-800\"\n\t\t                  >\n\t\t                    <FolderOpen className=\"w-5 h-5 text-gray-500 dark:text-gray-300\" strokeWidth={1.75} />\n\t\t                    <span className=\"text-sm font-medium\">根目录</span>\n\t\t                  </button>\n\t                  {path.length > 0 && <ChevronRight className=\"w-4 h-4 text-gray-300 shrink-0 dark:text-gray-600\" />}\n\t                  {path.map((folder, idx) => (\n\t                    <React.Fragment key={idx}>\n\t                      <button\n\t                        onClick={() => handleBreadcrumbClick(idx)}\n\t                        className=\"hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded-md transition-colors font-medium whitespace-nowrap dark:hover:text-blue-200 dark:hover:bg-blue-950/30\"\n\t                      >\n\t                        {folder}\n\t                      </button>\n\t                      {idx < path.length - 1 && (\n\t                        <ChevronRight className=\"w-4 h-4 text-gray-300 shrink-0 dark:text-gray-600\" />\n\t                      )}\n\t                    </React.Fragment>\n\t                  ))}\n\t                </div>\n\t                <BucketHintChip\n\t                  bucketName={selectedBucketDisplayName ?? \"未选择\"}\n\t                  disabled={!selectedBucket}\n\t                  onClick={() => setBucketHintOpen(true)}\n\t                  className=\"shrink-0\"\n\t                />\n\t              </div>\n\t            </div>\n\t          </div>\n\t        </div>\n\n        <input type=\"file\" multiple ref={fileInputRef} className=\"hidden\" onChange={handleUpload} />\n\n        {loading || searchLoading ? (\n          <div className=\"h-1 w-full bg-blue-100 dark:bg-blue-950/40\">\n            <div className=\"h-1 w-1/3 bg-blue-500 animate-pulse\" />\n          </div>\n        ) : (\n          <div className=\"h-1 w-full bg-transparent\" />\n        )}\n\n        {/* 文件列表 */}\n        <div\n          className={`flex-1 overflow-y-auto p-3 md:py-4 md:px-6 bg-gray-50/30 dark:bg-gray-900 ${loading ? \"pointer-events-none\" : \"\"}`}\n          onClick={() => {\n            setSelectedItem(null);\n          }}\n        >\n          {connectionStatus === \"unbound\" ? (\n            <div className=\"h-full flex items-center justify-center\">\n              <div className=\"w-full max-w-2xl bg-white border border-gray-200 rounded-2xl shadow-sm p-6 dark:bg-gray-900 dark:border-gray-800\">\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div>\n                    <div className=\"text-sm font-semibold text-gray-800 dark:text-gray-100\">未绑定存储桶</div>\n                    <div className=\"mt-1 text-sm text-gray-500 leading-relaxed dark:text-gray-300\">\n                      当前账号还没有可用存储桶，请点击「新增存储桶」并填写你的 R2 账号参数后继续。\n                    </div>\n                  </div>\n                  <button\n                    onClick={openAddBucket}\n                    className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium transition-colors whitespace-nowrap\"\n                  >\n                    新增存储桶\n                  </button>\n                </div>\n\n                <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"rounded-xl border border-gray-200 bg-gray-50 p-4 dark:border-gray-800 dark:bg-gray-950/30\">\n                    <div className=\"text-xs font-bold text-gray-500 uppercase tracking-wider dark:text-gray-400\">配置步骤</div>\n                    <ol className=\"mt-3 space-y-2 text-sm text-gray-700 list-decimal pl-5 dark:text-gray-200\">\n                      <li>点击「新增存储桶」按钮</li>\n                      <li>填写桶名、Account ID、Access Key、Secret Key</li>\n                      <li>可选填写公共链接和自定义域名</li>\n                      <li>保存后即可开始管理文件</li>\n                    </ol>\n                  </div>\n\n                  <div className=\"rounded-xl border border-gray-200 bg-gray-50 p-4 dark:border-gray-800 dark:bg-gray-950/30\">\n                    <div className=\"text-xs font-bold text-gray-500 uppercase tracking-wider dark:text-gray-400\">字段说明</div>\n                    <div className=\"mt-3 text-sm text-gray-700 leading-relaxed space-y-2 dark:text-gray-200\">\n                      <div className=\"flex items-center justify-between gap-3\">\n                        <span className=\"font-medium\">桶名称</span>\n                        <code className=\"px-2 py-1 rounded bg-white border border-gray-200 text-xs dark:bg-gray-900 dark:border-gray-800\">my-bucket</code>\n                      </div>\n                      <div className=\"flex items-center justify-between gap-3\">\n                        <span className=\"font-medium\">Account ID</span>\n                        <code className=\"px-2 py-1 rounded bg-white border border-gray-200 text-xs dark:bg-gray-900 dark:border-gray-800\">xxxxxxxx</code>\n                      </div>\n                      <div className=\"text-[12px] text-gray-500 dark:text-gray-400\">\n                        Access Key 和 Secret Key 在 Cloudflare R2 API Tokens 中创建与查看。\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 rounded-xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-gray-900\">\n                  <div className=\"text-xs font-semibold text-gray-600 dark:text-gray-200\">提示</div>\n                  <ul className=\"mt-2 text-sm text-gray-700 space-y-1.5 list-disc pl-5 dark:text-gray-200\">\n                    <li>\n                      每个账号可配置多个桶，也可混用多个 Cloudflare 账号的桶。\n                    </li>\n                    <li>\n                      所有桶配置会绑定到当前登录账号，后续登录可直接继续使用。\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          ) : fileListError && !loading ? (\n            <div className=\"h-full flex items-center justify-center\">\n              <div className=\"w-full max-w-2xl rounded-2xl border border-red-200 bg-red-50 p-6 dark:border-red-900/50 dark:bg-red-950/20\">\n                <div className=\"text-sm font-semibold text-red-700 dark:text-red-200\">文件列表读取失败</div>\n                <div className=\"mt-2 text-sm leading-relaxed text-red-700/90 dark:text-red-200/90\">{fileListError}</div>\n                <div className=\"mt-4\">\n                  <button\n                    onClick={() => selectedBucket && fetchFiles(selectedBucket, path)}\n                    className=\"inline-flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700\"\n                  >\n                    重新读取\n                  </button>\n                </div>\n              </div>\n            </div>\n          ) : filteredFiles.length === 0 && !loading && !searchLoading ? (\n            <div className=\"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-400\">\n              <div className=\"w-24 h-24 bg-gray-50 rounded-full flex items-center justify-center mb-4 dark:bg-gray-950\">\n                <Folder className=\"w-10 h-10 text-gray-300 dark:text-gray-600\" />\n              </div>\n              <p className=\"text-sm font-medium\">{searchTerm.trim() ? \"未找到匹配内容\" : \"文件夹为空\"}</p>\n            </div>\n          ) : (\n            <React.Fragment>\n                <div className=\"bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm dark:bg-gray-900 dark:border-gray-800\">\n                  <div className=\"flex items-center px-4 py-3 sm:py-2.5 text-[11px] font-semibold text-gray-500 bg-gray-50 border-b border-gray-200 dark:bg-gray-950/30 dark:border-gray-800 dark:text-gray-400\">\n                    <div className=\"w-10 flex items-center justify-center\">\n                      <input\n                        type=\"checkbox\"\n                        aria-label=\"Select all\"\n                        checked={filteredFiles.length > 0 && filteredFiles.every((f) => selectedKeys.has(f.key))}\n                        onChange={(e) => {\n                          const next = new Set(selectedKeys);\n                          if (e.target.checked) {\n                            for (const f of filteredFiles) next.add(f.key);\n                          } else {\n                            for (const f of filteredFiles) next.delete(f.key);\n                          }\n                          setSelectedKeys(next);\n                        }}\n                        onClick={(e) => e.stopPropagation()}\n                        className=\"w-5 h-5 sm:w-4 sm:h-4\"\n                      />\n                    </div>\n                    <div className=\"flex-1\">名称</div>\n                    <div className=\"w-28 text-right hidden md:block\">大小</div>\n                    <div className=\"w-28 text-right hidden md:block\">修改时间</div>\n                    <div className=\"w-40 text-right hidden md:block\">操作</div>\n                    <div className=\"w-12 text-right md:hidden\">操作</div>\n                  </div>\n                  <div>\n                    {filteredFiles.map((file) => {\n                      const checked = selectedKeys.has(file.key);\n                      return (\n                        <div\n                          key={file.key}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            if (isMobile) {\n                              if (file.type === \"folder\") handleEnterFolder(file.name);\n                              else previewItem(file);\n                              return;\n                            }\n                            setSelectedItem(file);\n                          }}\n                          onDoubleClick={(e) => {\n                            e.stopPropagation();\n                            if (isMobile) return;\n                            if (file.type === \"folder\") handleEnterFolder(file.name);\n                            else previewItem(file);\n                          }}\n                          className={`group flex items-center px-4 py-3 md:py-2.5 text-sm border-b border-gray-100 hover:bg-gray-50 cursor-pointer dark:border-gray-800 dark:hover:bg-gray-800 ${\n                            selectedItem?.key === file.key ? \"bg-blue-50 dark:bg-blue-950/30\" : \"bg-white dark:bg-gray-900\"\n                          }`}\n                        >\n                          <div className=\"w-10 flex items-center justify-center\">\n                            <input\n                              type=\"checkbox\"\n                              checked={checked}\n                              onChange={(e) => {\n                                const next = new Set(selectedKeys);\n                                if (e.target.checked) next.add(file.key);\n                                else next.delete(file.key);\n                                setSelectedKeys(next);\n                              }}\n                              onClick={(e) => e.stopPropagation()}\n                              className=\"w-5 h-5 sm:w-4 sm:h-4\"\n                            />\n                          </div>\n                          <div className=\"flex-1 min-w-0 flex items-center gap-2\">\n                            <div className=\"shrink-0\">{getIcon(file.type, file.name, \"sm\")}</div>\n                            <div className=\"min-w-0 flex items-center gap-2\">\n                          <div className=\"truncate\" title={file.name}>{file.name}</div>\n                              <span className=\"shrink-0 text-[10px] px-2 py-0.5 rounded-full border border-gray-200 bg-white text-gray-600 font-semibold dark:border-gray-800 dark:bg-gray-900 dark:text-gray-200\">\n                                {getFileTag(file)}\n                              </span>\n                            </div>\n                          </div>\n                          <div className=\"w-28 text-right text-xs text-gray-500 hidden md:block dark:text-gray-400\">\n                            {file.type === \"folder\" ? \"-\" : formatSize(file.size)}\n                          </div>\n                          <div className=\"w-28 text-right text-xs text-gray-500 hidden md:block dark:text-gray-400\">\n                            {file.lastModified ? new Date(file.lastModified).toLocaleDateString() : \"-\"}\n                          </div>\n                          <div className=\"w-40 hidden md:flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                            {file.type === \"folder\" ? (\n                              <>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    handleEnterFolder(file.name);\n                                  }}\n                                  className=\"p-3 sm:p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n                                  title=\"打开\"\n                                >\n                                  <FolderOpen className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openRenameFor(file);\n                                  }}\n                                  className=\"p-3 sm:p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n                                  title=\"重命名\"\n                                >\n                                  <Edit2 className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openMoveFor(file, \"move\");\n                                  }}\n                                  className=\"p-3 sm:p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n                                  title=\"移动\"\n                                >\n                                  <ArrowRightLeft className=\"w-4 h-4\" />\n                                </button>\n                              </>\n                            ) : (\n                              <>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    downloadItem(file);\n                                  }}\n                                  className=\"p-3 sm:p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n                                  title=\"下载\"\n                                >\n                                  <Download className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openRenameFor(file);\n                                  }}\n                                  className=\"p-3 sm:p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n                                  title=\"重命名\"\n                                >\n                                  <Edit2 className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openMoveFor(file, \"move\");\n                                  }}\n                                  className=\"p-3 sm:p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n                                  title=\"移动\"\n                                >\n                                  <ArrowRightLeft className=\"w-4 h-4\" />\n                                </button>\n                              </>\n                            )}\n                          </div>\n                          <div className=\"w-12 flex justify-end md:hidden\">\n                            <button\n                              type=\"button\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setSelectedItem(file);\n                                setMobileDetailOpen(true);\n                              }}\n                              className=\"px-2.5 py-1.5 rounded-lg border border-gray-200 bg-white text-xs font-medium text-gray-700 hover:bg-gray-50 active:scale-95 transition dark:border-gray-800 dark:bg-gray-900 dark:text-gray-100 dark:hover:bg-gray-800\"\n                              aria-label=\"操作\"\n                              title=\"操作\"\n                            >\n                              操作\n                            </button>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n            </React.Fragment>\n          )}\n        </div>\n      </main>\n\n      {/* 桌面端：右侧信息面板 */}\n      <div className=\"hidden md:flex w-80 shrink-0\">\n        <DetailsPanel />\n      </div>\n\n\t      {/* 移动端：详情底部弹窗 */}\n\t      <div className={`fixed inset-0 z-50 md:hidden ${mobileDetailOpen ? \"\" : \"pointer-events-none\"}`}>\n\t        <button\n\t          type=\"button\"\n\t          aria-label=\"关闭详情\"\n\t          onClick={() => setMobileDetailOpen(false)}\n\t          className={`absolute inset-0 bg-black/40 transition-opacity ${mobileDetailOpen ? \"opacity-100\" : \"opacity-0\"}`}\n\t        />\n\t        <div\n\t          className={`absolute inset-x-0 bottom-0 transition-transform duration-200 ${\n\t            mobileDetailOpen ? \"translate-y-0\" : \"translate-y-full\"\n\t          }`}\n\t          onClick={(e) => e.stopPropagation()}\n\t        >\n\t          <div className=\"h-[70dvh] bg-white rounded-t-2xl shadow-2xl border border-gray-200 overflow-hidden dark:bg-gray-900 dark:border-gray-800\">\n\t            <DetailsPanel compact onClose={() => setMobileDetailOpen(false)} />\n\t          </div>\n\t        </div>\n\t      </div>\n\n      {/* 旧版：右侧信息面板（已弃用） */}\n      {false ? (\n      <div className=\"w-80 bg-white border-l border-gray-200 flex flex-col shadow-sm z-10\">\n        <div className=\"p-5 border-b border-gray-100\">\n          <h2 className=\"font-bold text-gray-800 text-sm uppercase tracking-wide\">详细信息</h2>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-8\">\n          {selectedItem ? (\n            <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\n              <div className=\"flex flex-col items-center\">\n                <div className=\"w-24 h-24 bg-gray-50 rounded-2xl border border-gray-100 flex items-center justify-center mb-4 shadow-sm\">\n                  {getIcon(selectedItem!.type, selectedItem!.name)}\n                </div>\n                <h3 className=\"font-semibold text-gray-900 text-center break-all px-2 leading-snug\">{selectedItem!.name}</h3>\n                <div className=\"mt-2 inline-flex items-center gap-2\">\n                  <span className=\"text-[10px] px-2 py-0.5 rounded-full border border-gray-200 bg-white text-gray-600 font-semibold\">\n                    {getFileTag(selectedItem!)}\n                  </span>\n                  {selectedItem!.type === \"file\" ? (\n                    <span className=\"text-[10px] text-gray-400 font-medium\">{formatSize(selectedItem!.size)}</span>\n                  ) : null}\n                </div>\n              </div>\n              \n              <div className=\"space-y-0 text-sm border rounded-lg border-gray-100 overflow-hidden\">\n                <div className=\"flex justify-between p-3 bg-gray-50/50 border-b border-gray-100\">\n                  <span className=\"text-gray-500\">类型</span>\n                  <span className=\"text-gray-900 font-medium\">{selectedItem!.type === \"folder\" ? \"文件夹\" : \"文件\"}</span>\n                </div>\n                <div className=\"flex justify-between p-3 bg-white border-b border-gray-100\">\n                  <span className=\"text-gray-500\">大小</span>\n                  <span className=\"text-gray-900 font-medium\">{formatSize(selectedItem!.size)}</span>\n                </div>\n                <div className=\"flex justify-between p-3 bg-gray-50/50\">\n                  <span className=\"text-gray-500\">修改时间</span>\n                  <span className=\"text-gray-900 font-medium text-right text-xs\">\n                    {selectedItem!.lastModified ? new Date(selectedItem!.lastModified as string).toLocaleDateString() : \"-\"}\n                  </span>\n                </div>\n              </div>\n\n              {selectedItem!.type === \"folder\" ? (\n                <div className=\"grid grid-cols-2 gap-3 pt-2\">\n                  <button\n                    onClick={() => handleEnterFolder(selectedItem!.name)}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm font-medium transition-colors col-span-2\"\n                  >\n                    <FolderOpen className=\"w-4 h-4\" />\n                    打开文件夹\n                  </button>\n                  <button\n                    onClick={handleRename}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Edit2 className=\"w-4 h-4\" />\n                    重命名\n                  </button>\n                  <button\n                    onClick={() => handleMoveOrCopy(\"move\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <ArrowRightLeft className=\"w-4 h-4\" />\n                    移动\n                  </button>\n                  <button\n                    onClick={() => handleMoveOrCopy(\"copy\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                    复制\n                  </button>\n                  <button\n                    onClick={handleDelete}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-red-600 hover:bg-red-50 hover:border-red-200 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    删除\n                  </button>\n                  <button\n                    onClick={() => copyLinkForItem(selectedItem!, \"public\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Link2 className=\"w-4 h-4\" />\n                    公共链接\n                  </button>\n                  <button\n                    onClick={() => copyLinkForItem(selectedItem!, \"custom\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Link2 className=\"w-4 h-4\" />\n                    自定义链接\n                  </button>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-2 gap-3 pt-2\">\n                  <button\n                    onClick={() => previewItem(selectedItem!)}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg text-sm font-medium transition-colors col-span-2\"\n                  >\n                    <Eye className=\"w-4 h-4\" />\n                    预览\n                  </button>\n                  <button\n                    onClick={() => downloadItem(selectedItem!)}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    下载\n                  </button>\n                  <button\n                    onClick={handleRename}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Edit2 className=\"w-4 h-4\" />\n                    重命名\n                  </button>\n                  <button\n                    onClick={() => handleMoveOrCopy(\"move\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <ArrowRightLeft className=\"w-4 h-4\" />\n                    移动\n                  </button>\n                  <button\n                    onClick={() => handleMoveOrCopy(\"copy\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                    复制\n                  </button>\n                  <button\n                    onClick={handleDelete}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-red-600 hover:bg-red-50 hover:border-red-200 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    删除\n                  </button>\n                  <button\n                    onClick={() => copyLinkForItem(selectedItem!, \"public\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Link2 className=\"w-4 h-4\" />\n                    公共链接\n                  </button>\n                  <button\n                    onClick={() => copyLinkForItem(selectedItem!, \"custom\")}\n                    className=\"flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:text-blue-600 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    <Link2 className=\"w-4 h-4\" />\n                    自定义链接\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Search className=\"w-6 h-6 text-gray-300\" />\n              </div>\n              <p className=\"text-gray-500 text-sm\">选择一个文件以查看详情<br/>或进行管理</p>\n            </div>\n          )}\n\n\t          <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-100\">\n\t            <h3 className=\"text-xs font-bold text-blue-800 uppercase tracking-wider mb-4 flex items-center gap-2\">\n\t              <div className=\"w-1.5 h-1.5 rounded-full bg-blue-500\"></div>\n\t              当前视图统计\n\t            </h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs text-gray-500\">文件数</span>\n                <span className=\"text-sm font-bold text-gray-800\">{currentViewStats.fileCount}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs text-gray-500\">文件夹数</span>\n                <span className=\"text-sm font-bold text-gray-800\">{currentViewStats.folderCount}</span>\n              </div>\n              <div className=\"h-px bg-blue-200/50 my-2\"></div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-xs text-gray-500\">总大小</span>\n                <span className=\"text-sm font-bold text-blue-700\">{formatSize(currentViewStats.totalSize)}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"p-4 border-t border-gray-100 bg-gray-50 text-[10px] text-gray-400 text-center\">\n          <p>{LOGIN_PAGE.title}</p>\n          <p className=\"mt-0.5\">R2对象存储多功能管理工具</p>\n        </div>\n      </div>\n      ) : null}\n\n\t      <Modal\n\t        open={bucketHintOpen}\n\t        title=\"当前存储桶\"\n\t        description=\"主页仅展示（不支持切换）；如需切换请在侧边栏/菜单中操作。\"\n\t        onClose={() => setBucketHintOpen(false)}\n\t        footer={\n\t          <div className=\"flex justify-end\">\n\t            <button\n\t              onClick={() => setBucketHintOpen(false)}\n\t              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium\"\n\t            >\n\t              知道了\n\t            </button>\n\t          </div>\n\t        }\n\t      >\n\t        <div className=\"space-y-2\">\n\t          <div className=\"text-xs text-gray-500 dark:text-gray-400\">桶名称</div>\n\t          <div className=\"text-base font-semibold text-gray-900 break-all dark:text-gray-100\">\n\t            {selectedBucketDisplayName ?? \"未选择\"}\n\t          </div>\n\t        </div>\n\t      </Modal>\n\n\t      <Modal\n\t        open={mkdirOpen}\n\t        title=\"新建文件夹\"\n\t        description={path.length ? `当前位置：/${path.join(\"/\")}/` : \"当前位置：/（根目录）\"}\n\t        onClose={() => { setMkdirOpen(false); setMkdirName(\"\"); }}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => { setMkdirOpen(false); setMkdirName(\"\"); }}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={executeMkdir}\n              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium\"\n            >\n              创建\n            </button>\n          </div>\n        }\n      >\n        <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">文件夹名称</label>\n        <input\n          value={mkdirName}\n          onChange={(e) => setMkdirName(e.target.value)}\n          className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n          placeholder=\"例如：images\"\n        />\n      </Modal>\n\n      <Modal\n        open={renameOpen}\n        title=\"重命名\"\n        description={selectedItem ? `当前：${selectedItem.name}` : undefined}\n        onClose={() => setRenameOpen(false)}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => setRenameOpen(false)}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={executeRename}\n              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium\"\n            >\n              确认\n            </button>\n          </div>\n        }\n      >\n        <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">新名称</label>\n        <input\n          value={renameValue}\n          onChange={(e) => setRenameValue(e.target.value)}\n          className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n          placeholder=\"输入新名称\"\n        />\n      </Modal>\n\n      <Modal\n        open={moveOpen}\n        title={moveMode === \"move\" ? \"移动\" : \"复制\"}\n        description={\n          moveSources.length > 1\n            ? `已选择 ${moveSources.length} 个文件`\n            : selectedItem\n              ? `对象：${selectedItem.key}`\n              : undefined\n        }\n        onClose={() => { setMoveOpen(false); setMoveSources([]); }}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => { setMoveOpen(false); setMoveSources([]); }}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={executeMoveOrCopy}\n              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium\"\n            >\n              确认\n            </button>\n          </div>\n        }\n      >\n        <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">目标路径</label>\n        <input\n          value={moveTarget}\n          onChange={(e) => setMoveTarget(e.target.value)}\n          className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n          placeholder=\"例如：photos/ 或 a/b/c/\"\n        />\n        <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">以 `/` 结尾表示目标目录；不以 `/` 结尾表示目标 Key。</div>\n      </Modal>\n\n      <Modal\n        open={accountCenterOpen}\n        title=\"账号中心\"\n        description=\"当前账号与存储桶管理\"\n        panelClassName=\"max-w-[96vw] sm:max-w-[600px]\"\n        showHeaderClose\n        onClose={() => {\n          setAccountCenterOpen(false);\n          setBucketDeleteTargetId(null);\n        }}\n      >\n        <div className=\"space-y-4\">\n          <div className=\"flex items-start justify-between gap-3\">\n            <div className=\"flex items-start gap-3 min-w-0 flex-1\">\n              <div className=\"h-11 w-11 shrink-0 rounded-full bg-blue-50 text-blue-600 dark:bg-blue-950/40 dark:text-blue-300 flex items-center justify-center\">\n                <UserCircle2 className=\"h-7 w-7\" />\n              </div>\n              <div className=\"min-w-0 flex-1\">\n                <div className=\"text-sm leading-tight font-semibold text-gray-800 truncate dark:text-gray-100\">{auth?.email || \"未读取到邮箱\"}</div>\n                <div className=\"mt-0 min-w-0\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowAccountUserId((v) => !v)}\n                    className=\"text-[11px] leading-none text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                  >\n                    {showAccountUserId ? \"隐藏用户ID\" : \"显示用户ID\"}\n                  </button>\n                  {showAccountUserId ? (\n                    <div className=\"mt-0.5 text-xs leading-tight text-gray-500 break-all dark:text-gray-400\">用户ID：{auth?.userId || \"-\"}</div>\n                  ) : null}\n                </div>\n              </div>\n            </div>\n            <div className=\"shrink-0 flex items-center justify-end gap-1.5 flex-wrap\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setAccountCenterOpen(false);\n                  setLogoutOpen(true);\n                }}\n                className=\"px-2 py-1 rounded-md text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800\"\n              >\n                退出登录\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setChangePasswordOpen(true)}\n                className=\"px-2 py-1 rounded-md text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800\"\n              >\n                修改密码\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setDeleteAccountOpen(true)}\n                className=\"px-2 py-1 rounded-md text-xs font-medium border border-red-200 text-red-600 hover:bg-red-50 dark:border-red-900 dark:text-red-200 dark:hover:bg-red-950/30\"\n              >\n                注销账号\n              </button>\n            </div>\n          </div>\n\n          <div className=\"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-900\">\n            <div className=\"pl-3 pr-5 py-2 border-b border-gray-200 flex items-center justify-between gap-3 dark:border-gray-800\">\n              <div className=\"text-xs font-medium text-gray-500 dark:text-gray-400\">已绑定存储桶（{buckets.length}）</div>\n              <button\n                type=\"button\"\n                onClick={openAddBucket}\n                className=\"shrink-0 inline-flex items-center gap-1.5 px-2 py-1.5 rounded-md bg-blue-600 text-white hover:bg-blue-700 text-xs font-medium\"\n              >\n                <HardDrive className=\"w-3.5 h-3.5\" />\n                添加存储桶\n              </button>\n            </div>\n            {buckets.length ? (\n              <div className=\"max-h-[45vh] overflow-y-auto p-2 space-y-2\">\n                {buckets.map((bucket) => {\n                  const isCurrent = selectedBucket === bucket.id;\n                  return (\n                    <div\n                      key={bucket.id}\n                      className={`rounded-lg border px-3 py-2 ${\n                        isCurrent\n                          ? \"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950/30\"\n                          : \"border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-900\"\n                      }`}\n                    >\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"min-w-0\">\n                          <div className=\"text-sm font-medium text-gray-800 truncate dark:text-gray-100\">\n                            {bucket.Name || bucket.bucketName || bucket.id}\n                          </div>\n                          <div className=\"mt-1 text-xs text-gray-500 break-all dark:text-gray-400\">\n                            R2 桶名：{bucket.bucketName || \"-\"}\n                          </div>\n                          <div className=\"mt-0.5 text-xs text-gray-500 truncate dark:text-gray-400\" title={bucket.accountId || \"-\"}>\n                            Account ID：{bucket.accountId || \"-\"}\n                          </div>\n                        </div>\n                        <div className=\"shrink-0 flex items-center gap-1\">\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              if (isCurrent) return;\n                              selectBucket(bucket.id);\n                              setAccountCenterOpen(false);\n                            }}\n                            disabled={isCurrent}\n                            className=\"px-2 py-1 rounded-md text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800 dark:disabled:hover:bg-transparent\"\n                          >\n                            {isCurrent ? \"当前\" : \"切换\"}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => openEditBucket(bucket.id)}\n                            className=\"px-2 py-1 rounded-md text-xs font-medium border border-gray-200 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800\"\n                          >\n                            编辑\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => openDeleteBucketConfirm(bucket.id)}\n                            className=\"px-2 py-1 rounded-md text-xs font-medium border border-red-200 text-red-600 hover:bg-red-50 dark:border-red-900 dark:text-red-200 dark:hover:bg-red-950/30\"\n                          >\n                            删除\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"p-4 text-sm text-gray-500 dark:text-gray-400\">当前账号还未绑定存储桶，请点击右上角「添加存储桶」。</div>\n            )}\n          </div>\n        </div>\n      </Modal>\n\n      <Modal\n        open={changePasswordOpen}\n        title=\"修改密码\"\n        onClose={() => {\n          setChangePasswordOpen(false);\n          setChangePasswordValue(\"\");\n          setChangePasswordConfirmValue(\"\");\n        }}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => {\n                setChangePasswordOpen(false);\n                setChangePasswordValue(\"\");\n                setChangePasswordConfirmValue(\"\");\n              }}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={() => {\n                void handleChangePassword();\n              }}\n              disabled={loading}\n              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              保存新密码\n            </button>\n          </div>\n        }\n      >\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">新密码</label>\n            <input\n              type=\"password\"\n              value={changePasswordValue}\n              onChange={(e) => setChangePasswordValue(e.target.value)}\n              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n              placeholder=\"至少六位密码\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">确认新密码</label>\n            <input\n              type=\"password\"\n              value={changePasswordConfirmValue}\n              onChange={(e) => setChangePasswordConfirmValue(e.target.value)}\n              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n              placeholder=\"再次输入新密码\"\n            />\n          </div>\n        </div>\n      </Modal>\n\n      <Modal\n        open={deleteAccountOpen}\n        title=\"注销账号\"\n        description=\"该操作不可恢复，将永久删除当前账号及其桶配置。\"\n        onClose={() => {\n          setDeleteAccountOpen(false);\n          setDeleteAccountConfirmText(\"\");\n        }}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => {\n                setDeleteAccountOpen(false);\n                setDeleteAccountConfirmText(\"\");\n              }}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={() => {\n                void handleDeleteAccount();\n              }}\n              disabled={loading}\n              className=\"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              确认注销\n            </button>\n          </div>\n        }\n      >\n        <div className=\"space-y-3\">\n          <div className=\"text-sm text-red-700 leading-relaxed dark:text-red-200\">\n            注销后无法恢复，账号下已绑定的桶配置会一并清理。\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">请输入“注销”确认</label>\n            <input\n              value={deleteAccountConfirmText}\n              onChange={(e) => setDeleteAccountConfirmText(e.target.value)}\n              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n              placeholder=\"注销\"\n            />\n          </div>\n        </div>\n      </Modal>\n\n      <Modal\n        open={addBucketOpen}\n        title={editingBucketId ? \"编辑存储桶\" : \"新增存储桶\"}\n        onClose={() => {\n          setAddBucketOpen(false);\n          setEditingBucketId(null);\n          setBucketFormErrors({});\n        }}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => {\n                setAddBucketOpen(false);\n                setEditingBucketId(null);\n                setBucketFormErrors({});\n              }}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={() => {\n                void handleSaveBucket();\n              }}\n              disabled={loading}\n              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {editingBucketId ? \"保存修改\" : \"保存\"}\n            </button>\n          </div>\n        }\n      >\n        <div className=\"space-y-3\">\n          <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n            {isNewBucket ? \"带 * 的字段为必填；若缺失，点击保存后会在对应输入框提示。\" : \"编辑模式下 Access Key / Secret 可留空表示不修改。\"}\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">显示名称（可选）</label>\n              <input\n                value={bucketForm.bucketLabel}\n                onChange={(e) => setBucketForm((prev) => ({ ...prev, bucketLabel: e.target.value }))}\n                className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n                placeholder=\"例如：我的云盘\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">\n                R2 桶名称 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                value={bucketForm.bucketName}\n                onChange={(e) => {\n                  setBucketForm((prev) => ({ ...prev, bucketName: e.target.value }));\n                  setBucketFormErrors((prev) => ({ ...prev, bucketName: undefined }));\n                }}\n                className={`w-full px-4 py-2.5 rounded-xl border focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:text-gray-100 dark:placeholder:text-gray-500 ${\n                  bucketFormErrors.bucketName\n                    ? \"border-red-500 dark:border-red-500\"\n                    : \"border-gray-200 dark:border-gray-800\"\n                }`}\n                placeholder=\"例如：my-bucket\"\n              />\n              {bucketFormErrors.bucketName ? (\n                <div className=\"mt-1 text-xs text-red-600 dark:text-red-300\">{bucketFormErrors.bucketName}</div>\n              ) : null}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">\n                Account ID <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                value={bucketForm.accountId}\n                onChange={(e) => {\n                  setBucketForm((prev) => ({ ...prev, accountId: e.target.value }));\n                  setBucketFormErrors((prev) => ({ ...prev, accountId: undefined }));\n                }}\n                className={`w-full px-4 py-2.5 rounded-xl border focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:text-gray-100 dark:placeholder:text-gray-500 ${\n                  bucketFormErrors.accountId\n                    ? \"border-red-500 dark:border-red-500\"\n                    : \"border-gray-200 dark:border-gray-800\"\n                }`}\n              />\n              {bucketFormErrors.accountId ? (\n                <div className=\"mt-1 text-xs text-red-600 dark:text-red-300\">{bucketFormErrors.accountId}</div>\n              ) : null}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">\n                Access Key ID {isNewBucket ? <span className=\"text-red-500\">*</span> : \"（可选）\"}\n              </label>\n              <input\n                value={bucketForm.accessKeyId}\n                onChange={(e) => {\n                  setBucketForm((prev) => ({ ...prev, accessKeyId: e.target.value }));\n                  setBucketFormErrors((prev) => ({ ...prev, accessKeyId: undefined }));\n                }}\n                className={`w-full px-4 py-2.5 rounded-xl border focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:text-gray-100 dark:placeholder:text-gray-500 ${\n                  bucketFormErrors.accessKeyId\n                    ? \"border-red-500 dark:border-red-500\"\n                    : \"border-gray-200 dark:border-gray-800\"\n                }`}\n                placeholder={editingBucketId ? \"留空表示不修改\" : \"\"}\n              />\n              {bucketFormErrors.accessKeyId ? (\n                <div className=\"mt-1 text-xs text-red-600 dark:text-red-300\">{bucketFormErrors.accessKeyId}</div>\n              ) : null}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">\n                Secret Access Key {isNewBucket ? <span className=\"text-red-500\">*</span> : \"（可选）\"}\n              </label>\n              <input\n                type=\"password\"\n                value={bucketForm.secretAccessKey}\n                onChange={(e) => {\n                  setBucketForm((prev) => ({ ...prev, secretAccessKey: e.target.value }));\n                  setBucketFormErrors((prev) => ({ ...prev, secretAccessKey: undefined }));\n                }}\n                className={`w-full px-4 py-2.5 rounded-xl border focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:text-gray-100 dark:placeholder:text-gray-500 ${\n                  bucketFormErrors.secretAccessKey\n                    ? \"border-red-500 dark:border-red-500\"\n                    : \"border-gray-200 dark:border-gray-800\"\n                }`}\n                placeholder={editingBucketId ? \"留空表示不修改\" : \"\"}\n              />\n              {bucketFormErrors.secretAccessKey ? (\n                <div className=\"mt-1 text-xs text-red-600 dark:text-red-300\">{bucketFormErrors.secretAccessKey}</div>\n              ) : null}\n            </div>\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">公共开发 URL（可选）</label>\n              <input\n                value={bucketForm.publicBaseUrl}\n                onChange={(e) => setBucketForm((prev) => ({ ...prev, publicBaseUrl: e.target.value }))}\n                className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n              />\n            </div>\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">自定义域名（可选）</label>\n              <input\n                value={bucketForm.customBaseUrl}\n                onChange={(e) => setBucketForm((prev) => ({ ...prev, customBaseUrl: e.target.value }))}\n                className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n              />\n            </div>\n          </div>\n        </div>\n      </Modal>\n\n      <Modal\n        open={bucketDeleteOpen}\n        title=\"确认删除存储桶？\"\n        onClose={() => {\n          setBucketDeleteOpen(false);\n          setBucketDeleteTargetId(null);\n        }}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => {\n                setBucketDeleteOpen(false);\n                setBucketDeleteTargetId(null);\n              }}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={() => {\n                if (!bucketDeleteTargetId) return;\n                void handleDeleteBucket(bucketDeleteTargetId);\n              }}\n              disabled={!bucketDeleteTargetId}\n              className=\"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-medium\"\n            >\n              删除存储桶\n            </button>\n          </div>\n        }\n      >\n        <div className=\"text-sm text-gray-700 leading-relaxed dark:text-gray-200\">\n          将删除以下存储桶配置：\n          <span className=\"font-semibold\"> {bucketDeleteTargetMeta?.Name || bucketDeleteTargetMeta?.bucketName || bucketDeleteTargetId || \"-\"}</span>\n          。该操作不会删除 R2 中的真实文件，只会移除本账号下的桶绑定配置。\n        </div>\n      </Modal>\n\n      <Modal\n        open={logoutOpen}\n        title=\"确认退出登录？\"\n        onClose={() => setLogoutOpen(false)}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => setLogoutOpen(false)}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={() => {\n                setLogoutOpen(false);\n                handleLogout();\n              }}\n              className=\"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-medium\"\n            >\n              退出登录\n            </button>\n          </div>\n        }\n      >\n        <div className=\"text-sm text-gray-700 dark:text-gray-200\">退出后将清除本地登录状态，需要重新输入邮箱和密码才能继续使用。确定退出登录吗？</div>\n      </Modal>\n\n\t      <Modal\n\t        open={linkOpen}\n\t        title=\"链接设置\"\n\t        description={selectedBucket ? `桶：${selectedBucket}` : undefined}\n\t        onClose={() => setLinkOpen(false)}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => setLinkOpen(false)}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={saveLinkConfig}\n              className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium\"\n            >\n              保存\n            </button>\n          </div>\n        }\n\t      >\n\t        <div className=\"space-y-4\">\n\t          <div>\n\t            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">公共开发 URL（可选）</label>\n\t            <input\n\t              value={linkPublic}\n\t              onChange={(e) => setLinkPublic(e.target.value)}\n\t              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n\t            />\n\t          </div>\n\n\t          <div>\n\t            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">自定义域名（可选）</label>\n\t            <input\n\t              value={linkCustom}\n\t              onChange={(e) => setLinkCustom(e.target.value)}\n\t              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n\t            />\n\t          </div>\n\n\n\t\t          <div>\n\t\t            <label className=\"block text-sm font-medium text-gray-700 mb-2 dark:text-gray-200\">R2 存储桶名称（必填）</label>\n\t\t            <input\n\t\t              value={linkS3BucketName}\n\t\t              onChange={(e) => setLinkS3BucketName(e.target.value)}\n\t\t              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder:text-gray-500\"\n\t\t            />\n\t\t            <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n\t\t              修改后将重新校验该桶名，校验通过才会保存。\n\t\t            </div>\n\t\t          </div>\n\t        </div>\n\t      </Modal>\n\n      <Modal\n        open={deleteOpen}\n        title=\"确认删除\"\n        description={\n          selectedKeys.size > 0\n            ? `将删除 ${selectedKeys.size} 项`\n            : selectedItem\n              ? `将删除：${selectedItem.key}`\n              : undefined\n        }\n        onClose={() => setDeleteOpen(false)}\n        footer={\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => setDeleteOpen(false)}\n              className=\"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-sm font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n            >\n              取消\n            </button>\n            <button\n              onClick={executeDelete}\n              className=\"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-medium\"\n            >\n              删除\n            </button>\n          </div>\n        }\n      >\n        <div className=\"text-sm text-gray-700 dark:text-gray-200\">\n          确定删除文件？此操作不可恢复。\n          {selectedKeys.size > 0\n            ? Array.from(selectedKeys).some((k) => k.endsWith(\"/\"))\n              ? \"（选择文件夹时，文件夹内的所有文件都将会被删除）\"\n              : null\n            : selectedItem?.type === \"folder\"\n              ? \"（文件夹会递归删除前缀下的所有对象）\"\n              : null}\n        </div>\n      </Modal>\n\n      {uploadTasks.length > 0 ? (\n        <>\n          <button\n            onClick={() => setUploadPanelOpen((v) => !v)}\n            className=\"fixed bottom-5 right-5 z-40 flex items-center gap-2 px-4 py-2 rounded-full bg-gray-900 text-white shadow-lg hover:bg-gray-800\"\n          >\n            <Upload className=\"w-4 h-4\" />\n            <span className=\"text-sm font-medium\">\n              上传 {uploadSummary.active ? `(${uploadSummary.active})` : \"\"}\n            </span>\n            <span className=\"text-xs text-gray-200\">{uploadSummary.pct}%</span>\n          </button>\n\n          {uploadPanelOpen ? (\n            <div className=\"fixed bottom-20 right-5 z-40 w-[420px] max-w-[calc(100vw-2.5rem)] bg-white border border-gray-200 rounded-2xl shadow-2xl overflow-hidden dark:bg-gray-900 dark:border-gray-800\">\n              <div className=\"px-4 py-3 border-b border-gray-100 flex items-center justify-between dark:border-gray-800\">\n                <div className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">上传任务</div>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-xs font-medium\"\n                  >\n                    添加文件\n                  </button>\n                  <button\n                    onClick={() =>\n                      setUploadTasks((prev) => prev.filter((t) => t.status === \"queued\" || t.status === \"uploading\" || t.status === \"paused\"))\n                    }\n                    className=\"px-3 py-1.5 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50 text-xs font-medium dark:border-gray-800 dark:text-gray-200 dark:hover:bg-gray-800\"\n                  >\n                    清理已完成\n                  </button>\n                  <button\n                    onClick={() => setUploadPanelOpen(false)}\n                    className=\"p-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800\"\n                    title=\"关闭\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n              <div className=\"max-h-[50vh] overflow-auto divide-y divide-gray-100 dark:divide-gray-800\">\n                {uploadTasks.map((t) => {\n                  const pct = t.file.size ? Math.min(100, Math.round((Math.min(t.loaded, t.file.size) / t.file.size) * 100)) : 0;\n                  return (\n                    <div key={t.id} className=\"px-4 py-3\">\n\t                      <div className=\"flex items-start justify-between gap-3\">\n\t                        <div className=\"min-w-0\">\n\t                          <div className=\"text-sm font-medium text-gray-900 truncate dark:text-gray-100\" title={t.key}>\n\t                            {t.file.name}\n\t                          </div>\n\t                          <div className=\"mt-0.5 text-[11px] text-gray-500 truncate dark:text-gray-400\" title={`${t.bucket}/${t.key}`}>\n\t                            {t.bucket}/{t.key}\n\t                          </div>\n\t                        </div>\n\t                        <div className=\"shrink-0 flex items-center gap-2\">\n\t                          <div className=\"text-right\">\n\t                            <div className=\"text-xs font-semibold text-gray-800 dark:text-gray-100\">{pct}%</div>\n\t                            <div className=\"text-[11px] text-gray-500 dark:text-gray-400\">\n                              {t.status === \"uploading\"\n                                ? formatSpeed(t.speedBps)\n                                : t.status === \"done\"\n                                  ? \"完成\"\n                                  : t.status === \"queued\"\n                                    ? \"排队中\"\n                                    : t.status === \"paused\"\n                                      ? \"已暂停\"\n                                      : t.status === \"canceled\"\n                                        ? \"已取消\"\n                                        : t.status === \"error\"\n                                          ? \"失败\"\n                                          : t.status}\n                            </div>\n\t                          </div>\n\t                          {t.status === \"uploading\" ? (\n\t                            <>\n\t                              <button\n\t                                onClick={() => pauseUploadTask(t.id)}\n\t                                className=\"p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                                title=\"暂停\"\n\t                              >\n\t                                <Pause className=\"w-4 h-4\" />\n\t                              </button>\n\t                              <button\n\t                                onClick={() => cancelUploadTask(t.id)}\n\t                                className=\"p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                                title=\"取消\"\n\t                              >\n\t                                <CircleX className=\"w-4 h-4\" />\n\t                              </button>\n\t                            </>\n\t                          ) : t.status === \"paused\" ? (\n\t                            <>\n\t                              <button\n\t                                onClick={() => resumeUploadTask(t.id)}\n\t                                className=\"p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                                title=\"继续\"\n\t                              >\n\t                                <Play className=\"w-4 h-4\" />\n\t                              </button>\n\t                              <button\n\t                                onClick={() => cancelUploadTask(t.id)}\n\t                                className=\"p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                                title=\"取消\"\n\t                              >\n\t                                <CircleX className=\"w-4 h-4\" />\n\t                              </button>\n\t                            </>\n\t                          ) : t.status === \"queued\" ? (\n\t                            <button\n\t                              onClick={() => cancelUploadTask(t.id)}\n\t                              className=\"p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                              title=\"取消\"\n\t                            >\n\t                              <CircleX className=\"w-4 h-4\" />\n\t                            </button>\n\t                          ) : t.status === \"error\" ? (\n\t                            <button\n\t                              onClick={() => resumeUploadTask(t.id)}\n\t                              className=\"p-2 rounded-lg hover:bg-gray-100 text-gray-600 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                              title=\"重试\"\n\t                            >\n\t                              <Play className=\"w-4 h-4\" />\n\t                            </button>\n\t                          ) : null}\n\t                        </div>\n\t                      </div>\n\t                      <div className=\"mt-2 h-2 bg-gray-100 rounded-full overflow-hidden dark:bg-gray-800\">\n\t                        <div\n\t                          className={`h-2 ${\n\t                            t.status === \"error\"\n\t                              ? \"bg-red-500\"\n\t                              : t.status === \"done\"\n\t                                ? \"bg-green-500\"\n\t                                : t.status === \"paused\" || t.status === \"canceled\"\n\t                                  ? \"bg-gray-400\"\n\t                                  : \"bg-blue-600\"\n\t                          }`}\n\t                          style={{ width: `${pct}%` }}\n\t                        />\n\t                      </div>\n                      {t.status === \"error\" ? <div className=\"mt-2 text-[11px] text-red-600 dark:text-red-300\">{t.error ?? \"上传失败\"}</div> : null}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          ) : null}\n        </>\n      ) : null}\n\n      {ToastView}\n\n      {preview ? (\n        <div\n          className=\"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-6\"\n          onClick={() => setPreview(null)}\n        >\n          <div\n            className=\"w-full max-w-4xl bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden dark:bg-gray-900 dark:border-gray-800\"\n            onClick={(e) => e.stopPropagation()}\n          >\n\t            <div className=\"px-5 py-3 border-b border-gray-100 flex items-center justify-between gap-3 dark:border-gray-800\">\n\t              <div className=\"min-w-0\">\n\t                <div className=\"text-sm font-semibold text-gray-900 truncate dark:text-gray-100\" title={preview.name}>\n\t                  {preview.name}\n\t                </div>\n\t                <div className=\"text-[11px] text-gray-500 truncate dark:text-gray-400\" title={preview.key}>\n\t                  {preview.key}\n\t                </div>\n\t              </div>\n\t              <div className=\"flex items-center gap-2\">\n\t                <span className=\"hidden sm:inline-flex text-[10px] px-2 py-0.5 rounded-full border border-gray-200 bg-white text-gray-600 font-semibold dark:border-gray-800 dark:bg-gray-900 dark:text-gray-200\">\n\t                  {getFileExt(preview.name).toUpperCase() || \"FILE\"}\n\t                </span>\n\t                <button\n\t                  onClick={async () => {\n\t                    try {\n\t                      const url = await getSignedDownloadUrlForced(preview.bucket, preview.key, preview.name);\n\t                      triggerDownloadUrl(url, preview.name);\n\t                      setToast(\"已拉起下载\");\n\t                    } catch {\n\t                      setToast(\"下载失败\");\n\t                    }\n\t                  }}\n\t                  className=\"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800\"\n\t                  title=\"下载\"\n\t                >\n\t                  <Download className=\"w-4 h-4\" />\n\t                </button>\n\t                <button\n\t                  onClick={() => setPreview(null)}\n\t                  className=\"p-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800\"\n\t                  title=\"关闭\"\n\t                >\n\t                  <X className=\"w-4 h-4\" />\n\t                </button>\n\t              </div>\n\t            </div>\n\t            <div className=\"p-4 bg-gray-50 dark:bg-gray-950/30\">\n\t              {preview.kind === \"image\" ? (\n\t                <div className=\"flex items-center justify-center\">\n\t                  <img src={preview.url} alt={preview.name} className=\"max-h-[70vh] max-w-full rounded-lg shadow\" />\n\t                </div>\n\t              ) : preview.kind === \"video\" ? (\n\t                <div className=\"w-full aspect-video rounded-lg shadow bg-black overflow-hidden\">\n\t                  <video src={preview.url} controls className=\"w-full h-full object-contain\" />\n\t                </div>\n\t              ) : preview.kind === \"audio\" ? (\n\t                <audio src={preview.url} controls className=\"w-full\" />\n\t              ) : preview.kind === \"pdf\" ? (\n\t                <iframe\n\t                  src={preview.url}\n\t                  className=\"w-full h-[70vh] rounded-lg shadow bg-white dark:bg-gray-900\"\n\t                  title=\"PDF Preview\"\n\t                />\n\t              ) : preview.kind === \"office\" ? (\n\t                <iframe\n\t                  src={`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(preview.url)}`}\n\t                  className=\"w-full h-[70vh] rounded-lg shadow bg-white dark:bg-gray-900\"\n\t                  title=\"Office Preview\"\n\t                />\n\t              ) : preview.kind === \"text\" ? (\n\t                <pre className=\"text-xs bg-white border border-gray-200 rounded-lg p-4 overflow-auto max-h-[70vh] whitespace-pre-wrap dark:bg-gray-900 dark:border-gray-800 dark:text-gray-100\">\n\t                  {preview.text ?? \"加载中...\"}\n\t                </pre>\n\t              ) : (\n\t                <div className=\"bg-white border border-gray-200 rounded-xl p-10 flex flex-col items-center justify-center text-center dark:bg-gray-900 dark:border-gray-800\">\n\t                  <div className=\"w-28 h-28 rounded-full bg-gray-100 flex items-center justify-center dark:bg-gray-800\">\n\t                    <FileCode className=\"w-10 h-10 text-blue-600\" />\n\t                  </div>\n\t                  <div className=\"mt-8 text-2xl font-semibold text-gray-900 dark:text-gray-100\">无法预览此文件</div>\n\t                  <div className=\"mt-3 text-sm text-gray-500 dark:text-gray-400\">此文件类型暂不支持在线预览，请下载后查看。</div>\n\t                  <button\n\t                    onClick={async () => {\n\t                      try {\n\t                        const url = await getSignedDownloadUrlForced(preview.bucket, preview.key, preview.name);\n\t                        triggerDownloadUrl(url, preview.name);\n\t                        setToast(\"已拉起下载\");\n\t                      } catch {\n\t                        setToast(\"下载失败\");\n\t                      }\n\t                    }}\n\t                    className=\"mt-8 inline-flex items-center gap-3 px-8 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-lg\"\n\t                  >\n\t                    <Download className=\"w-5 h-5\" />\n\t                    下载文件\n\t                  </button>\n\t                </div>\n\t              )}\n\t            </div>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}